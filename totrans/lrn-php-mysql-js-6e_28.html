<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 25. Introduction to HTML5" class="calibre4"><div class="preface" id="introduction_to_html5">
<h1 class="calibre10"><span class="keep-together">Chapter 25. </span>Introduction to HTML5</h1>

<p class="author1">HTML5 represents<a contenteditable="false" data-primary="HTML5" data-secondary="benefits of" data-type="indexterm" id="idm45694672714792" class="calibre6"/> a substantial leap forward in web design, layout, and usability. It provides a simple way to manipulate graphics in a web browser without resorting to plug-ins such as Flash, offers methods to insert audio and video into web pages (again without plug-ins), and irons out several annoying inconsistencies that crept into HTML during its evolution.</p>

<p class="author1">In addition, HTML5 includes numerous other enhancements, such as geolocation handling, web workers to manage background tasks, improved form handling, and access to bundles of local storage (far in excess of the limited capabilities of cookies).</p>

<p class="author1">What’s<a contenteditable="false" data-primary="HTML5" data-secondary="browser support for" data-type="indexterm" id="idm45694672711800" class="calibre6"/><a contenteditable="false" data-primary="browsers" data-secondary="support for HTML5" data-type="indexterm" id="idm45694672710392" class="calibre6"/> interesting about HTML5, though, is that it has been an ongoing evolution, in which browsers have adopted different features at different times. Fortunately, all the biggest and most popular HTML5 additions are now supported by all major browsers (those with more than 1% or so of the market, such as Chrome, Internet Explorer, Edge, Firefox, Safari, Opera, and the Android and iOS browsers).</p>

<section data-type="sect1" data-pdf-bookmark="The Canvas" class="calibre4"><div class="preface" id="canvas">
<h1 class="calibre11">The Canvas</h1>

<p class="author1">Originally<a contenteditable="false" data-primary="HTML5" data-secondary="canvas element" data-type="indexterm" id="H5canvas23" class="calibre6"/><a contenteditable="false" data-primary="canvas (HTML5)" data-secondary="benefits of" data-type="indexterm" id="idm45694672993368" class="calibre6"/> introduced by Apple for the WebKit rendering engine (which had itself originated in the KDE HTML layout engine) for its Safari browser, the <em class="hyperlink">canvas</em> element enables us to draw graphics in a web page without having to rely on a plug-in such as Java or Flash. After being standardized, the canvas was adopted by all other browsers and is now a mainstay of modern web development.</p>

<p class="author1">Like other HTML elements, a canvas is simply an element within a web page with defined dimensions and within which you can use JavaScript to insert content—in this case, to draw graphics. You create a canvas by using the <code class="calibre15">&lt;canvas&gt;</code> tag, to which you must assign an ID so that JavaScript will know which canvas it is accessing (as you can have more than one canvas on a page).</p>

<p class="author1">In <a data-type="xref" href="#using_the_html5_canvas_element" class="calibre6">Example 25-1</a>, I’ve created a canvas element, with the ID <code class="calibre15">mycanvas</code>, that contains some text that is displayed only in browsers that don’t support the canvas. Beneath this there is a section of JavaScript that draws the Japanese flag on the canvas (as shown in <a data-type="xref" href="#drawing_the_japanese_flag_using_an_html5" class="calibre6">Figure 25-1</a>).</p>

<div data-type="example" id="using_the_html5_canvas_element" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 25-1. </span>Using the HTML5 canvas element</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code>
<code class="nt">&lt;html&gt;</code>
  <code class="nt">&lt;head&gt;</code>
    <code class="nt">&lt;title&gt;</code>The HTML5 Canvas<code class="nt">&lt;/title&gt;</code>
    <code class="nt">&lt;script </code><code class="na">src=</code><code class="s">'OSC.js'</code><code class="nt">&gt;&lt;/script&gt;</code>
  <code class="nt">&lt;/head&gt;</code>
  <code class="nt">&lt;body&gt;</code>
    <code class="nt">&lt;canvas</code> <code class="na">id=</code><code class="s">'mycanvas'</code> <code class="na">width=</code><code class="s">'320'</code> <code class="na">height=</code><code class="s">'240'</code><code class="nt">&gt;</code>
      This is a canvas element given the ID <code class="nt">&lt;i&gt;</code>mycanvas<code class="nt">&lt;/i&gt;</code>
      This text is visible only in non-HTML5 browsers
    <code class="nt">&lt;/canvas&gt;</code>

    <code class="nt">&lt;script&gt;</code>
      <code class="n">canvas</code>            <code class="o">=</code> <code class="n">O</code><code class="p">(</code><code class="s">'mycanvas'</code><code class="p">)</code>
      <code class="n">context</code>           <code class="o">=</code> <code class="n">canvas</code><code class="p">.</code><code class="n">getContext</code><code class="p">(</code><code class="s">'2d'</code><code class="p">)</code>
      <code class="n">context</code><code class="p">.</code><code class="n">fillStyle</code> <code class="o">=</code> <code class="s">'red'</code>
      <code class="n">S</code><code class="p">(</code><code class="n">canvas</code><code class="p">).</code><code class="n">border</code>  <code class="o">=</code> <code class="s">'1px solid black'</code>

      <code class="n">context</code><code class="p">.</code><code class="n">beginPath</code><code class="p">()</code>
      <code class="n">context</code><code class="p">.</code><code class="n">moveTo</code><code class="p">(</code><code class="mi">160</code><code class="p">,</code> <code class="mi">120</code><code class="p">)</code>
      <code class="n">context</code><code class="p">.</code><code class="n">arc</code><code class="p">(</code><code class="mi">160</code><code class="p">,</code> <code class="mi">120</code><code class="p">,</code> <code class="mi">70</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="nb">Math</code><code class="p">.</code><code class="n">PI</code> <code class="o">*</code> <code class="mi">2</code><code class="p">,</code> <code class="k">false</code><code class="p">)</code>
      <code class="n">context</code><code class="p">.</code><code class="n">closePath</code><code class="p">()</code>
      <code class="n">context</code><code class="p">.</code><code class="n">fill</code><code class="p">()</code>
    <code class="nt">&lt;/script&gt;</code>
  <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code></pre>
</div>

<p class="author1">At this point, it’s not necessary to detail exactly what is going on—I explain that in <a data-type="xref" href="ch26.xhtml#html5_canvas" class="calibre6">Chapter 26</a>—but you should already see that using the canvas is not hard, although it does require learning a few new JavaScript functions. Note that this example draws on the <em class="hyperlink">OSC.js</em> set of functions from <a data-type="xref" href="ch21.xhtml#accessing_css_from_javascript" class="calibre6">Chapter 21</a> to help keep the code neat and compact.<a contenteditable="false" data-primary="" data-startref="H5canvas23" data-type="indexterm" id="idm45694672646056" class="calibre6"/></p>

<figure class="calibre23"><div id="drawing_the_japanese_flag_using_an_html5" class="figure"><img alt="Drawing the Japanese flag using an HTML5 canvas" src="Images/pmj6_2501.png" class="calibre150"/>
<h6 class="calibre24"><span class="keep-together">Figure 25-1. </span>Drawing the Japanese flag using an HTML5 canvas</h6>
</div></figure>

</div></section>

<section data-type="sect1" data-pdf-bookmark="Geolocation" class="calibre4"><div class="preface" id="geolocation">
<h1 class="calibre11">Geolocation</h1>

<p class="author1">Using <em class="hyperlink">geolocation</em>, your<a contenteditable="false" data-primary="HTML5" data-secondary="geolocation" data-type="indexterm" id="H5geo23" class="calibre6"/><a contenteditable="false" data-primary="geolocation" data-type="indexterm" id="geo23" class="calibre6"/> browser can return information to a web server about your location. This information can come from a GPS chip in the computer or mobile device you’re using, from your IP address, or from analysis of nearby WiFi hotspots. For security purposes, the user is always in control and can refuse to provide this information on a one-off basis or can enable settings to either permanently block or allow access to this data from one or all websites.</p>

<p class="author1">There are numerous uses for this technology, including giving you turn-by-turn navigation; providing local maps; notifying you of nearby restaurants, WiFi hotspots, or other places; letting you know which friends are near you; directing you to the nearest gas station; and more.</p>

<p class="author1"><a data-type="xref" href="#displaying_the_map_at_a_userapostrophes" class="calibre6">Example 25-2</a> will display a Google map of the user’s location, as long as the browser supports geolocation and the user grants access to location data (as shown in <a data-type="xref" href="#new-geoloc" class="calibre6">Figure 25-2</a>). Otherwise, it will display an error.</p>

<div data-type="example" id="displaying_the_map_at_a_userapostrophes" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 25-2. </span>Displaying a map of the user’s location</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code>
<code class="nt">&lt;html&gt;</code>
  <code class="nt">&lt;head&gt;</code>
    <code class="nt">&lt;title&gt;</code>Geolocation Example<code class="nt">&lt;/title&gt;</code>
  <code class="nt">&lt;/head&gt;</code>
  <code class="nt">&lt;body&gt;</code>
    <code class="nt">&lt;script&gt;</code>
      <code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="n">navigator</code><code class="p">.</code><code class="n">geolocation</code> <code class="o">==</code> <code class="s">'undefined'</code><code class="p">)</code>
         <code class="n">alert</code><code class="p">(</code><code class="s">"Geolocation not supported."</code><code class="p">)</code>
      <code class="k">else</code>
        <code class="n">navigator</code><code class="p">.</code><code class="n">geolocation</code><code class="p">.</code><code class="n">getCurrentPosition</code><code class="p">(</code><code class="n">granted</code><code class="p">,</code> <code class="n">denied</code><code class="p">)</code>

      <code class="k">function</code> <code class="n">granted</code><code class="p">(</code><code class="n">position</code><code class="p">)</code>
      <code class="p">{</code>
        <code class="k">var</code> <code class="n">lat</code> <code class="o">=</code> <code class="n">position</code><code class="p">.</code><code class="n">coords</code><code class="p">.</code><code class="n">latitude</code>
        <code class="k">var</code> <code class="n">lon</code> <code class="o">=</code> <code class="n">position</code><code class="p">.</code><code class="n">coords</code><code class="p">.</code><code class="n">longitude</code>
        
        <code class="n">alert</code><code class="p">(</code><code class="s">"Permission Granted. You are at location:\n\n"</code>
          <code class="o">+</code> <code class="n">lat</code> <code class="o">+</code> <code class="s">", "</code> <code class="o">+</code> <code class="n">lon</code> <code class="o">+</code>
          <code class="s">"\n\nClick 'OK' to load Google Maps with your location"</code><code class="p">)</code>

        <code class="nb">window</code><code class="p">.</code><code class="n">location</code><code class="p">.</code><code class="n">replace</code><code class="p">(</code><code class="s">"https://www.google.com/maps/@"</code>
          <code class="o">+</code> <code class="n">lat</code> <code class="o">+</code> <code class="s">","</code> <code class="o">+</code> <code class="n">lon</code> <code class="o">+</code> <code class="s">",14z"</code><code class="p">)</code>
      <code class="p">}</code>

      <code class="k">function</code> <code class="n">denied</code><code class="p">(</code><code class="n">error</code><code class="p">)</code>
      <code class="p">{</code>
        <code class="k">var</code> <code class="n">message</code>

        <code class="k">switch</code><code class="p">(</code><code class="n">error</code><code class="p">.</code><code class="n">code</code><code class="p">)</code>
        <code class="p">{</code>
          <code class="k">case</code> <code class="mi">1</code><code class="o">:</code> <code class="n">message</code> <code class="o">=</code> <code class="s">'Permission Denied'</code><code class="p">;</code> <code class="k">break</code><code class="p">;</code>
          <code class="k">case</code> <code class="mi">2</code><code class="o">:</code> <code class="n">message</code> <code class="o">=</code> <code class="s">'Position Unavailable'</code><code class="p">;</code> <code class="k">break</code><code class="p">;</code>
          <code class="k">case</code> <code class="mi">3</code><code class="o">:</code> <code class="n">message</code> <code class="o">=</code> <code class="s">'Operation Timed Out'</code><code class="p">;</code> <code class="k">break</code><code class="p">;</code>
          <code class="k">case</code> <code class="mi">4</code><code class="o">:</code> <code class="n">message</code> <code class="o">=</code> <code class="s">'Unknown Error'</code><code class="p">;</code> <code class="k">break</code><code class="p">;</code>
        <code class="p">}</code>

        <code class="n">alert</code><code class="p">(</code><code class="s">"Geolocation Error: "</code> <code class="o">+</code> <code class="n">message</code><code class="p">)</code>
      <code class="p">}</code>
    <code class="nt">&lt;/script&gt;</code>
  <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code>
</pre>
</div>

<p class="author1">Again, here is not the place to describe how this all works; I will detail that in <a data-type="xref" href="ch28.xhtml#other_html5_features" class="calibre6">Chapter 28</a>. For now, though, this example serves to show you how easy managing geolocation can be.<a contenteditable="false" data-primary="" data-startref="geo23" data-type="indexterm" id="idm45694672630552" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="H5geo23" data-type="indexterm" id="idm45694672448072" class="calibre6"/></p>

<figure class="calibre23"><div id="new-geoloc" class="figure"><img alt="" class="iimagesnew-geolocjpg" src="Images/pmj6_2502.png"/>
<h6 class="calibre24"><span class="keep-together">Figure 25-2. </span>The user’s location has been used to display a map</h6>
</div></figure>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Audio and Video" class="calibre4"><div class="preface" id="audio_and_video">
<h1 class="calibre11">Audio and Video</h1>

<p class="author1">Another<a contenteditable="false" data-primary="HTML5" data-secondary="audio and video support" data-type="indexterm" id="idm45694672442616" class="calibre6"/> great addition to HTML5 is support for in-browser audio and video. While playing these types of media can be a little complicated due to the variety of encoding types and licenses, the <code class="calibre15">&lt;audio&gt;</code> and <code class="calibre15">&lt;video&gt;</code> elements provide the flexibility you need to display the types of media you have available.</p>

<p class="author1">In <a data-type="xref" href="#playing_a_video_with_html5" class="calibre6">Example 25-3</a>, the same video file has been encoded in different formats to ensure that all major browsers are accounted for. Browsers will simply select the first type they recognize and play it, as shown in <a data-type="xref" href="#displaying_video_using_html5" class="calibre6">Figure 25-3</a>.</p>

<div data-type="example" id="playing_a_video_with_html5" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 25-3. </span>Playing a video with HTML5</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code>
<code class="nt">&lt;html&gt;</code>
  <code class="nt">&lt;head&gt;</code>
    <code class="nt">&lt;title&gt;</code>HTML5 Video<code class="nt">&lt;/title&gt;</code>
  <code class="nt">&lt;/head&gt;</code>
  <code class="nt">&lt;body&gt;</code>
    <code class="nt">&lt;video</code> <code class="na">width=</code><code class="s">'560'</code> <code class="na">height=</code><code class="s">'320'</code> <code class="na">controls</code><code class="nt">&gt;</code>
      <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'movie.mp4'</code>  <code class="na">type=</code><code class="s">'video/mp4'</code><code class="nt">&gt;</code>
      <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'movie.webm'</code> <code class="na">type=</code><code class="s">'video/webm'</code><code class="nt">&gt;</code>
      <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'movie.ogv'</code>  <code class="na">type=</code><code class="s">'video/ogg'</code><code class="nt">&gt;</code>
    <code class="nt">&lt;/video&gt;</code>
  <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code></pre>
</div>

<figure class="calibre23"><div id="displaying_video_using_html5" class="figure"><img alt="" class="iimageshtml5-video-examplejpg" src="Images/pmj6_2503.png"/>
<h6 class="calibre24"><span class="keep-together">Figure 25-3. </span>Displaying video using HTML5</h6>
</div></figure>

<p class="author1">Inserting audio into a web page is just as easy, as you will discover in <a data-type="xref" href="ch27.xhtml#html5_audio_and_video" class="calibre6">Chapter 27</a>.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Forms" class="calibre4"><div class="preface" id="forms">
<h1 class="calibre11">Forms</h1>

<p class="author1">As<a contenteditable="false" data-primary="HTML5" data-secondary="form handling" data-type="indexterm" id="idm45694672397512" class="calibre6"/> you already saw in <a data-type="xref" href="ch12.xhtml#form_handling" class="calibre6">Chapter 12</a>, HTML5 forms are in the process of being enhanced, but support across all browsers remains patchy. What you <em class="hyperlink">can</em> safely use today has been detailed in <a data-type="xref" href="ch12.xhtml#form_handling" class="calibre6">Chapter 12</a>.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Local Storage" class="calibre4"><div class="preface" id="local_storage">
<h1 class="calibre11">Local Storage</h1>

<p class="author1">With<a contenteditable="false" data-primary="HTML5" data-secondary="local storage enhancements" data-type="indexterm" id="idm45694672391592" class="calibre6"/><a contenteditable="false" data-primary="local storage" data-secondary="HTML enhancements to" data-type="indexterm" id="idm45694672390120" class="calibre6"/> local storage, the amount and complexity of data you can save on a local device is substantially increased from the meager space provided by cookies. This opens up the possibility of using web apps to work on documents offline and then syncing them with the web server only when an internet connection is available. It also raises the prospect of storing small databases locally for access with WebSQL, perhaps for keeping a copy of your music collection’s details or all your personal statistics as part of a diet or weight-loss plan, for example. In <a data-type="xref" href="ch28.xhtml#other_html5_features" class="calibre6">Chapter 28</a>, I show you how to make the most of this new facility in your web projects.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Web Workers" class="calibre4"><div class="preface" id="web_workers">
<h1 class="calibre11">Web Workers</h1>

<p class="author1">It<a contenteditable="false" data-primary="HTML5" data-secondary="web workers in" data-type="indexterm" id="idm45694672385048" class="calibre6"/><a contenteditable="false" data-primary="web workers" data-type="indexterm" id="idm45694672383640" class="calibre6"/> has been possible to run interrupt-driven applications in the background using JavaScript for many years, but only through a clumsy and inefficient process. It makes much more sense to let the underlying browser technology run background tasks on your behalf, which it can do far more quickly than you can by continuously interrupting the browser to check how things are going.</p>

<p class="author1">Instead, with <em class="hyperlink">web workers</em>, you set everything up and pass your code to the web browser, which then runs it. When anything significant occurs, your code simply has to notify the browser, which then reports back to your main code. In the meantime, your web page can be doing nothing or a number of other tasks and can forget about the background task until it makes itself known.</p>

<p class="author1">In <a data-type="xref" href="ch28.xhtml#other_html5_features" class="calibre6">Chapter 28</a>, I demonstrate how you can use web workers to create a simple clock and to calculate prime numbers.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Questions" class="calibre4"><div class="preface" id="questions-id00117">
<h1 class="calibre11">Questions</h1>

<ol class="calibre25">
	<li class="calibre26">
	<p class="author1">What HTML5 element enables drawing of graphics in web pages?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What programming language is required to access many of the advanced HTML5 features?</p>
	</li>
	<li class="calibre26">
	<p class="author1">Which HTML5 tags would you use to incorporate audio and video in a web page?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What feature in HTML5 offers greater capability than cookies?</p>
	</li>
	<li class="calibre26">
	<p class="author1">Which HTML5 technology supports running background JavaScript tasks?</p>
	</li>
</ol>

<p class="author1">See <a data-type="xref" href="app01_split_024.xhtml#chapter_25_answers" class="calibre6">“Chapter 25 Answers”</a> in the <a data-type="xref" href="app01_split_000.xhtml#solutions_to_the_chapter_questions" class="calibre6">Appendix A</a> for the answers to these <span class="keep-together">questions</span>.</p>
</div></section>
</div></section></div></body></html>