<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xml:lang="en"
      lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<title>PHP Cookbook</title>
<link rel="stylesheet" type="text/css" href="override_v1.css"/>
<link rel="stylesheet" type="text/css" href="epub.css"/>
</head>
<body>
<div id="book-content">
<div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 18. PHP Command Line"><div class="chapter" id="chapter_command_line">
<h1><span class="label">Chapter 18. </span>PHP Command Line</h1>


<p>Developers come to PHP from all sorts of backgrounds and with various levels of experience in software development. Regardless of whether you are a new computer science graduate, a seasoned developer, or someone from a noncoding field looking to learn a new skill, the forgiving nature of the language makes it easy to get started. That being said, the largest stumbling block for these noncoder beginners may be PHP’s command-line interface.</p>

<p>Noncoder beginners are likely to be <a data-type="indexterm" data-primary="command line" id="idm45875133644512"></a>comfortable with using a graphical user interface and navigating with a mouse and a graphical display. Give the same user a command-line terminal, and they might struggle with or be intimidated by the interface.</p>

<p>As a backend language, PHP is frequently manipulated at the command line. This potentially makes it an intimidating language for developers not accustomed to text-based interfaces. Fortunately, PHP-based command-line applications are relatively straightforward to build and immensely powerful to use.</p>

<p>An application might expose a command palette similar to its default RESTful interface, thus making interactions from a terminal similar to those over a browser or through an API. Yet another application might bury its administrative tooling in the CLI, protecting less technical end users from accidentally damaging the application.</p>

<p>One of the most popular PHP applications in <a data-type="indexterm" data-primary="WordPress" id="idm45875133642464"></a>the market today is <a href="https://wordpress.org">WordPress</a>, the open source blogging and web platform. Most users interact with the platform through its graphical web interface, but the WordPress community also maintains a rich command-line interface for the platform: <a href="https://wp-cli.org">WP-CLI</a>. This tool allows a user to manage everything already exposed by the graphical tool but through a scriptable, text-based terminal interface. It also exposes commands for managing user roles, system configuration, the state of the database, and even the system cache. None of these capabilities exist within the stock web interface!</p>

<p>Any developer building a PHP application today can and should understand the capabilities of the command line, both in terms of what you can do with PHP itself and how your application can expose its functionality through the same interface. A truly rich web application will at some point live on a server that might not expose any sort of graphical interface, so being able to control your application from the terminal is not just a power move—it’s a necessity.</p>

<p>The following recipes demystify the intricacies of argument parsing, managing input and output, and even leveraging extensions to build full applications that run in the console.</p>






<section data-type="sect1" data-pdf-bookmark="18.1 Parsing Program Arguments"><div class="sect1" id="idm45875133639296">
<h1>18.1 Parsing Program Arguments</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45875133638112">
<h2>Problem</h2>

<p>You want a user to pass an argument <a data-type="indexterm" data-primary="command line" data-secondary="arguments, parsing" id="clngrps"></a><a data-type="indexterm" data-primary="arguments" data-secondary="parsing, command line" id="rgscln"></a><a data-type="indexterm" data-primary="parsing arguments" id="prsgmts"></a>when they invoke your script so it can be parsed from within the application.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45875133632944">
<h2>Solution</h2>

<p>Use the <code>$argc</code> integer and the <code>$argv</code> array to <a data-type="indexterm" data-primary="$argc integer" id="rgctgr"></a><a data-type="indexterm" data-primary="$argv array" id="rgvryy"></a><a data-type="indexterm" data-primary="integers" data-secondary="$argc" id="tgrsrgc"></a><a data-type="indexterm" data-primary="arrays" data-secondary="$argv" id="rrysrgv"></a>retrieve the value of an argument directly in the script. For example:</p>

<pre data-type="programlisting" data-code-language="php"><code class="o">&lt;?</code><code class="nx">php</code>
<code class="k">if</code> <code class="p">(</code><code class="nv">$argc</code> <code class="o">!==</code> <code class="mi">2</code><code class="p">)</code> <code class="p">{</code>
    <code class="k">die</code><code class="p">(</code><code class="s1">'Invalid number of arguments.'</code><code class="p">);</code>
<code class="p">}</code>

<code class="nv">$name</code> <code class="o">=</code> <code class="nb">htmlspecialchars</code><code class="p">(</code><code class="nv">$argv</code><code class="p">[</code><code class="mi">1</code><code class="p">]);</code>

<code class="k">echo</code> <code class="s2">"Hello, </code><code class="si">{</code><code class="nv">$name</code><code class="si">}</code><code class="s2">!"</code> <code class="o">.</code> <code class="nx">PHP_EOL</code><code class="p">;</code></pre>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45875133606080">
<h2>Discussion</h2>

<p>Assuming you named the script in the Solution example <em>script.php</em>, it would be invoked in a terminal session with the following command:</p>

<pre data-type="programlisting" data-code-language="sh">%<code class="w"> </code>php<code class="w"> </code>script.php<code class="w"> </code>World<code class="w"></code></pre>

<p>Internally, the <code>$argc</code> variable contains a count of the number of parameters passed to PHP when executing the script. In the Solution example, there are exactly two parameters:</p>

<ul>
<li>
<p>The name of the script itself (<em>script.php</em>)</p>
</li>
<li>
<p>Whatever string value you passed after the name of the script</p>
</li>
</ul>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Both <code>$argc</code> and <code>$argv</code> can be disabled at runtime by setting the <a href="https://oreil.ly/ZKulH"><code>reg⁠ister_argc_argv</code> flag</a> to <code>false</code> in your <em>php.ini</em> file. If enabled, these parameters will contain either the arguments passed to a script or information about a GET request forwarded from a web server.</p>
</div>

<p>The first argument will <em>always</em> be the name of the script or file being executed. All other arguments are delimited by spaces beyond that. Should you need to pass a compound argument (like a string with spaces), wrap that argument in double quotes. For example:</p>

<pre data-type="programlisting" data-code-language="sh">%<code class="w"> </code>php<code class="w"> </code>script.php<code class="w"> </code><code class="s2">"dear reader"</code><code class="w"></code></pre>

<p>More complicated implementations might leverage PHP’s <code>getopt()</code> function rather than manipulating the argument variables directly. This function will parse both short and long options and pass their contents into arrays your application can then leverage.</p>

<p>Short options are each single characters represented at the command line with a single dash—for example, <code>-v</code>. Each option could either merely be present (as in a flag) or be followed by data (as in an option).</p>

<p>Long options are prefixed with double dashes but otherwise act the same way as their short relatives. You can assume either or both styles of options are present and use them however you want in your application.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Often, a command-line application will provide both a long option and a single-character shortcut for the same thing. For example, <code>-v</code> and <code>--verbose</code> are frequently used to control the level of output of a script. With <code>getopt()</code>, you can easily have both, but PHP won’t link them together. If you support two different methods for providing the same option value or flag, you’ll need to reconcile them within your script manually.</p>
</div>

<p>The <code>getopt()</code> function takes three <a data-type="indexterm" data-primary="getopt() function" id="idm45875133560720"></a><a data-type="indexterm" data-primary="functions" data-secondary="getopt()" id="idm45875133559984"></a>parameters and returns an array representing the options the PHP interpreter has parsed:</p>

<ul>
<li>
<p>The first argument is a single string in which each character represents a short option or flag.</p>
</li>
<li>
<p>The second argument is an array of strings, and each string is a long option name.</p>
</li>
<li>
<p>The final argument, <em>which is passed by reference</em>, is an integer representing the index in <code>$argv</code> where parsing has stopped when PHP encounters a non-option.</p>
</li>
</ul>

<p>Both short and long options also accept modifiers. If you pass an option by itself, PHP will not accept a value for that option but will treat it as a flag. If you append a colon to an option, PHP will <em>require</em> a value. If you append two colons, PHP will treat the value as optional.</p>

<p>As an illustration, <a data-type="xref" href="#getopt_arguments">Table 18-1</a> lists out various ways both short and long options can leverage these additional elements.</p>
<table id="getopt_arguments">
<caption><span class="label">Table 18-1. </span>PHP <code>getopt()</code> arguments</caption>
<thead>
<tr>
<th>Argument</th>
<th>Argument type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>a</code></p></td>
<td><p>Short option</p></td>
<td><p>A single flag with no value: <code>-a</code></p></td>
</tr>
<tr>
<td><p><code>b:</code></p></td>
<td><p>Short option</p></td>
<td><p>A single flag with a required value: <code>-b value</code></p></td>
</tr>
<tr>
<td><p><code>c::</code></p></td>
<td><p>Short option</p></td>
<td><p>A single flag with an optional value: <code>-c value</code> or just <code>-c</code></p></td>
</tr>
<tr>
<td><p><code>ab:c</code></p></td>
<td><p>Short option</p></td>
<td><p>Composite three flags where <code>a</code> and <code>c</code> have no value but <code>b</code> requires a value: <code>-a -b value -c</code></p></td>
</tr>
<tr>
<td><p><code>verbose</code></p></td>
<td><p>Long option</p></td>
<td><p>Option string with no value: <code>--verbose</code></p></td>
</tr>
<tr>
<td><p><code>name:</code></p></td>
<td><p>Long option</p></td>
<td><p>Option string with a required value: <code>--name Alice</code></p></td>
</tr>
<tr>
<td><p><code>output::</code></p></td>
<td><p>Long option</p></td>
<td><p>Option string with an optional value: <code>--output file.txt</code> or just <code>--output</code></p></td>
</tr>
</tbody>
</table>

<p>To illustrate the utility of option parsing, define a program as in <a data-type="xref" href="#getopt_walkthrough">Example 18-1</a> that exposes both short and long options but also leverages free-form (non-option) input after the flags. The following script will expect the following:</p>

<ul>
<li>
<p>A flag to control whether output should be capitalized (<code>-c</code>)</p>
</li>
<li>
<p>A username (<code>--name</code>)</p>
</li>
<li>
<p>Some extra, arbitrary text after the options</p>
</li>
</ul>
<div id="getopt_walkthrough" data-type="example">
<h5><span class="label">Example 18-1. </span>Direct illustration of <code>getopt()</code> with multiple options</h5>

<pre data-type="programlisting" data-code-language="php"><code class="o">&lt;</code><code class="o">?</code><code class="nx">php</code><code>
</code><code class="nv">$optionIndex</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code>

</code><code class="nv">$options</code><code> </code><code class="o">=</code><code> </code><code class="nb">getopt</code><code class="p">(</code><code class="s1">'c'</code><code class="p">,</code><code> </code><code class="p">[</code><code class="s1">'name:'</code><code class="p">],</code><code> </code><code class="nv">$optionIndex</code><code class="p">);</code><code> </code><a class="co" id="co_php_command_line_CO1-1" href="#callout_php_command_line_CO1-1"><img src="assets/1.png" alt="1" width="12" height="12"/></a><code>

</code><code class="nv">$firstLine</code><code> </code><code class="o">=</code><code> </code><code class="s2">"</code><code class="s2">Hello, </code><code class="si">{</code><code class="nv">$options</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]</code><code class="si">}</code><code class="s2">!</code><code class="s2">"</code><code> </code><code class="o">.</code><code> </code><code class="nx">PHP_EOL</code><code class="p">;</code><code> </code><a class="co" id="co_php_command_line_CO1-2" href="#callout_php_command_line_CO1-2"><img src="assets/2.png" alt="2" width="12" height="12"/></a><code>

</code><code class="nv">$rest</code><code> </code><code class="o">=</code><code> </code><code class="nb">implode</code><code class="p">(</code><code class="s1">' '</code><code class="p">,</code><code> </code><code class="nb">array_slice</code><code class="p">(</code><code class="nv">$argv</code><code class="p">,</code><code> </code><code class="nv">$optionIndex</code><code class="p">));</code><code> </code><a class="co" id="co_php_command_line_CO1-3" href="#callout_php_command_line_CO1-3"><img src="assets/3.png" alt="3" width="12" height="12"/></a><code>

</code><code class="k">if</code><code> </code><code class="p">(</code><code class="nb">array_key_exists</code><code class="p">(</code><code class="s1">'c'</code><code class="p">,</code><code> </code><code class="nv">$options</code><code class="p">))</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_php_command_line_CO1-4" href="#callout_php_command_line_CO1-4"><img src="assets/4.png" alt="4" width="12" height="12"/></a><code>
    </code><code class="nv">$firstLine</code><code> </code><code class="o">=</code><code> </code><code class="nb">strtoupper</code><code class="p">(</code><code class="nv">$firstLine</code><code class="p">);</code><code>
    </code><code class="nv">$rest</code><code> </code><code class="o">=</code><code> </code><code class="nb">strtoupper</code><code class="p">(</code><code class="nv">$rest</code><code class="p">);</code><code>
</code><code class="p">}</code><code>

</code><code class="k">echo</code><code> </code><code class="nv">$firstLine</code><code class="p">;</code><code>
</code><code class="k">echo</code><code> </code><code class="nv">$rest</code><code> </code><code class="o">.</code><code> </code><code class="nx">PHP_EOL</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_php_command_line_CO1-1" href="#co_php_command_line_CO1-1"><img src="assets/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Use <code>getopt()</code> to define both the short and long options your script expects. The third, optional parameter is passed by reference and will be overwritten by the index at which the interpreter runs out of options to parse.</p></dd>
<dt><a class="co" id="callout_php_command_line_CO1-2" href="#co_php_command_line_CO1-2"><img src="assets/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Options with values are easy to extract from the resultant associative array.</p></dd>
<dt><a class="co" id="callout_php_command_line_CO1-3" href="#co_php_command_line_CO1-3"><img src="assets/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>The resultant index from <code>getopt()</code> can be used to quickly extract any additional data from the command by pulling unparsed values out of the <code>$argv</code> array.</p></dd>
<dt><a class="co" id="callout_php_command_line_CO1-4" href="#co_php_command_line_CO1-4"><img src="assets/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Options without values will still set a key in the associative array, but the value will be a Boolean <code>false</code>. Check that the key exists, but don’t rely on its value because of the counterintuitive nature of the result.</p></dd>
</dl></div>

<p>Assuming you name the script defined by <a data-type="xref" href="#getopt_walkthrough">Example 18-1</a> <em>getopt.php</em>, you can expect to see a result like the following:</p>

<pre data-type="programlisting" data-code-language="sh">%<code class="w"> </code>php<code class="w"> </code>getopt.php<code class="w"> </code>-c<code class="w"> </code>--name<code class="w"> </code>Reader<code class="w"> </code>This<code class="w"> </code>is<code class="w"> </code>fun<code class="w"></code>
HELLO,<code class="w"> </code>READER!<code class="w"></code>
THIS<code class="w"> </code>IS<code class="w"> </code>FUN<code class="w"></code>
%<code class="w"></code></pre>
</div></section>








<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45875133292656">
<h2>See Also</h2>

<p>Documentation <a data-type="indexterm" data-primary="command line" data-secondary="arguments, parsing" data-startref="clngrps" id="idm45875133282928"></a><a data-type="indexterm" data-primary="arguments" data-secondary="parsing, command line" data-startref="rgscln" id="idm45875133281680"></a><a data-type="indexterm" data-primary="parsing arguments" data-startref="prsgmts" id="idm45875133280464"></a><a data-type="indexterm" data-primary="$argc integer" data-startref="rgctgr" id="idm45875133279520"></a><a data-type="indexterm" data-primary="$argv array" data-startref="rgvryy" id="idm45875133278576"></a><a data-type="indexterm" data-primary="integers" data-secondary="$argc" data-startref="tgrsrgc" id="idm45875133277632"></a><a data-type="indexterm" data-primary="arrays" data-secondary="$argv" data-startref="rrysrgv" id="idm45875133276416"></a>on <a href="https://oreil.ly/BXdSI"><code>$argc</code></a>,  <a href="https://oreil.ly/ODRwK"><code>$argv</code></a>, and the <a href="https://oreil.ly/ZfqTP"><code>getopt()</code> function</a>.</p>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="18.2 Reading Interactive User Input"><div class="sect1" id="idm45875133272272">
<h1>18.2 Reading Interactive User Input</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45875133270992">
<h2>Problem</h2>

<p>You want to prompt the user for input and <a data-type="indexterm" data-primary="command line" data-secondary="input prompts" id="mmdlppp"></a><a data-type="indexterm" data-primary="command line" data-secondary="reading input" id="clnrdpt"></a><a data-type="indexterm" data-primary="user input" data-secondary="prompting for" id="usptprp"></a><a data-type="indexterm" data-primary="reading" data-secondary="user input" id="rdgspt"></a>read their response into a variable.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45875133249120">
<h2>Solution</h2>

<p>Read data from the standard input <a data-type="indexterm" data-primary="STDIN file" id="stdnfle"></a>stream by using the <code>STDIN</code> file handle constant. For example:</p>

<pre data-type="programlisting" data-code-language="php"><code class="k">echo</code> <code class="s1">'Enter your name: '</code><code class="p">;</code>

<code class="nv">$name</code> <code class="o">=</code> <code class="nb">trim</code><code class="p">(</code><code class="nb">fgets</code><code class="p">(</code><code class="nx">STDIN</code><code class="p">,</code> <code class="mi">1024</code><code class="p">));</code>

<code class="k">echo</code> <code class="s2">"Welcome, </code><code class="si">{</code><code class="nv">$name</code><code class="si">}</code><code class="s2">!"</code> <code class="o">.</code> <code class="nx">PHP_EOL</code><code class="p">;</code></pre>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45875133223408">
<h2>Discussion</h2>

<p>The standard input stream makes it easy for you to read any data that comes in with a request. Reading data directly from the stream in a program using <code>fgets()</code> will pause the execution of your program until the end user provides that input to you.</p>

<p>The Solution example leverages the shorthand constant <code>STDIN</code> to reference the input stream. You could just as easily use the stream’s fully qualified name (along with an explicit <code>fopen()</code>), as demonstrated in <a data-type="xref" href="#php_stdin_user_input">Example 18-2</a>.</p>
<div id="php_stdin_user_input" data-type="example">
<h5><span class="label">Example 18-2. </span>Reading user input from <code>stdin</code></h5>

<pre data-type="programlisting" data-code-language="php"><code class="k">echo</code> <code class="s1">'Enter your name: '</code><code class="p">;</code>

<code class="nv">$name</code> <code class="o">=</code> <code class="nb">trim</code><code class="p">(</code><code class="nb">fgets</code><code class="p">(</code><code class="nb">fopen</code><code class="p">(</code><code class="s1">'php://stdin'</code><code class="p">,</code> <code class="s1">'r'</code><code class="p">),</code> <code class="mi">1024</code><code class="p">));</code>

<code class="k">echo</code> <code class="s2">"Welcome, </code><code class="si">{</code><code class="nv">$name</code><code class="si">}</code><code class="s2">!"</code> <code class="o">.</code> <code class="nx">PHP_EOL</code><code class="p">;</code></pre></div>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The special <code>STDIN</code> and <code>STDOUT</code> shorthand <a data-type="indexterm" data-primary="STDOUT file" id="idm45875133190512"></a>names are only accessible in an application. If using the interactive terminal REPL as in <a data-type="xref" href="#recipe_php_repl">Recipe 18.5</a>, these constants will not be defined nor will they be accessible.</p>
</div>

<p>An alternative approach is to use the <a href="https://oreil.ly/eRhJw">GNU Readline extension</a> with PHP, which may or may not be available in your installation. This extension wraps much of the manual work to prompt for, retrieve, and trim user input. The entire Solution example could be rewritten as shown in <a data-type="xref" href="#php_readline_integration">Example 18-3</a>.</p>
<div id="php_readline_integration" data-type="example">
<h5><span class="label">Example 18-3. </span>Reading input from the GNU Readline extension</h5>

<pre data-type="programlisting" data-code-language="php"><code class="nv">$name</code> <code class="o">=</code> <code class="nb">readline</code><code class="p">(</code><code class="s1">'Enter your name: '</code><code class="p">);</code>

<code class="k">echo</code> <code class="s2">"Welcome, </code><code class="si">{</code><code class="nv">$name</code><code class="si">}</code><code class="s2">!"</code> <code class="o">.</code> <code class="nx">PHP_EOL</code><code class="p">;</code></pre></div>

<p>Additional functions provided by the Readline extension, like <a href="https://oreil.ly/J5do3"><code>readline_add_​history()</code></a>, allow for efficient manipulation of the system’s command-line history. If the extension is available, it’s a powerful way to work with user input.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Some distributions of PHP, like those for Windows, will come with Readline support enabled by default. In other situations, you might need to compile PHP explicitly to include this support. For more on native PHP extensions, review <a data-type="xref" href="ch15.html#native_php_extensions">Recipe 15.4</a>.</p>
</div>
</div></section>








<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45875133129088">
<h2>See Also</h2>

<p>Further discussion of standard input <a data-type="indexterm" data-primary="command line" data-secondary="input prompts" data-startref="mmdlppp" id="idm45875133126832"></a><a data-type="indexterm" data-primary="command line" data-secondary="reading input" data-startref="clnrdpt" id="idm45875133125584"></a><a data-type="indexterm" data-primary="user input" data-secondary="prompting for" data-startref="usptprp" id="idm45875133124368"></a><a data-type="indexterm" data-primary="reading" data-secondary="user input" data-startref="rdgspt" id="idm45875133123152"></a><a data-type="indexterm" data-primary="STDIN file" data-startref="stdnfle" id="idm45875133121936"></a>in <a data-type="xref" href="ch11.html#recipe_input_stream">Recipe 11.2</a>.</p>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="18.3 Colorizing Console Output"><div class="sect1" id="recipe_colorized_console">
<h1>18.3 Colorizing Console Output</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45875133118288">
<h2>Problem</h2>

<p>You want to display text in the <a data-type="indexterm" data-primary="command line" data-secondary="colored text" id="idm45875133116960"></a><a data-type="indexterm" data-primary="text color" id="idm45875133115984"></a>console in different colors.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45875133114928">
<h2>Solution</h2>

<p>Use properly escaped console color codes. For example, print the string <code>Happy Independence Day</code> in blue text on a red background as follows:</p>

<pre data-type="programlisting" data-code-language="php"><code class="k">echo</code> <code class="s2">"\e[0;34;41mHappy Independence Day!\e[0m"</code> <code class="o">.</code> <code class="nx">PHP_EOL</code><code class="p">;</code></pre>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45875133092416">
<h2>Discussion</h2>

<p>Unix-like terminals support ANSI escape sequences that grant programs fine-grained control over things like cursor location and font styling. In particular, you can define the color used by the terminal for all following text with this escape sequence:</p>

<pre data-type="programlisting" data-code-language="sh"><code class="se">\e</code><code class="o">[{</code>foreground<code class="o">}</code><code class="p">;</code><code class="o">{</code>background<code class="o">}</code>m<code class="w"></code></pre>

<p>Foreground colors come in two variants—regular and bold (determined by an extra Boolean flag in the color definition). Background colors lack this differentiation. All of the colors are identified by these codes in <a data-type="xref" href="#ansi_color_codes">Table 18-2</a>.</p>
<table id="ansi_color_codes">
<caption><span class="label">Table 18-2. </span>ANSI color codes</caption>
<thead>
<tr>
<th>Color</th>
<th>Normal foreground</th>
<th>Bright foreground</th>
<th>Background</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Black</p></td>
<td><p><code>0;30</code></p></td>
<td><p><code>1;30</code></p></td>
<td><p><code>40</code></p></td>
</tr>
<tr>
<td><p>Red</p></td>
<td><p><code>0;31</code></p></td>
<td><p><code>1;31</code></p></td>
<td><p><code>41</code></p></td>
</tr>
<tr>
<td><p>Green</p></td>
<td><p><code>0;32</code></p></td>
<td><p><code>1;32</code></p></td>
<td><p><code>42</code></p></td>
</tr>
<tr>
<td><p>Yellow</p></td>
<td><p><code>0;33</code></p></td>
<td><p><code>1;33</code></p></td>
<td><p><code>43</code></p></td>
</tr>
<tr>
<td><p>Blue</p></td>
<td><p><code>0;34</code></p></td>
<td><p><code>1;34</code></p></td>
<td><p><code>44</code></p></td>
</tr>
<tr>
<td><p>Magenta</p></td>
<td><p><code>0;35</code></p></td>
<td><p><code>1;35</code></p></td>
<td><p><code>45</code></p></td>
</tr>
<tr>
<td><p>Cyan</p></td>
<td><p><code>0;36</code></p></td>
<td><p><code>1;36</code></p></td>
<td><p><code>46</code></p></td>
</tr>
<tr>
<td><p>White</p></td>
<td><p><code>0;37</code> (really light gray)</p></td>
<td><p><code>1;37</code></p></td>
<td><p><code>47</code></p></td>
</tr>
</tbody>
</table>

<p>To reset the terminal colors back to normal, use a simple <code>0</code> in place of any color definitions. The code <code>\e[0m</code> will reset all attributes.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45875132990256">
<h2>See Also</h2>

<p>Wikipedia coverage of <a href="https://oreil.ly/y02cf">ANSI escape codes</a>.</p>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="18.4 Creating a Command-Line Application with 
Symfony Console"><div class="sect1" id="idm45875132987952">
<h1>18.4 Creating a Command-Line Application with 
<span class="keep-together">Symfony Console</span></h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45875132986144">
<h2>Problem</h2>

<p>You want to create a full <a data-type="indexterm" data-primary="command line" data-secondary="application creation, Symfony Console and" id="cmlnppcsyfy"></a><a data-type="indexterm" data-primary="Symfony Console component" id="symfycsp"></a>command-line application without manually writing all of the argument parsing and handling code yourself.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45875132982048">
<h2>Solution</h2>

<p>Use the Symfony Console component to define your application and its commands. <a data-type="xref" href="#basic_hello_world_command">Example 18-4</a>, for example, defines a Symfony command for greeting a user by name with <code>Hello world</code> at the console. <a data-type="xref" href="#actual_console_application">Example 18-5</a> then uses that command object to create an application that greets the user within the terminal.</p>
<div id="basic_hello_world_command" data-type="example">
<h5><span class="label">Example 18-4. </span>A basic hello world command</h5>

<pre data-type="programlisting" data-code-language="php"><code class="k">namespace</code> <code class="nx">App\Command</code><code class="p">;</code>

<code class="k">use</code> <code class="nx">Symfony\Component\Console\Attribute\AsCommand</code><code class="p">;</code>
<code class="k">use</code> <code class="nx">Symfony\Component\Console\Command\Command</code><code class="p">;</code>
<code class="k">use</code> <code class="nx">Symfony\Component\Console\Input\InputArgument</code><code class="p">;</code>
<code class="k">use</code> <code class="nx">Symfony\Component\Console\Input\InputInterface</code><code class="p">;</code>
<code class="k">use</code> <code class="nx">Symfony\Component\Console\Output\OutputInterface</code><code class="p">;</code>

<code class="c1">#[AsCommand(name: 'app:hello-world')]</code>
<code class="k">class</code> <code class="nc">HelloWorldCommand</code> <code class="k">extends</code> <code class="nx">Command</code>
<code class="p">{</code>
    <code class="k">protected</code> <code class="k">static</code> <code class="nv">$defaultDescription</code> <code class="o">=</code> <code class="s1">'Greets the user.'</code><code class="p">;</code>

    <code class="c1">// ...</code>
    <code class="k">protected</code> <code class="k">function</code> <code class="nf">configure</code><code class="p">()</code><code class="o">:</code> <code class="nx">void</code>
    <code class="p">{</code>
        <code class="nv">$this</code>
            <code class="o">-&gt;</code><code class="na">setHelp</code><code class="p">(</code><code class="s1">'This command greets a user...'</code><code class="p">)</code>
            <code class="o">-&gt;</code><code class="na">addArgument</code><code class="p">(</code><code class="s1">'name'</code><code class="p">,</code> <code class="nx">InputArgument</code><code class="o">::</code><code class="na">REQUIRED</code><code class="p">,</code> <code class="s1">'User name'</code><code class="p">);</code>
    <code class="p">}</code>

    <code class="k">protected</code> <code class="k">function</code> <code class="nf">execute</code><code class="p">(</code><code class="nx">InputInterface</code> <code class="nv">$input</code><code class="p">,</code> <code class="nx">OutputInterface</code> <code class="nv">$output</code><code class="p">)</code><code class="o">:</code> <code class="nx">int</code>
    <code class="p">{</code>
        <code class="nv">$output</code><code class="o">-&gt;</code><code class="na">writeln</code><code class="p">(</code><code class="s2">"Hello, </code><code class="si">{</code><code class="nv">$input</code><code class="o">-&gt;</code><code class="na">getArgument</code><code class="p">(</code><code class="s1">'name'</code><code class="p">)</code><code class="si">}</code><code class="s2">"</code><code class="p">);</code>
        <code class="k">return</code> <code class="nx">Command</code><code class="o">::</code><code class="na">SUCCESS</code><code class="p">;</code>
    <code class="p">}</code>
<code class="p">}</code></pre></div>
<div id="actual_console_application" data-type="example">
<h5><span class="label">Example 18-5. </span>Creating the actual console application</h5>

<pre data-type="programlisting" data-code-language="php"><code class="c1">#!/usr/bin/env php</code>
<code class="o">&lt;?</code><code class="nx">php</code>
<code class="c1">// application.php</code>

<code class="k">require</code> <code class="vm">__DIR__</code><code class="o">.</code><code class="s1">'/vendor/autoload.php'</code><code class="p">;</code>

<code class="k">use</code> <code class="nx">Symfony\Component\Console\Application</code><code class="p">;</code>

<code class="nv">$application</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Application</code><code class="p">();</code>

<code class="nv">$application</code><code class="o">-&gt;</code><code class="na">add</code><code class="p">(</code><code class="k">new</code> <code class="nx">App\Command\HelloWorldCommand</code><code class="p">());</code>

<code class="nv">$application</code><code class="o">-&gt;</code><code class="na">run</code><code class="p">();</code></pre></div>

<p>Then run the command as follows:</p>

<pre data-type="programlisting" data-code-language="sh">%<code class="w"> </code>./application.php<code class="w"> </code>app:hello-world<code class="w"> </code>User<code class="w"></code></pre>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45875132900096">
<h2>Discussion</h2>

<p>The <a href="https://symfony.com">Symfony project</a> provides a robust collection of reusable components for PHP. It acts as a framework to simplify and greatly increase the speed of development for web applications as well. It’s remarkably well documented, powerful, and best of all, free and entirely open source.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The open source <a href="https://laravel.com">Laravel framework</a>, the data modules of which were covered in <a data-type="xref" href="ch16.html#recipe_eloquent_orm">Recipe 16.9</a>, is itself a meta package of individual Symfony components. Its own <a href="https://oreil.ly/uY4QL">Artisan console tool</a> is built atop the Symfony Console component. It provides rich command-line control over Laravel projects, their configuration, and even their runtime environments.</p>
</div>

<p>Like any other PHP extension, Symfony components are installed via Composer.<sup><a data-type="noteref" id="idm45875132854256-marker" href="ch18.html#idm45875132854256">1</a></sup> The Console component itself can be installed as follows:</p>

<pre data-type="programlisting" data-code-language="sh">%<code class="w"> </code>composer<code class="w"> </code>require<code class="w"> </code>symfony/console<code class="w"></code></pre>

<p>The preceding <code>require</code> command <a data-type="indexterm" data-primary="require command" id="idm45875132789248"></a><a data-type="indexterm" data-primary="commands, require" id="idm45875132834976"></a>will update your project’s <em>composer.json</em> file to include the Console component, and it also installs this component (and its dependencies) in your project’s <em>vendor/</em> directory.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>If your project is not already using Composer, installing any package will create a new <em>composer.json</em> file for you automatically. You should take time to update it to autoload any classes or files your project requires so everything works together seamlessly. For more on Composer, extensions, and autoloading, review <a data-type="xref" href="ch15.html#chapter_extensions">Chapter 15</a>.</p>
</div>

<p>Once you have the library installed, you can start leveraging it immediately. Business logic for various commands can live elsewhere within your application (e.g., behind a RESTful API) but can also be imported into and exposed via the command-line 
<span class="keep-together">interface</span>.</p>

<p>By default, every class that descends from <code>Command</code> gives you the ability to work with user-provided arguments and to display content back to the terminal. Options and arguments are created with the <code>addArgument()</code> and <code>addOption()</code> methods on the class and can be manipulated within its <code>configure()</code> method directly.</p>

<p>Output is highly flexible. You can print content directly <a data-type="indexterm" data-primary="ConsoleOutputInterface class" id="idm45875132825216"></a><a data-type="indexterm" data-primary="classes" data-secondary="ConsoleOutputInterface" id="idm45875132824544"></a>to the screen with any of the methods of the <code>ConsoleOutputInterface</code> class listed in <a data-type="xref" href="#symfony_output_methods">Table 18-3</a>.</p>
<table id="symfony_output_methods">
<caption><span class="label">Table 18-3. </span>Symfony console output methods</caption>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>writeln()</code></p></td>
<td><p>Writes a single line to the console. Equivalent to using <code>echo</code> on some text followed by an explicit <code>PHP_EOL</code> newline.</p></td>
</tr>
<tr>
<td><p><code>write()</code></p></td>
<td><p>Writes text to the console without appending a newline character.</p></td>
</tr>
<tr>
<td><p><code>section()</code></p></td>
<td><p>Creates a new output section that can be atomically controlled as if it were an independent output buffer.</p></td>
</tr>
<tr>
<td><p><code>overwrite()</code></p></td>
<td><p>Only valid on a section—overwrites content in a section with the given content.</p></td>
</tr>
<tr>
<td><p><code>clear()</code></p></td>
<td><p>Only valid on a section—clears all contents of a section.</p></td>
</tr>
</tbody>
</table>

<p>In addition to the text methods introduced in <a data-type="xref" href="#symfony_output_methods">Table 18-3</a>, Symfony Console empowers you to create <a data-type="indexterm" data-primary="tables, Symfony Console" id="idm45875132696976"></a>dynamic tables in the terminal. Every <code>Table</code> instance is bound to an output interface and can have as many rows, columns, and separators as you need. <a data-type="xref" href="#console_table_rendering">Example 18-6</a> demonstrates how a simple table can be built and populated with content from an array before itself being rendered to the console.</p>
<div id="console_table_rendering" data-type="example">
<h5><span class="label">Example 18-6. </span>Rendering tables in the console with Symfony</h5>

<pre data-type="programlisting" data-code-language="php"><code class="c1">// ...</code>

<code class="c1">#[AsCommand(name: 'app:book')]</code>
<code class="k">class</code> <code class="nc">BookCommand</code> <code class="k">extends</code> <code class="nx">Command</code>
<code class="p">{</code>
    <code class="k">public</code> <code class="k">function</code> <code class="nf">execute</code><code class="p">(</code><code class="nx">InputInterface</code> <code class="nv">$input</code><code class="p">,</code> <code class="nx">OutputInterface</code> <code class="nv">$output</code><code class="p">)</code><code class="o">:</code> <code class="nx">int</code>
    <code class="p">{</code>
        <code class="nv">$table</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Table</code><code class="p">(</code><code class="nv">$output</code><code class="p">);</code>
        <code class="nv">$table</code>
            <code class="o">-&gt;</code><code class="na">setHeaders</code><code class="p">([</code><code class="s1">'ISBN'</code><code class="p">,</code> <code class="s1">'Title'</code><code class="p">,</code> <code class="s1">'Author'</code><code class="p">])</code>
            <code class="o">-&gt;</code><code class="na">setRows</code><code class="p">([</code>
                <code class="p">[</code>
                    <code class="s1">'978-1-940111-61-2'</code><code class="p">,</code>
                    <code class="s1">'Security Principles for PHP Applications'</code><code class="p">,</code>
                    <code class="s1">'Eric Mann'</code>
                <code class="p">],</code>
                <code class="p">[</code><code class="s1">'978-1-098-12132-7'</code><code class="p">,</code> <code class="s1">'PHP Cookbook'</code><code class="p">,</code> <code class="s1">'Eric Mann'</code><code class="p">],</code>
            <code class="p">])</code>
        <code class="p">;</code>
        <code class="nv">$table</code><code class="o">-&gt;</code><code class="na">render</code><code class="p">();</code>

        <code class="k">return</code> <code class="nx">Command</code><code class="o">::</code><code class="na">SUCCESS</code><code class="p">;</code>
    <code class="p">}</code>
<code class="p">}</code></pre></div>

<p>Symfony Console automatically parses the content passed into a <code>Table</code> object and renders the table for you complete with grid lines. The preceding command produces the following output in the console:</p>

<pre data-type="programlisting" data-code-language="sh">+-------------------+------------------------------------------+-----------+<code class="w"></code>
<code class="p">|</code><code class="w"> </code>ISBN<code class="w">              </code><code class="p">|</code><code class="w"> </code>Title<code class="w">                                    </code><code class="p">|</code><code class="w"> </code>Author<code class="w">    </code><code class="p">|</code><code class="w"></code>
+-------------------+------------------------------------------+-----------+<code class="w"></code>
<code class="p">|</code><code class="w"> </code><code class="m">978</code>-1-940111-61-2<code class="w"> </code><code class="p">|</code><code class="w"> </code>Security<code class="w"> </code>Principles<code class="w"> </code><code class="k">for</code><code class="w"> </code>PHP<code class="w"> </code>Applications<code class="w"> </code><code class="p">|</code><code class="w"> </code>Eric<code class="w"> </code>Mann<code class="w"> </code><code class="p">|</code><code class="w"></code>
<code class="p">|</code><code class="w"> </code><code class="m">978</code>-1-098-12132-7<code class="w"> </code><code class="p">|</code><code class="w"> </code>PHP<code class="w"> </code>Cookbook<code class="w">                             </code><code class="p">|</code><code class="w"> </code>Eric<code class="w"> </code>Mann<code class="w"> </code><code class="p">|</code><code class="w"></code>
+-------------------+------------------------------------------+-----------+<code class="w"></code></pre>

<p>Further modules within the component aid in the control and rendering of dynamic <a href="https://oreil.ly/TszPm">progress bars</a> and interactive <a href="https://oreil.ly/8i5Hx">user prompts and questions</a>.</p>

<p>The Console component even <a href="https://oreil.ly/arrtr">aids in coloring terminal output directly</a>. Unlike the complicated ANSI escape sequences discussed in <a data-type="xref" href="#recipe_colorized_console">Recipe 18.3</a>, Console allows you to use named tags and styles directly to control content.</p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>At the time of this writing, the Console component disables output coloring on Windows systems by default. There are various, free terminal applications (like <a href="https://oreil.ly/gs5e6">Cmder</a>) available for Windows as alternatives to the standard terminal that do support output coloring.</p>
</div>

<p>The terminal is an incredibly powerful interface for your users. Symfony Console makes it easy to target this interface within your application without resorting to hand-parsing arguments or <a data-type="indexterm" data-primary="command line" data-secondary="application creation, Symfony Console and" data-startref="cmlnppcsyfy" id="idm45875132580096"></a><a data-type="indexterm" data-primary="Symfony Console component" data-startref="symfycsp" id="idm45875132578880"></a>manually crafting rich output.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45875132577584">
<h2>See Also</h2>

<p>Full documentation of <a href="https://oreil.ly/vm8Qx">Symfony’s Console component</a>.</p>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="18.5 Using PHP’s Native Read-Eval-Print-Loop"><div class="sect1" id="recipe_php_repl">
<h1>18.5 Using PHP’s Native Read-Eval-Print-Loop</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45875132559808">
<h2>Problem</h2>

<p>You want to test some PHP logic <a data-type="indexterm" data-primary="interactive shell" id="ttvshll"></a><a data-type="indexterm" data-primary="REPL (read-eval-print-loop)" id="rdvlprp"></a>without creating a full application to house it.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45875132556112">
<h2>Solution</h2>

<p>Leverage PHP’s interactive shell as follows:</p>

<pre data-type="programlisting" data-code-language="sh">%<code class="w"> </code>php<code class="w"> </code>-a<code class="w"></code></pre>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45875132514000">
<h2>Discussion</h2>

<p>The PHP interactive shell provides a read-eval-print loop (REPL) that effectively tests single statements in PHP and, where possible, prints directly to the terminal. Within the shell, you can define functions and classes or even directly execute imperative code without creating a script file on disk.</p>

<p>This shell is an efficient way to test a particular line of code or piece of logic outside the context of a full application.</p>

<p>The interactive shell also enables full tab-completion for all PHP functions or variables as well as any functions or variables that you have defined while the shell session is running. Merely type the first few characters of an otherwise long name, press Tab, and the shell will automatically complete the name for you. If there are multiple possible completions, press the Tab key twice to see a list of all possibilities.</p>

<p>You can control two particular settings for the shell in your <em>php.ini</em> configuration file: <code>cli.pager</code> allows for an <a data-type="indexterm" data-primary="cli.pager" id="idm45875132550800"></a><a data-type="indexterm" data-primary="cli.prompt" id="idm45875132550064"></a>external program to handle output rather than displaying directly to the console, and <code>cli.prompt</code> allows you to control the default <code>php &gt;</code> prompt.</p>

<p>For example, you can replace the prompt itself by passing an arbitrary string to <code>#cli.prompt</code> within the shell session as follows:</p>

<pre data-type="programlisting" data-code-language="sh"><code>%</code><code class="w"> </code><code>php</code><code class="w"> </code><code>-a</code><code class="w"> </code><a class="co" id="co_php_command_line_CO2-1" href="#callout_php_command_line_CO2-1"><img src="assets/1.png" alt="1" width="12" height="12"/></a><code class="w">

</code><code>php</code><code class="w"> </code><code>&gt;</code><code class="w"> </code><code class="c1">#cli.prompt=repl ~&gt; </code><a class="co" id="co_php_command_line_CO2-2" href="#callout_php_command_line_CO2-2"><img src="assets/2.png" alt="2" width="12" height="12"/></a><code class="c1">
</code><code>repl</code><code class="w"> </code><code>~&gt;</code><code class="w"> </code><a class="co" id="co_php_command_line_CO2-3" href="#callout_php_command_line_CO2-3"><img src="assets/3.png" alt="3" width="12" height="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_php_command_line_CO2-1" href="#co_php_command_line_CO2-1"><img src="assets/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>The initial invocation of PHP launches the interactive shell.</p></dd>
<dt><a class="co" id="callout_php_command_line_CO2-2" href="#co_php_command_line_CO2-2"><img src="assets/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Setting the <code>cli.prompt</code> configuration directly will override the default until this session closes.</p></dd>
<dt><a class="co" id="callout_php_command_line_CO2-3" href="#co_php_command_line_CO2-3"><img src="assets/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Once you’ve overridden the default prompt, you will see your new version until you exit.</p></dd>
</dl>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>Backticks can be used to execute <a data-type="indexterm" data-primary="backticks" id="idm45875132406256"></a>arbitrary PHP code within the prompt itself. <a href="https://oreil.ly/o6NU6">Some examples in the PHP documentation</a> use this method to prepend the current time to the prompt. However, this might not work consistently between systems and could introduce unnecessary instability when executing your PHP code.</p>
</div>

<p>You can even colorize your output by <a data-type="indexterm" data-primary="output, colorizing" id="idm45875132404272"></a>using the ANSI escape sequences defined in <a data-type="xref" href="#ansi_color_codes">Table 18-2</a>. This presents a more pleasant interface in many situations and empowers you to provide additional information if desired. The CLI prompt itself introduces four additional escape sequences, as defined in <a data-type="xref" href="#cli_escape_sequences">Table 18-4</a>.</p>
<table id="cli_escape_sequences">
<caption><span class="label">Table 18-4. </span>CLI prompt escape sequences</caption>
<thead>
<tr>
<th>Sequence</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>\e</code></p></td>
<td><p>Adds colors to the prompt by using the ANSI codes introduced in <a data-type="xref" href="#recipe_colorized_console">Recipe 18.3</a>.</p></td>
</tr>
<tr>
<td><p><code>\v</code></p></td>
<td><p>Prints the PHP version.</p></td>
</tr>
<tr>
<td><p><code>\b</code></p></td>
<td><p>Indicates which logical block contains the interpreter. By default, this will be <code>php</code> but could be <code>/*</code> to represent a multiline comment.</p></td>
</tr>
<tr>
<td><p><code>\&gt;</code></p></td>
<td><p>Represents the prompt character, which is <code>&gt;</code> by default. When the interpreter is inside another unterminated block or string, this will change to indicate where the shell is. Possible characters are <code>' " { ( &gt;</code>.</p></td>
</tr>
</tbody>
</table>

<p>By using both ANSI escape sequences to define colors and the special sequences defined for the prompt itself, you can define a prompt that exposes the version of PHP and the location of the interpreter and that uses a friendly foreground color as follows:</p>

<pre data-type="programlisting" data-code-language="sh">php<code class="w"> </code>&gt;<code class="w"> </code><code class="c1">#cli.prompt=\e[032m\v \e[031m\b \e[34m\&gt; \e[0m</code></pre>

<p>The preceding setting results in the display in <a data-type="xref" href="#colorized_php_output">Figure 18-1</a>.</p>

<figure><div id="colorized_php_output" class="figure">
<img src="assets/phpc_1801.png" alt="The PHP console updated with colorization" width="556" height="146"/>
<h6><span class="label">Figure 18-1. </span>The PHP console updated with colorization</h6>
</div></figure>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>Not every console will support colorization via ANSI control sequences. If this is a pattern you intend to use, take care to test your sequences thoroughly prior to asking anyone else to use the <a data-type="indexterm" data-primary="interactive shell" data-startref="ttvshll" id="idm45875132348832"></a><a data-type="indexterm" data-primary="REPL (read-eval-print-loop)" data-startref="rdvlprp" id="idm45875132384928"></a>system. While a properly rendered console is attractive and easy to use, unrendered escape sequences can make a console nearly impossible to work with.</p>
</div>
</div></section>








<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45875132513408">
<h2>See Also</h2>

<p>Documentation on <a href="https://oreil.ly/HrCV-">PHP’s interactive command shell</a>.</p>
</div></section>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="idm45875132854256"><sup><a href="ch18.html#idm45875132854256-marker">1</a></sup> For more on Composer, review <a data-type="xref" href="ch15.html#installing_composer_packages">Recipe 15.3</a>.</p></div></div></section></div>
</div>
</body>
</html>