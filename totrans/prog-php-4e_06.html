<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 5. Arrays"><div class="chapter" id="array">
<h1><span class="label">Chapter 5. </span>Arrays</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" id="ix_arrays_ch5"/>As we discussed in <a data-type="xref" href="ch02.xhtml#language_basics">Chapter 2</a>, PHP supports both scalar and compound data types. In this chapter, we’ll discuss one of the compound types: arrays. An <em>array</em> is a collection of data values organized as an ordered collection of key-value pairs. It may help to think of an array, in loose terms, like an egg carton. Each compartment of an egg carton can hold an egg, but it travels around as one overall container. And, just as an egg carton doesn’t have to contain only eggs (you can put anything in there, like rocks, snowballs, four-leaf clovers, or nuts and bolts), so too an array is not limited to one type of data. It can hold strings, integers, Booleans, and so on. Plus, array compartments can also contain other arrays—but more on that later.</p>
<p>This chapter talks about creating an array, adding and removing elements from an array, and looping over the contents of an array. Because arrays are very common and useful, there are many built-in functions that work with them in PHP. For example, if you want to send email to more than one email address, you’ll store the email addresses in an array and then loop through the array, sending the message to the current email address. Also, if you have a form that permits multiple selections, the items the user selected are returned in an array.</p>
<section data-type="sect1" data-pdf-bookmark="Indexed Versus Associative Arrays"><div class="sect1" id="indexed_versus_associative_arrays">
<h1>Indexed Versus Associative Arrays</h1>
<p>There are two kinds of arrays in PHP: indexed and associative. The keys of an <a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="indexed arrays" id="idm45922782391448"/><a contenteditable="false" data-type="indexterm" data-primary="indexed arrays" id="idm45922782390072"/><em>indexed</em> array are integers, beginning at 0. Indexed arrays are used when you identify things by their position. <a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="associative arrays" id="idm45922782388424"/><a contenteditable="false" data-type="indexterm" data-primary="associative arrays" id="idm45922782387048"/><em>Associative</em> arrays have strings as keys and behave more like two-column tables. The first column is the key, which is used to access the value.</p>
<p>PHP internally stores all arrays as associative arrays; the only difference between associative and indexed arrays is what the keys happen to be. Some array features are provided mainly for use with indexed arrays because they assume that you have or want keys that are consecutive integers beginning at 0. In both cases, the keys are unique. In other words, you can’t have two elements with the same key, regardless of whether the key is a string or an integer.</p>
<p>PHP arrays have an internal order to their elements that is independent of the keys and values, and there are functions that you can use to traverse the arrays based on this internal order. The order is normally that in which values were inserted into the array, but the sorting functions described later in this chapter let you change the order to one based on keys, values, or anything else you choose.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Identifying Elements of an Array"><div class="sect1" id="identifying_elements_of_an_array">
<h1>Identifying Elements of an Array</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="identifying elements of" id="idm45922782381672"/>Before we look at creating an array, let’s look at the structure of an existing array. You can access specific values from an existing array using the array variable’s name, followed by the element’s <a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="keys of" id="idm45922782379944"/>key, or <em>index</em>, within <a contenteditable="false" data-type="indexterm" data-primary="[…] (square brackets)" data-secondary="enclosing array keys" id="idm45922782377992"/><a contenteditable="false" data-type="indexterm" data-primary="square brackets ([…])" data-secondary="enclosing array keys" id="idm45922782376584"/>square brackets:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$age</code><code class="p">[</code><code class="s1">'fred'</code><code class="p">]</code>
<code class="nv">$shows</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code></pre>
<p>The key can be either a string or an integer. String values that are equivalent to integer numbers (without leading zeros) are treated as integers. Thus, <code>$array[3]</code> and <code>$array['3']</code> reference the same element, but <code>$array['03']</code> references a different element. Negative numbers are valid keys, but they don’t specify positions from the end of the array as they do in Perl.</p>
<p>You don’t have to <a contenteditable="false" data-type="indexterm" data-primary="‘…’ (single quotes)" data-secondary="enclosing array keys" id="idm45922782366152"/><a contenteditable="false" data-type="indexterm" data-primary="single quotes (‘…’)" data-secondary="enclosing array keys" id="idm45922782364776"/>quote single-word strings. For instance, <code>$age['fred']</code> is the same as <code>$age[fred]</code>. However, it’s considered good PHP style to always use <a contenteditable="false" data-type="indexterm" data-primary="double quotes (“…”)" data-secondary="enclosing array keys" id="idm45922782305592"/><a contenteditable="false" data-type="indexterm" data-primary="“…” (double quotes)" data-secondary="enclosing array keys" id="idm45922782304248"/>quotes, because quoteless keys are indistinguishable from constants. When you use a constant as an unquoted index, PHP uses the value of the constant as the index and emits a warning. This will throw an error in future versions of PHP:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code><code> </code><code class="o">=</code><code> </code><strong><code class="k">array</code></strong><code class="p">(</code><code class="s2">"</code><code class="s2">name</code><code class="s2">"</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s1">'Peter'</code><code class="p">);</code><code>
</code><em><code class="k">print</code></em><code> </code><code class="s2">"</code><code class="s2">Hello, </code><code class="si">{</code><code class="nv">$person</code><code class="p">[</code><code class="nx">name</code><code class="p">]</code><code class="si">}</code><code class="s2">"</code><code class="p">;</code><code>
</code><em><code class="c1">// output: Hello, Peter</code></em><code class="c1">
</code><em><code class="c1">// this 'works' but emits this warning as well:
</code></em><strong><code class="nx">Warning</code><code class="o">:</code></strong><code> </code><code class="k">Use</code><code> </code><code class="nx">of</code><code> </code><code class="nx">undefined</code><code> </code><code class="nb">constant</code><code> </code><code class="nx">name</code><code> </code><code class="o">-</code><code> </code><code class="nx">assumed</code><code> </code><code class="s1">'name'</code><code> </code><code class="p">(</code><code class="k">this</code><code> </code><code class="nx">will</code><code> </code><code class="k">throw</code><code> </code><code class="nx">an</code><code> 
</code><code class="nx">Error</code><code> </code><code class="nx">in</code><code> </code><code class="nx">a</code><code> </code><code class="nx">future</code><code> </code><code class="nx">version</code><code> </code><code class="nx">of</code><code> </code><code class="nx">PHP</code><code class="p">)</code><code>
</code></pre>
<p>You must use quotes if you’re using interpolation to build the array index:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code><code> </code><code class="o">=</code><code> </code><strong><code class="k">array</code></strong><code class="p">(</code><code class="s2">"</code><code class="s2">name</code><code class="s2">"</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s1">'Peter'</code><code class="p">);</code><code>
</code><em><code class="k">print</code></em><code> </code><code class="s2">"</code><code class="s2">Hello, </code><code class="si">{</code><code class="nv">$person</code><code class="p">[</code><code class="s2">"</code><code class="s2">name</code><code class="s2">"</code><code class="p">]</code><code class="si">}</code><code class="s2">"</code><code class="p">;</code><em><code class="c1">// output: Hello, Peter (with no warning)</code></em></pre>
<p>Although it’s technically optional, you should also quote the key if you’re interpolating an array lookup to ensure that you get the value you expect. Consider this <span class="keep-together">example:</span></p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">define</code><code class="p">(</code><code class="s1">'NAME'</code><code class="p">,</code><code> </code><code class="s1">'bob'</code><code class="p">);</code><code>
</code><code class="nv">$person</code><code> </code><code class="o">=</code><code> </code><strong><code class="k">array</code></strong><code class="p">(</code><code class="s2">"</code><code class="s2">name</code><code class="s2">"</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s1">'Peter'</code><code class="p">);</code><code>
</code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2">Hello, </code><code class="si">{</code><code class="nv">$person</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]</code><code class="si">}</code><code class="s2">"</code><code class="p">;</code><code>
</code><strong><code class="k">echo</code></strong><code> </code><code class="s2">"</code><code class="s2">&lt;br/&gt;</code><code class="s2">"</code><code> </code><code class="p">;</code><code>
</code><strong><code class="k">echo</code></strong><code> </code><code class="s2">"</code><code class="s2">Hello, NAME</code><code class="s2">"</code><code class="p">;</code><code>
</code><strong><code class="k">echo</code></strong><code> </code><code class="s2">"</code><code class="s2">&lt;br/&gt;</code><code class="s2">"</code><code> </code><code class="p">;</code><code>
</code><strong><code class="k">echo</code></strong><code> </code><code class="nx">NAME</code><code> </code><code class="p">;</code><code>
</code><code class="c1">// output:
</code><code class="nx">Hello</code><code class="p">,</code><code> </code><code class="nx">Peter</code><code>
</code><code class="nx">Hello</code><code class="p">,</code><code> </code><code class="nx">NAME</code><code>
</code><code class="nx">bob</code></pre>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Storing Data in Arrays"><div class="sect1" id="storing_data_in_arrays">
<h1>Storing Data in Arrays</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="creating" id="ix_arrays_creating_ch5"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="storing data in" id="ix_arrays_stor_data"/>Storing a value in an array will create the array if it doesn’t already exist, but trying to retrieve a value from an array that hasn’t been defined won’t create the array. For example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="c1">// $addresses not defined before this point</code>
<code class="k">echo</code> <code class="nv">$addresses</code><code class="p">[</code><code class="mi">0</code><code class="p">];</code> <code class="c1">// prints nothing</code>
<code class="k">echo</code> <code class="nv">$addresses</code><code class="p">;</code> <code class="c1">// prints nothing</code>

<code class="nv">$addresses</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="s2">"spam@cyberpromo.net"</code><code class="p">;</code>
<code class="k">echo</code> <code class="nv">$addresses</code><code class="p">;</code> <code class="c1">// prints "Array"</code></pre>
<p>Using simple assignment to initialize an array in your program can lead to code like this:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addresses</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="s2">"spam@cyberpromo.net"</code><code class="p">;</code>
<code class="nv">$addresses</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="s2">"abuse@example.com"</code><code class="p">;</code>
<code class="nv">$addresses</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code> <code class="o">=</code> <code class="s2">"root@example.com"</code><code class="p">;</code></pre>
<p>That’s an indexed array, with integer indices beginning at 0. Here’s an associative array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$price</code><code class="p">[</code><code class="s1">'gasket'</code><code class="p">]</code> <code class="o">=</code> <code class="mf">15.29</code><code class="p">;</code>
<code class="nv">$price</code><code class="p">[</code><code class="s1">'wheel'</code><code class="p">]</code> <code class="o">=</code> <code class="mf">75.25</code><code class="p">;</code>
<code class="nv">$price</code><code class="p">[</code><code class="s1">'tire'</code><code class="p">]</code> <code class="o">=</code> <code class="mf">50.00</code><code class="p">;</code></pre>
<p>An easier way to initialize an array is to use the <a contenteditable="false" data-type="indexterm" data-primary="array() construct" id="idm45922782023048"/><code>array()</code> construct, which builds an array from its arguments. This builds an indexed array, and the index values (starting at 0) are created automatically:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addresses</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"spam@cyberpromo.net"</code><code class="p">,</code> <code class="s2">"abuse@example.com"</code><code class="p">,</code> 
<code class="s2">"root@example.com"</code><code class="p">);</code></pre>
<p>To create an associative array with <code>array()</code>, use the <a contenteditable="false" data-type="indexterm" data-primary="=&gt; (equals sign, right angle bracket), in array() construct" id="idm45922781974760"/><a contenteditable="false" data-type="indexterm" data-primary="equals sign, right angle bracket (=&gt;), in array() construct" id="idm45922781973720"/><code>=&gt;</code> symbol to separate indices (keys) from values:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$price</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code>
 <code class="s1">'gasket'</code> <code class="o">=&gt;</code> <code class="mf">15.29</code><code class="p">,</code>
 <code class="s1">'wheel'</code> <code class="o">=&gt;</code> <code class="mf">75.25</code><code class="p">,</code>
 <code class="s1">'tire'</code> <code class="o">=&gt;</code> <code class="mf">50.00</code>
<code class="p">);</code></pre>
<p>Notice the use of whitespace and alignment. We could have bunched up the code, but it wouldn’t have been as easy to read (this is equivalent to the previous code sample), or as easy to add or remove values:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$price</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'gasket'</code> <code class="o">=&gt;</code> <code class="mf">15.29</code><code class="p">,</code> <code class="s1">'wheel'</code> <code class="o">=&gt;</code> <code class="mf">75.25</code><code class="p">,</code> <code class="s1">'tire'</code> <code class="o">=&gt;</code> <code class="mf">50.00</code><code class="p">);</code></pre>
<p>You can also specify an array using a shorter, alternate syntax:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$price</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'gasket'</code> <code class="o">=&gt;</code> <code class="mf">15.29</code><code class="p">,</code> <code class="s1">'wheel'</code> <code class="o">=&gt;</code> <code class="mf">75.25</code><code class="p">,</code> <code class="s1">'tire'</code> <code class="o">=&gt;</code> <code class="mf">50.0</code><code class="p">];</code></pre>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="empty" id="idm45922781880792"/>To construct an empty array, pass no arguments to <code>array()</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addresses</code> <code class="o">=</code> <code class="k">array</code><code class="p">();</code></pre>
<p>You can specify an initial key with <code>=&gt;</code> and then a list of values. The values are inserted into the array starting with that key, with subsequent values having sequential keys:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$days</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">1</code> <code class="o">=&gt;</code> <code class="s2">"Mon"</code><code class="p">,</code> <code class="s2">"Tue"</code><code class="p">,</code> <code class="s2">"Wed"</code><code class="p">,</code> <code class="s2">"Thu"</code><code class="p">,</code> <code class="s2">"Fri"</code><code class="p">,</code> <code class="s2">"Sat"</code><code class="p">,</code> <code class="s2">"Sun"</code><code class="p">);</code>
<code class="c1">// 2 is Tue, 3 is Wed, etc.</code></pre>
<p>If the initial index is a non-numeric string, subsequent indices are integers beginning at 0. Thus, the following code is probably a mistake:<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_stor_data" id="idm45922781817080"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_creating_ch5" id="idm45922781815864"/></p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$whoops</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'Fri'</code> <code class="o">=&gt;</code> <code class="s2">"Black"</code><code class="p">,</code> <code class="s2">"Brown"</code><code class="p">,</code> <code class="s2">"Green"</code><code class="p">);</code>

<code class="c1">// same as</code>
<code class="nv">$whoops</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'Fri'</code> <code class="o">=&gt;</code> <code class="s2">"Black"</code><code class="p">,</code> <code class="mi">0</code> <code class="o">=&gt;</code> <code class="s2">"Brown"</code><code class="p">,</code> <code class="mi">1</code> <code class="o">=&gt;</code> <code class="s2">"Green"</code><code class="p">);</code></pre>
<section data-type="sect2" data-pdf-bookmark="Appending Values to an Array"><div class="sect2" id="appending_values_to_an_array">
<h2>Appending Values to an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="appending values to" id="idm45922781755336"/>To add more values to the end of an existing indexed array, use the <a contenteditable="false" data-type="indexterm" data-primary="[…] (square brackets)" data-secondary="appending array values using" id="idm45922781753864"/><a contenteditable="false" data-type="indexterm" data-primary="square brackets ([…])" data-secondary="appending array values using" id="idm45922781752520"/><code>[]</code> syntax:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$family</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Fred"</code><code class="p">,</code> <code class="s2">"Wilma"</code><code class="p">);</code>
<code class="nv">$family</code><code class="p">[]</code> <code class="o">=</code> <code class="s2">"Pebbles"</code><code class="p">;</code> <code class="c1">// $family[2] is "Pebbles"</code></pre>
<p>This construct assumes the array’s indices are numbers and assigns elements into the next available numeric index, starting from 0. Attempting to append to an associative array without appropriate keys is almost always a programmer mistake, but PHP will give the new elements numeric indices without issuing a warning:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Fred"</code><code class="p">);</code>
<code class="nv">$person</code><code class="p">[]</code> <code class="o">=</code> <code class="s2">"Wilma"</code><code class="p">;</code> <code class="c1">// $person[0] is now "Wilma"</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Assigning a Range of Values"><div class="sect2" id="assigning_a_range_of_values">
<h2>Assigning a Range of Values</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="assigning a range of values to" id="idm45922781640744"/>The <a contenteditable="false" data-type="indexterm" data-primary="range function" id="idm45922781639304"/><code>range()</code> function creates an array of consecutive integer or character values between and including the two values you pass to it as arguments. For example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$numbers</code> <code class="o">=</code> <code class="nb">range</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">5</code><code class="p">);</code> <code class="c1">// $numbers = array(2, 3, 4, 5);</code>
<code class="nv">$letters</code> <code class="o">=</code> <code class="nb">range</code><code class="p">(</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'z'</code><code class="p">);</code> <code class="c1">// $letters holds the alphabet</code>
<code class="nv">$reversedNumbers</code> <code class="o">=</code> <code class="nb">range</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code> <code class="c1">// $reversedNumbers = array(5, 4, 3, 2);</code></pre>
<p>Only the first letter of a string argument is used to build the range:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">range</code><code class="p">(</code><code class="s2">"aaa"</code><code class="p">,</code> <code class="s2">"zzz"</code><code class="p">);</code> <code class="c1">// same as range('a','z')</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Getting the Size of an Array"><div class="sect2" id="getting_the_size_of_an_array">
<h2>Getting the Size of an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="size of, determining" id="idm45922781499544"/>The <a contenteditable="false" data-type="indexterm" data-primary="count function" id="idm45922781498072"/><code>count()</code> and <a contenteditable="false" data-type="indexterm" data-primary="sizeof function" id="idm45922781565160"/><code>sizeof()</code> functions are identical in use and effect. They return the number of elements in the array. There is no stylistic preference about which function you use. Here’s an example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$family</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Fred"</code><code class="p">,</code> <code class="s2">"Wilma"</code><code class="p">,</code> <code class="s2">"Pebbles"</code><code class="p">);</code>
<code class="nv">$size</code> <code class="o">=</code> <code class="nb">count</code><code class="p">(</code><code class="nv">$family</code><code class="p">);</code> <code class="c1">// $size is 3</code></pre>
<p>This function counts only array values that are actually set:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$confusion</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code> <code class="mi">10</code> <code class="o">=&gt;</code> <code class="s2">"ten"</code><code class="p">,</code> <code class="mi">11</code> <code class="o">=&gt;</code> <code class="s2">"eleven"</code><code class="p">,</code> <code class="mi">12</code> <code class="o">=&gt;</code> <code class="s2">"twelve"</code><code class="p">);</code>
<code class="nv">$size</code> <code class="o">=</code> <code class="nb">count</code><code class="p">(</code><code class="nv">$confusion</code><code class="p">);</code> <code class="c1">// $size is 3</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Padding an Array"><div class="sect2" id="padding_an_array">
<h2>Padding an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="padding with identical values" id="idm45922781379000"/>To create an array with values initialized to the same content, use <a contenteditable="false" data-type="indexterm" data-primary="array_pad function" id="idm45922781377528"/><code>array_pad()</code>. The first argument to <code>array_pad()</code> is the array, the second argument is the minimum number of elements you want the array to have, and the third argument is the value to give any elements that are created. The <code>array_pad()</code> function returns a new padded array, leaving its argument (source) array alone.</p>
<p>Here’s <code>array_pad()</code> in action:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$scores</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">10</code><code class="p">);</code>
<code class="nv">$padded</code> <code class="o">=</code> <code class="nb">array_pad</code><code class="p">(</code><code class="nv">$scores</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">0</code><code class="p">);</code> <code class="c1">// $padded is now array(5, 10, 0, 0, 0)</code></pre>
<p>Notice how the new values are appended to the array. If you want the new values added to the start of the array, use a negative second argument:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$padded</code> <code class="o">=</code> <code class="nb">array_pad</code><code class="p">(</code><code class="nv">$scores</code><code class="p">,</code> <code class="nx">−5</code><code class="p">,</code> <code class="mi">0</code><code class="p">);</code> <code class="c1">// $padded is now array(0, 0, 0, 5, 10);</code></pre>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="keys of" id="idm45922781351416"/>If you pad an associative array, existing keys will be preserved. New elements will have numeric keys starting at 0.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_stor_data" id="idm45922781349912"/></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Multidimensional Arrays"><div class="sect1" id="multidimensional_arrays">
<h1>Multidimensional Arrays</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="multidimensional arrays" id="idm45922781362520"/><a contenteditable="false" data-type="indexterm" data-primary="multidimensional arrays" id="idm45922781361144"/>The values in an array can themselves be arrays. This lets you easily create multidimensional arrays:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$row0</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">);</code>
<code class="nv">$row1</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">);</code>
<code class="nv">$row2</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">);</code>
<code class="nv">$multi</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="nv">$row0</code><code class="p">,</code> <code class="nv">$row1</code><code class="p">,</code> <code class="nv">$row2</code><code class="p">);</code></pre>
<p>You can refer to elements of multidimensional arrays by appending more square brackets, <code>[]</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$value</code> <code class="o">=</code> <code class="nv">$multi</code><code class="p">[</code><code class="mi">2</code><code class="p">][</code><code class="mi">0</code><code class="p">];</code> <code class="c1">// row 2, column 0. $value = 7</code></pre>
<p>To interpolate a lookup of a multidimensional array, you must enclose the entire array lookup in <a contenteditable="false" data-type="indexterm" data-primary="{…} (curly braces)" data-secondary="enclosing multidimensional arrays" id="idm45922781270040"/><a contenteditable="false" data-type="indexterm" data-primary="curly braces {…}" data-secondary="enclosing multidimensional arrays" id="idm45922781267528"/>curly braces:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">echo</code><code class="p">(</code><code class="s2">"The value at row 2, column 0 is </code><code class="si">{</code><code class="nv">$multi</code><code class="p">[</code><code class="mi">2</code><code class="p">][</code><code class="mi">0</code><code class="p">]</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">);</code></pre>
<p>Failing to use the curly braces results in output like this:</p>
<pre data-type="programlisting" data-code-language="php"><strong><code class="nx">The</code><code> </code><code class="nx">value</code><code> </code><code class="nx">at</code><code> </code><code class="nx">row</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="nx">column</code><code> </code><code class="mi">0</code><code> </code><code class="nx">is</code><code> </code><code class="k">Array</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code></strong></pre>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Extracting Multiple Values"><div class="sect1" id="extracting_multiple_values">
<h1>Extracting Multiple Values</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="values of" id="ix_arrays_values_extract"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="multiple values of, extracting" id="ix_arrays_multi_values"/>To copy all of an array’s values into variables, use the <a contenteditable="false" data-type="indexterm" data-primary="list function" id="idm45922781143240"/><code>list()</code> construct:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">list</code><code> </code><code class="p">(</code><em><code class="nv">$variable</code><code class="p">,</code><code> </code><code class="o">...</code></em><code class="p">)</code><code> </code><code class="o">=</code><code> </code><em><code class="nv">$array</code></em><code class="p">;</code></pre>
<p>The array’s values are copied into the listed variables in the array’s internal order. By default that’s the order in which they were inserted, but the sort functions described later let you change that. Here’s an example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Fred"</code><code class="p">,</code> <code class="mi">35</code><code class="p">,</code> <code class="s2">"Betty"</code><code class="p">);</code>
<code class="k">list</code><code class="p">(</code><code class="nv">$name</code><code class="p">,</code> <code class="nv">$age</code><code class="p">,</code> <code class="nv">$wife</code><code class="p">)</code> <code class="o">=</code> <code class="nv">$person</code><code class="p">;</code>
<code class="c1">// $name is "Fred", $age is 35, $wife is "Betty"</code></pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The use of the <code>list()</code> function is a common practice for picking up values from a database selection where only one row is returned. This automatically loads the data from the simple query into a series of local variables. Here is an example of selecting two opposing teams from a sports scheduling database:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$sql</code> <code class="o">=</code> <code class="s2">"SELECT HomeTeam, AwayTeam FROM schedule WHERE </code>
<code class="s2">Ident = 7"</code><code class="p">;</code>
<code class="nv">$result</code> <code class="o">=</code> <code class="nb">mysql_query</code><code class="p">(</code><code class="nv">$sql</code><code class="p">);</code>
<code class="k">list</code><code class="p">(</code><code class="nv">$hometeam</code><code class="p">,</code> <code class="nv">$awayteam</code><code class="p">)</code> <code class="o">=</code> <code class="nb">mysql_fetch_assoc</code><code class="p">(</code><code class="nv">$result</code><code class="p">);</code></pre>
<p>There is more coverage on databases in <a data-type="xref" href="ch09.xhtml#databases-id00007">Chapter 9</a>.</p>
</div>
<p>If you have more values in the array than in the <code>list()</code>, the extra values are ignored:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Fred"</code><code class="p">,</code> <code class="mi">35</code><code class="p">,</code> <code class="s2">"Betty"</code><code class="p">);</code>
<code class="k">list</code><code class="p">(</code><code class="nv">$name</code><code class="p">,</code> <code class="nv">$age</code><code class="p">)</code> <code class="o">=</code> <code class="nv">$person</code><code class="p">;</code> <code class="c1">// $name is "Fred", $age is 35</code></pre>
<p>If you have more values in the <code>list()</code> than in the array, the extra values are set to <code>NULL</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$values</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"hello"</code><code class="p">,</code> <code class="s2">"world"</code><code class="p">);</code>
<code class="k">list</code><code class="p">(</code><code class="nv">$a</code><code class="p">,</code> <code class="nv">$b</code><code class="p">,</code> <code class="nv">$c</code><code class="p">)</code> <code class="o">=</code> <code class="nv">$values</code><code class="p">;</code> <code class="c1">// $a is "hello", $b is "world", $c is NULL</code></pre>
<p>Two or more consecutive commas in the <code>list()</code> skip values in the array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$values</code> <code class="o">=</code> <code class="nb">range</code><code class="p">(</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">);</code> <code class="c1">// use range to populate the array</code>
<code class="k">list</code><code class="p">(</code><code class="nv">$m</code><code class="p">,</code> <code class="p">,</code> <code class="nv">$n</code><code class="p">,</code> <code class="p">,</code> <code class="nv">$o</code><code class="p">)</code> <code class="o">=</code> <code class="nv">$values</code><code class="p">;</code> <code class="c1">// $m is "a", $n is "c", $o is "e"</code></pre>
<section data-type="sect2" data-pdf-bookmark="Slicing an Array"><div class="sect2" id="slicing_an_array">
<h2>Slicing an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="slicing" id="idm45922780933672"/>To extract only a subset of the array, use the <a contenteditable="false" data-type="indexterm" data-primary="array_slice function" id="idm45922780890520"/><code>array_slice()</code> function:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$subset</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_slice</code><em><code class="p">(</code><code class="k">array</code></em><code class="p">,</code><code> </code><em><code class="nx">offset</code></em><code class="p">,</code><code> </code><em><code class="nx">length</code></em><code class="p">);</code></pre>
<p>The <code>array_slice()</code> function returns a new array consisting of a consecutive series of values from the original array. The <em>offset</em> parameter identifies the initial element to copy (<code>0</code> represents the first element in the array), and the <em>length</em> parameter identifies the number of values to copy. The new array has consecutive numeric keys starting at 0. For example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$people</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Tom"</code><code class="p">,</code> <code class="s2">"Dick"</code><code class="p">,</code> <code class="s2">"Harriet"</code><code class="p">,</code> <code class="s2">"Brenda"</code><code class="p">,</code> <code class="s2">"Jo"</code><code class="p">);</code>
<code class="nv">$middle</code> <code class="o">=</code> <code class="nb">array_slice</code><code class="p">(</code><code class="nv">$people</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code> <code class="c1">// $middle is array("Harriet", "Brenda")</code></pre>
<p>It is generally only meaningful to use <code>array_slice()</code> on indexed arrays (i.e., those with consecutive integer indices starting at 0):</p>
<pre data-type="programlisting" data-code-language="php"><code class="c1">// this use of array_slice() makes no sense</code>
<code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Fred"</code><code class="p">,</code> <code class="s1">'age'</code> <code class="o">=&gt;</code> <code class="mi">35</code><code class="p">,</code> <code class="s1">'wife'</code> <code class="o">=&gt;</code> <code class="s2">"Betty"</code><code class="p">);</code>
<code class="nv">$subset</code> <code class="o">=</code> <code class="nb">array_slice</code><code class="p">(</code><code class="nv">$person</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code> <code class="c1">// $subset is array(0 =&gt; 35, 1 =&gt; "Betty")</code></pre>
<p>Combine <code>array_slice()</code> with <code>list()</code> to extract only some values to variables:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$order</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Tom"</code><code class="p">,</code> <code class="s2">"Dick"</code><code class="p">,</code> <code class="s2">"Harriet"</code><code class="p">,</code> <code class="s2">"Brenda"</code><code class="p">,</code> <code class="s2">"Jo"</code><code class="p">);</code>
<code class="k">list</code><code class="p">(</code><code class="nv">$second</code><code class="p">,</code> <code class="nv">$third</code><code class="p">)</code> <code class="o">=</code> <code class="nb">array_slice</code><code class="p">(</code><code class="nv">$order</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code>
<code class="c1">// $second is "Dick", $third is "Harriet"</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Splitting an Array into Chunks"><div class="sect2" id="splitting_an_array_into_chunks">
<h2>Splitting an Array into Chunks</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="splitting into chunks" id="idm45922780728328"/>To divide an array into smaller, evenly sized arrays, use the <a contenteditable="false" data-type="indexterm" data-primary="array_chunk function" id="idm45922780726856"/><code>array_chunk()</code> function:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$chunks</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_chunk</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">,</code><code> </code><em><code class="nx">size</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="nx">preserve_keys</code></em><code class="p">]);</code></pre>
<p>The function returns an array of the smaller arrays. The third argument, <em>preserve_keys</em>, is a Boolean value that determines whether the elements of the new arrays have the same keys as in the original (useful for associative arrays) or new numeric keys starting from 0 (useful for indexed arrays). The default is to assign new keys, as shown here:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$nums</code><code> </code><code class="o">=</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="mi">7</code><code class="p">);</code><code>
</code><code class="nv">$rows</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_chunk</code><code class="p">(</code><code class="nv">$nums</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">);</code><code>
</code><code class="nb">print_r</code><code class="p">(</code><code class="nv">$rows</code><code class="p">);</code><code>

</code><strong><code class="k">Array</code><code> </code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="k">Array</code><code> </code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">1</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">2</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">3</code></strong><code>
</code><strong><code> </code><code class="p">)</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="k">Array</code><code> </code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">4</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">5</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">6</code></strong><code>
</code><strong><code> </code><code class="p">)</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="k">Array</code><code> </code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">7</code></strong><code>
</code><strong><code> </code><code class="p">)</code></strong><code>
</code><strong><code class="p">)</code></strong></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Keys and Values"><div class="sect2" id="keys_and_values">
<h2>Keys and Values</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="keys of" id="idm45922780487528"/>The <a contenteditable="false" data-type="indexterm" data-primary="array_keys function" id="idm45922780486024"/><code>array_keys()</code> function returns an array consisting of only the keys in the array in internal order:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$arrayOfKeys</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_keys</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">);</code></pre>
<p>Here’s an example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Fred"</code><code class="p">,</code> <code class="s1">'age'</code> <code class="o">=&gt;</code> <code class="mi">35</code><code class="p">,</code> <code class="s1">'wife'</code> <code class="o">=&gt;</code> <code class="s2">"Wilma"</code><code class="p">);</code>
<code class="nv">$keys</code> <code class="o">=</code> <code class="nb">array_keys</code><code class="p">(</code><code class="nv">$person</code><code class="p">);</code> <code class="c1">// $keys is array("name", "age", "wife")</code></pre>
<p>PHP also provides a (generally less useful) function to retrieve an array of just the values in an array, <a contenteditable="false" data-type="indexterm" data-primary="array_values function" id="idm45922780421576"/><code>array_values()</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$arrayOfValues</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_values</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">);</code></pre>
<p>As with <code>array_keys()</code>, the values are returned in the array’s internal order:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$values</code> <code class="o">=</code> <code class="nb">array_values</code><code class="p">(</code><code class="nv">$person</code><code class="p">);</code> <code class="c1">// $values is array("Fred", 35, "Wilma");</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Checking Whether an Element Exists"><div class="sect2" id="checking_whether_an_element_exists">
<h2>Checking Whether an Element Exists</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="elements, checking existence of" id="idm45922780405320"/>To see if an element exists in the array, use the <code>array_key_exists()</code> function:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">if</code><code> </code><code class="p">(</code><code class="nb">array_key_exists</code><code class="p">(</code><em><code class="nb">key</code></em><code class="p">,</code><code> </code><em><code class="k">array</code></em><code class="p">))</code><code> </code><code class="p">{</code><code> </code><code class="o">...</code><code> </code><code class="p">}</code></pre>
<p>The function returns a Boolean value that indicates whether the first argument is a valid key in the array given as the second argument.</p>
<p>It’s not sufficient to simply say:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">if</code> <code class="p">(</code><code class="nv">$person</code><code class="p">[</code><code class="s1">'name'</code><code class="p">])</code> <code class="p">{</code> <code class="o">...</code> <code class="p">}</code> <code class="c1">// this can be misleading</code></pre>
<p>Even if there is an element in the array with the key <code>name</code>, its corresponding value might be false (i.e., <code>0</code>, <code>NULL</code>, or the empty string). Instead, use <a contenteditable="false" data-type="indexterm" data-primary="array_key_exists function" id="idm45922780308872"/><code>array_key_exists()</code>, as follows:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code><code class="p">[</code><code class="s1">'age'</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code> </code><code class="c1">// unborn?
</code><code>
</code><code class="k">if</code><code> </code><code class="p">(</code><code class="nv">$person</code><code class="p">[</code><code class="s1">'age'</code><code class="p">])</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2">true!</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><code class="k">if</code><code> </code><code class="p">(</code><code class="nb">array_key_exists</code><code class="p">(</code><code class="s1">'age'</code><code class="p">,</code><code> </code><code class="nv">$person</code><code class="p">))</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2">exists!</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><strong><code class="nx">exists</code><code class="o">!</code></strong></pre>
<p>Many people use the <a contenteditable="false" data-type="indexterm" data-primary="isset function" id="idm45922780198040"/><code>isset()</code> function instead, which returns <code>true</code> if the element exists and is not <code>NULL</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$a</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="k">NULL</code><code class="p">,</code><code> </code><code class="s1">''</code><code class="p">);</code><code>

</code><code class="k">function</code><code> </code><code class="nf">tf</code><code class="p">(</code><code class="nv">$v</code><code class="p">)</code><code>
</code><code class="p">{</code><code>
 </code><code class="k">return</code><code> </code><code class="nv">$v</code><code> </code><code class="o">?</code><code> </code><code class="s1">'T'</code><code> </code><code class="o">:</code><code> </code><code class="s1">'F'</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><code class="k">for</code><code> </code><code class="p">(</code><code class="nv">$i</code><code class="o">=</code><code class="mi">0</code><code class="p">;</code><code> </code><code class="nv">$i</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">4</code><code class="p">;</code><code> </code><code class="nv">$i</code><code class="o">++</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="nb">printf</code><code class="p">(</code><code class="s2">"</code><code class="s2">%d: %s %s</code><code class="se">\n</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="nv">$i</code><code class="p">,</code><code> </code><code class="nx">tf</code><code class="p">(</code><code class="nb">isset</code><code class="p">(</code><code class="nv">$a</code><code class="p">[</code><code class="nv">$i</code><code class="p">])),</code><code> </code><code class="nx">tf</code><code class="p">(</code><code class="nb">array_key_exists</code><code class="p">(</code><code class="nv">$i</code><code class="p">,</code><code> </code><code class="nv">$a</code><code class="p">)));</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="mi">0</code><code class="o">:</code><code> </code><code class="nx">T</code><code> </code><code class="nx">T</code></strong><code>
</code><strong><code class="mi">1</code><code class="o">:</code><code> </code><code class="nx">F</code><code> </code><code class="nx">T</code></strong><code>
</code><strong><code class="mi">2</code><code class="o">:</code><code> </code><code class="nx">T</code><code> </code><code class="nx">T</code></strong><code>
</code><strong><code class="mi">3</code><code class="o">:</code><code> </code><code class="nx">F</code><code> </code><code class="nx">F</code></strong></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Removing and Inserting Elements in an Array"><div class="sect2" id="removing_and_inserting_elements_in_an_a">
<h2>Removing and Inserting Elements in an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="splicing" id="ix_arrays_splicing"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="removing elements in" id="ix_arrays_removing"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="inserting elements in" id="ix_arrays_inserting"/>The <a contenteditable="false" data-type="indexterm" data-primary="array_splice function" id="ix_array_splice_function"/><code>array_splice()</code> function can remove or insert elements in an array and optionally create another array from the removed elements:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$removed</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_splice</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">,</code><code> </code><em><code class="nx">start</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="nx">length</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="nx">replacement</code></em><code> </code><code class="p">]</code><code> </code><code class="p">]);</code></pre>
<p>We’ll look at <code>array_splice()</code> using this array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$subjects</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"physics"</code><code class="p">,</code> <code class="s2">"chem"</code><code class="p">,</code> <code class="s2">"math"</code><code class="p">,</code> <code class="s2">"bio"</code><code class="p">,</code> <code class="s2">"cs"</code><code class="p">,</code> <code class="s2">"drama"</code><code class="p">,</code> <code class="s2">"classics"</code><code class="p">);</code></pre>
<p>We can remove the <code>"math"</code>, <code>"bio"</code>, and <code>"cs"</code> elements by telling <code>array_splice()</code> to start at position 2 and remove 3 elements:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$removed</code> <code class="o">=</code> <code class="nb">array_splice</code><code class="p">(</code><code class="nv">$subjects</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">);</code>
<code class="c1">// $removed is array("math", "bio", "cs")</code>
<code class="c1">// $subjects is array("physics", "chem", "drama", "classics")</code></pre>
<p>If you omit the length, <code>array_splice()</code> removes to the end of the array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$removed</code> <code class="o">=</code> <code class="nb">array_splice</code><code class="p">(</code><code class="nv">$subjects</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code>
<code class="c1">// $removed is array("math", "bio", "cs", "drama", "classics")</code>
<code class="c1">// $subjects is array("physics", "chem")</code></pre>
<p>If you simply want to delete elements from the source array and you don’t care about retaining their values, you don’t need to store the results of <code>array_splice()</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">array_splice</code><code class="p">(</code><code class="nv">$subjects</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code>
<code class="c1">// $subjects is array("physics", "chem");</code></pre>
<p class="pagebreak-before">To insert elements where others were removed, use the fourth argument:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$new</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"law"</code><code class="p">,</code> <code class="s2">"business"</code><code class="p">,</code> <code class="s2">"IS"</code><code class="p">);</code>
<code class="nb">array_splice</code><code class="p">(</code><code class="nv">$subjects</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="nv">$new</code><code class="p">);</code>
<code class="c1">// $subjects is array("physics", "chem", "math", "bio", "law", "business", "IS")</code></pre>
<p>The size of the replacement array doesn’t have to be the same as the number of elements you delete. The array grows or shrinks as needed:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$new</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"law"</code><code class="p">,</code> <code class="s2">"business"</code><code class="p">,</code> <code class="s2">"IS"</code><code class="p">);</code>
<code class="nb">array_splice</code><code class="p">(</code><code class="nv">$subjects</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="nv">$new</code><code class="p">);</code>
<code class="c1">// $subjects is array("physics", "chem", "math", "law", "business", "IS")</code></pre>
<p>To insert new elements into the array while pushing existing elements to the right, delete zero elements:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$subjects</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"physics"</code><code class="p">,</code> <code class="s2">"chem"</code><code class="p">,</code> <code class="s2">"math');</code>
<code class="si">$new</code><code class="s2"> = array("</code><code class="nx">law</code><code class="s2">", "</code><code class="nx">business</code><code class="s2">");</code>
<code class="s2">array_splice(</code><code class="si">$subjects</code><code class="s2">, 2, 0, </code><code class="si">$new</code><code class="s2">);</code>
<code class="s2">// </code><code class="si">$subjects</code><code class="s2"> is array("</code><code class="nx">physics</code><code class="s2">", "</code><code class="nx">chem</code><code class="s2">", "</code><code class="nx">law</code><code class="s2">", "</code><code class="nx">business</code><code class="s2">", "</code><code class="nx">math</code><code class="s2">")</code></pre>
<p>Although the examples so far have used an indexed array, <code>array_splice()</code> also works on associative arrays:<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_multi_values" id="idm45922779683320"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_values_extract" id="idm45922779767128"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_removing" id="idm45922779765784"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_inserting" id="idm45922779764408"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_array_splice_function" id="idm45922779763032"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_splicing" id="idm45922779761688"/></p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$capitals</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code>
 <code class="s1">'USA'</code> <code class="o">=&gt;</code> <code class="s2">"Washington"</code><code class="p">,</code>
 <code class="s1">'Great Britain'</code> <code class="o">=&gt;</code> <code class="s2">"London"</code><code class="p">,</code>
 <code class="s1">'New Zealand'</code> <code class="o">=&gt;</code> <code class="s2">"Wellington"</code><code class="p">,</code>
 <code class="s1">'Australia'</code> <code class="o">=&gt;</code> <code class="s2">"Canberra"</code><code class="p">,</code>
 <code class="s1">'Italy'</code> <code class="o">=&gt;</code> <code class="s2">"Rome"</code><code class="p">,</code>
 <code class="s1">'Canada'</code> <code class="o">=&gt;</code> <code class="s2">"Ottawa"</code>
<code class="p">);</code>

<code class="nv">$downUnder</code> <code class="o">=</code> <code class="nb">array_splice</code><code class="p">(</code><code class="nv">$capitals</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code> <code class="c1">// remove New Zealand and Australia</code>
<code class="nv">$france</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'France'</code> <code class="o">=&gt;</code> <code class="s2">"Paris"</code><code class="p">);</code>

<code class="nb">array_splice</code><code class="p">(</code><code class="nv">$capitals</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="nv">$france</code><code class="p">);</code> <code class="c1">// insert France between USA and GB</code></pre>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Converting Between Arrays and Variables"><div class="sect1" id="converting_between_arrays_and_variables">
<h1>Converting Between Arrays and Variables</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="variables" data-secondary="converting between arrays and" id="ix_variables_convert_arrays"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="converting between arrays and variables" id="ix_arrays_convert_variables"/>PHP provides two functions, <a contenteditable="false" data-type="indexterm" data-primary="extract function" id="idm45922779731176"/><code>extract()</code> and <a contenteditable="false" data-type="indexterm" data-primary="compact function" id="idm45922779729656"/><code>compact()</code>, that convert between arrays and variables. The names of the variables correspond to keys in the array, and the values of the variables become the values in the array. For instance, this array</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Fred"</code><code class="p">,</code> <code class="s1">'age'</code> <code class="o">=&gt;</code> <code class="mi">35</code><code class="p">,</code> <code class="s1">'wife'</code> <code class="o">=&gt;</code> <code class="s2">"Betty"</code><code class="p">);</code></pre>
<p>can be converted to, or built from, these variables:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$name</code> <code class="o">=</code> <code class="s2">"Fred"</code><code class="p">;</code>
<code class="nv">$age</code> <code class="o">=</code> <code class="mi">35</code><code class="p">;</code>
<code class="nv">$wife</code> <code class="o">=</code> <code class="s2">"Betty"</code><code class="p">;</code></pre>
<section data-type="sect2" data-pdf-bookmark="Creating Variables from an Array"><div class="sect2" id="creating_variables_from_an_array">
<h2>Creating Variables from an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="variables" data-secondary="creating from array elements" id="idm45922779617752"/>The <code>extract()</code> function automatically creates local variables from an array. The indices of the array elements become the variable names:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">extract</code><code class="p">(</code><code class="nv">$person</code><code class="p">);</code> <code class="c1">// $name, $age, and $wife are now set</code></pre>
<p>If a variable created by the extraction has the same name as an existing one, the existing variable’s value is overwritten with the one from the array.</p>
<p>You can modify <code>extract()</code>’s behavior by passing a second argument. The <a data-type="xref" href="app01.xhtml#function_reference">Appendix</a> describes the possible values for this second argument. The most useful value is <code>EXTR_PREFIX_ALL</code>, which indicates that the third argument to <code>extract()</code> is a prefix for the variable names that are created. This helps ensure that you create unique variable names when you use <code>extract()</code>. It is good PHP style to always use <code>EXTR_</code><span class="keep-together"><code>PREFIX_ALL</code></span>, as shown here:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$shape</code><code> </code><code class="o">=</code><code> </code><code class="s2">"</code><code class="s2">round</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="nv">$array</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s1">'cover'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">bird</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s1">'shape'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">rectangular</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="nb">extract</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code><code> </code><code class="nx">EXTR_PREFIX_ALL</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">book</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2">Cover: </code><code class="si">{</code><code class="nv">$book_cover</code><code class="si">}</code><code class="s2">, Book Shape: </code><code class="si">{</code><code class="nv">$book_shape</code><code class="si">}</code><code class="s2">, Shape: </code><code class="si">{</code><code class="nv">$shape</code><code class="si">}</code><code class="s2">"</code><code class="p">;</code><code>

</code><strong><code class="nx">Cover</code><code class="o">:</code><code> </code><code class="nx">bird</code><code class="p">,</code><code> </code><code class="nx">Book</code><code> </code><code class="nx">Shape</code><code class="o">:</code><code> </code><code class="nx">rectangular</code><code class="p">,</code><code> </code><code class="nx">Shape</code><code class="o">:</code><code> </code><code class="nb">round</code></strong></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Creating an Array from Variables"><div class="sect2" id="creating_an_array_from_variables">
<h2>Creating an Array from Variables</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="variables" data-secondary="creating arrays from" id="idm45922779543272"/>The <code>compact()</code> function is the reverse of <code>extract()</code>; you pass it the variable names to compact either as separate parameters or in an array. The <code>compact()</code> function creates an associative array whose keys are the variable names and whose values are the variable’s values. Any names in the array that do not correspond to actual variables are skipped. Here’s an example of <code>compact()</code> in action:<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_convert_variables" id="idm45922779503560"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_variables_convert_arrays" id="idm45922779545128"/></p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$color</code> <code class="o">=</code> <code class="s2">"indigo"</code><code class="p">;</code>
<code class="nv">$shape</code> <code class="o">=</code> <code class="s2">"curvy"</code><code class="p">;</code>
<code class="nv">$floppy</code> <code class="o">=</code> <code class="s2">"none"</code><code class="p">;</code>

<code class="nv">$a</code> <code class="o">=</code> <code class="nb">compact</code><code class="p">(</code><code class="s2">"color"</code><code class="p">,</code> <code class="s2">"shape"</code><code class="p">,</code> <code class="s2">"floppy"</code><code class="p">);</code>
<code class="c1">// or</code>
<code class="nv">$names</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"color"</code><code class="p">,</code> <code class="s2">"shape"</code><code class="p">,</code> <code class="s2">"floppy"</code><code class="p">);</code>
<code class="nv">$a</code> <code class="o">=</code> <code class="nb">compact</code><code class="p">(</code><code class="nv">$names</code><code class="p">);</code></pre>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Traversing Arrays"><div class="sect1" id="traversing_arrays">
<h1>Traversing Arrays</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="traversing" id="ix_arrays_traversing"/>The most common task with arrays is to do something with every element—for instance, sending mail to each element of an array of addresses, updating each file in an array of filenames, or adding up each element of an array of prices. There are <span class="keep-together">several</span> ways to traverse arrays in PHP, and the one you choose will depend on your data and the task you’re performing.</p>
<section data-type="sect2" data-pdf-bookmark="The foreach Construct"><div class="sect2" id="the_foreach_construct">
<h2>The foreach Construct</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="loop statements" data-secondary="foreach statement" id="idm45922779358552"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="foreach construct" id="idm45922779357176"/><a contenteditable="false" data-type="indexterm" data-primary="foreach statement" id="idm45922779355800"/>The most common way to loop over elements of an array is to use the <code>foreach</code> <span class="keep-together">construct:</span></p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addresses</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">spam@cyberpromo.net</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">abuse@example.com</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="k">foreach</code><code> </code><code class="p">(</code><code class="nv">$addresses</code><code> </code><code class="k">as</code><code> </code><code class="nv">$value</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2">Processing </code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="nx">Processing</code><code> </code><code class="nx">spam</code><code class="o">@</code><code class="nx">cyberpromo</code><code class="o">.</code><code class="nx">net</code></strong><code>
</code><strong><code class="nx">Processing</code><code> </code><code class="nx">abuse</code><code class="o">@</code><code class="nx">example</code><code class="o">.</code><code class="nx">com</code></strong></pre>
<p>PHP executes the body of the loop (the <code>echo</code> statement) once for each element of <code>$addresses</code> in turn, with <code>$value</code> set to the current element. Elements are processed by their internal order.</p>
<p>An alternative form of <code>foreach</code> gives you access to the current key:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s1">'name'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">Fred</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s1">'age'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">35</code><code class="p">,</code><code> </code><code class="s1">'wife'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">Wilma</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="k">foreach</code><code> </code><code class="p">(</code><code class="nv">$person</code><code> </code><code class="k">as</code><code> </code><code class="nv">$key</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nv">$value</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2">Fred's </code><code class="si">{</code><code class="nv">$key</code><code class="si">}</code><code class="s2"> is </code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="nx">Fred</code><code class="s1">'s name is Fred</code></strong><code class="s1">
</code><strong><code class="s1">Fred'</code><code class="nx">s</code><code> </code><code class="nx">age</code><code> </code><code class="nx">is</code><code> </code><code class="mi">35</code></strong><code>
</code><strong><code class="nx">Fred</code><code class="err">'</code><code class="nx">s</code><code> </code><code class="nx">wife</code><code> </code><code class="nx">is</code><code> </code><code class="nx">Wilma</code></strong></pre>
<p>In this case, the key for each element is placed in <code>$key</code> and the corresponding value is placed in <code>$value</code>.</p>
<p>The <code>foreach</code> construct does not operate on the array itself, but rather on a copy of it. You can insert or delete elements in the body of a <code>foreach</code> loop, safe in the knowledge that the loop won’t attempt to process the deleted or inserted elements.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="The Iterator Functions"><div class="sect2" id="the_iterator_functions">
<h2>The Iterator Functions</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="functions" data-secondary="arrays" id="ix_functions_arrays_ch5"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="functions for" id="ix_arrays_functions_ch5"/><a contenteditable="false" data-type="indexterm" data-primary="functions" data-secondary="iterator" id="ix_functions_iterator"/><a contenteditable="false" data-type="indexterm" data-primary="iterator functions" id="ix_iterator_functions"/>Every PHP array keeps track of the current element you’re working with; the pointer to the current element is known as the <em>iterator</em>. PHP has functions to set, move, and reset this iterator. The iterator functions are:</p>
<dl>
<dt><code>current()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="current function" id="idm45922779133768"/>Returns the element currently pointed at by the iterator.</dd>
<dt><code>reset()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="reset function" id="idm45922779131896"/>Moves the iterator to the first element in the array and returns it.</dd>
<dt><code>next()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="next function" id="idm45922779130024"/>Moves the iterator to the next element in the array and returns it.</dd>
<dt><code>prev()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="prev function" id="idm45922779128152"/>Moves the iterator to the previous element in the array and returns it.</dd>
<dt><code>end()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="end function" id="idm45922779126280"/>Moves the iterator to the last element in the array and returns it.</dd>
<dt><code>each()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="each function" id="idm45922779124408"/>Returns the key and value of the current element as an array and moves the iterator to the next element in the array.</dd>
<dt><code>key()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="key function" id="idm45922779122408"/>Returns the key of the current element.</dd>
</dl>
<p>The <code>each()</code> function is used to loop over the elements of an array. It processes elements according to their internal order:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">reset</code><code class="p">(</code><code class="nv">$addresses</code><code class="p">);</code><code>

</code><code class="k">while</code><code> </code><code class="p">(</code><code class="k">list</code><code class="p">(</code><code class="nv">$key</code><code class="p">,</code><code> </code><code class="nv">$value</code><code class="p">)</code><code> </code><code class="o">=</code><code> </code><code class="nb">each</code><code class="p">(</code><code class="nv">$addresses</code><code class="p">))</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="si">{</code><code class="nv">$key</code><code class="si">}</code><code class="s2"> is </code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="s2">&lt;br /&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="mi">0</code><code> </code><code class="nx">is</code><code> </code><code class="nx">spam</code><code class="o">@</code><code class="nx">cyberpromo</code><code class="o">.</code><code class="nx">net</code></strong><code>
</code><strong><code class="mi">1</code><code> </code><code class="nx">is</code><code> </code><code class="nx">abuse</code><code class="o">@</code><code class="nx">example</code><code class="o">.</code><code class="nx">com</code></strong></pre>
<p>This approach does not make a copy of the array, as <code>foreach</code> does. This is useful for very large arrays when you want to conserve memory.</p>
<p>The iterator functions are useful when you need to consider some parts of the array separately from others. <a data-type="xref" href="#example_five_onedot_building_a_table_wi">Example 5-1</a> shows code that builds a table, treating the first index and value in an associative array as table column headings.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_iterator_functions" id="idm45922779073224"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_functions_iterator" id="idm45922779071880"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_functions_ch5" id="idm45922779070504"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_functions_arrays_ch5" id="idm45922779069128"/></p>
<div data-type="example" id="example_five_onedot_building_a_table_wi">
<h5><span class="label">Example 5-1. </span>Building a table with the iterator functions</h5>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$ages</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code>
 <code class="s1">'Person'</code> <code class="o">=&gt;</code> <code class="s2">"Age"</code><code class="p">,</code>
 <code class="s1">'Fred'</code> <code class="o">=&gt;</code> <code class="mi">35</code><code class="p">,</code>
 <code class="s1">'Barney'</code> <code class="o">=&gt;</code> <code class="mi">30</code><code class="p">,</code>
 <code class="s1">'Tigger'</code> <code class="o">=&gt;</code> <code class="mi">8</code><code class="p">,</code>
 <code class="s1">'Pooh'</code> <code class="o">=&gt;</code> <code class="mi">40</code>
<code class="p">);</code>

<code class="c1">// start table and print heading</code>
<code class="nb">reset</code><code class="p">(</code><code class="nv">$ages</code><code class="p">);</code>

<code class="k">list</code><code class="p">(</code><code class="nv">$c1</code><code class="p">,</code> <code class="nv">$c2</code><code class="p">)</code> <code class="o">=</code> <code class="nb">each</code><code class="p">(</code><code class="nv">$ages</code><code class="p">);</code>

<code class="k">echo</code><code class="p">(</code><code class="s2">"&lt;table&gt;</code><code class="se">\n</code><code class="s2">&lt;tr&gt;&lt;th&gt;</code><code class="si">{</code><code class="nv">$c1</code><code class="si">}</code><code class="s2">&lt;/th&gt;&lt;th&gt;</code><code class="si">{</code><code class="nv">$c2</code><code class="si">}</code><code class="s2">&lt;/th&gt;&lt;/tr&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">);</code>

<code class="c1">// print the rest of the values</code>
<code class="k">while</code> <code class="p">(</code><code class="k">list</code><code class="p">(</code><code class="nv">$c1</code><code class="p">,</code> <code class="nv">$c2</code><code class="p">)</code> <code class="o">=</code> <code class="nb">each</code><code class="p">(</code><code class="nv">$ages</code><code class="p">))</code> <code class="p">{</code>
 <code class="k">echo</code><code class="p">(</code><code class="s2">"&lt;tr&gt;&lt;td&gt;</code><code class="si">{</code><code class="nv">$c1</code><code class="si">}</code><code class="s2">&lt;/td&gt;&lt;td&gt;</code><code class="si">{</code><code class="nv">$c2</code><code class="si">}</code><code class="s2">&lt;/td&gt;&lt;/tr&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">);</code>
<code class="p">}</code>

<code class="c1">// end the table</code>
<code class="k">echo</code><code class="p">(</code><code class="s2">"&lt;/table&gt;"</code><code class="p">);</code></pre>
</div>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Using a for Loop"><div class="sect2" id="using_a_for_loop">
<h2>Using a for Loop</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="loop statements" data-secondary="for statement" id="idm45922778962760"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="for loop, using" id="idm45922778961384"/><a contenteditable="false" data-type="indexterm" data-primary="for statement" id="idm45922778960008"/>If you know that you are dealing with an indexed array, where the keys are consecutive integers beginning at 0, you can use a <code>for</code> loop to count through the indices. The <code>for</code> loop operates on the array itself, not on a copy of the array, and processes elements in key order regardless of their internal order.</p>
<p>Here’s how to print an array using <code>for</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addresses</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">spam@cyberpromo.net</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">abuse@example.com</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="nv">$addressCount</code><code> </code><code class="o">=</code><code> </code><code class="nb">count</code><code class="p">(</code><code class="nv">$addresses</code><code class="p">);</code><code>

</code><code class="k">for</code><code> </code><code class="p">(</code><code class="nv">$i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code> </code><code class="nv">$i</code><code> </code><code class="o">&lt;</code><code> </code><code class="nv">$addressCount</code><code class="p">;</code><code> </code><code class="nv">$i</code><code class="o">++</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="nv">$value</code><code> </code><code class="o">=</code><code> </code><code class="nv">$addresses</code><code class="p">[</code><code class="nv">$i</code><code class="p">];</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="nx">spam</code><code class="o">@</code><code class="nx">cyberpromo</code><code class="o">.</code><code class="nx">net</code></strong><code>
</code><strong><code class="nx">abuse</code><code class="o">@</code><code class="nx">example</code><code class="o">.</code><code class="nx">com</code></strong></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Calling a Function for Each Array Element"><div class="sect2" id="calling_a_function_for_each_array_eleme">
<h2>Calling a Function for Each Array Element</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="functions" data-secondary="calling" id="ix_functions_calling_ch5"/>PHP provides a mechanism, <a contenteditable="false" data-type="indexterm" data-primary="array_walk function" id="idm45922778767848"/><code>array_walk()</code>, for calling a user-defined function once per element in an array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">array_walk</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">,</code><code> </code><em><code class="nx">callable</code></em><code class="p">);</code></pre>
<p>The function you define takes in two or, optionally, three arguments: the first is the element’s value, the second is the element’s key, and the third is a value supplied to <code>array_walk()</code> when it is called. For instance, here’s another way to print table columns made of the values from an array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$printRow</code> <code class="o">=</code> <code class="k">function</code> <code class="p">(</code><code class="nv">$value</code><code class="p">,</code> <code class="nv">$key</code><code class="p">)</code>
<code class="p">{</code>
 <code class="k">print</code><code class="p">(</code><code class="s2">"&lt;tr&gt;&lt;td&gt;</code><code class="si">{</code><code class="nv">$key</code><code class="si">}</code><code class="s2">&lt;/td&gt;&lt;td&gt;</code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="s2">&lt;/td&gt;&lt;/tr&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">);</code>
<code class="p">};</code>

<code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Fred"</code><code class="p">,</code> <code class="s1">'age'</code> <code class="o">=&gt;</code> <code class="mi">35</code><code class="p">,</code> <code class="s1">'wife'</code> <code class="o">=&gt;</code> <code class="s2">"Wilma"</code><code class="p">);</code>

<code class="k">echo</code> <code class="s2">"&lt;table border=1&gt;"</code><code class="p">;</code>

<code class="nb">array_walk</code><code class="p">(</code><code class="nv">$person</code><code class="p">,</code> <code class="nv">$printRow</code><code class="p">);</code>

<code class="k">echo</code> <code class="s2">"&lt;/table&gt;"</code><code class="p">;</code></pre>
<p>A variation of this example specifies a background color using the optional third argument to <code>array_walk()</code>. This parameter gives us the flexibility we need to print many tables, with many background colors:<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_functions_calling_ch5" id="idm45922778803416"/></p>
<pre data-type="programlisting" data-code-language="php"><code class="k">function</code> <code class="nf">printRow</code><code class="p">(</code><code class="nv">$value</code><code class="p">,</code> <code class="nv">$key</code><code class="p">,</code> <code class="nv">$color</code><code class="p">)</code>
<code class="p">{</code>
 <code class="k">echo</code> <code class="s2">"&lt;tr&gt;</code><code class="se">\n</code><code class="s2">&lt;td bgcolor=</code><code class="se">\"</code><code class="si">{</code><code class="nv">$color</code><code class="si">}</code><code class="se">\"</code><code class="s2">&gt;</code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="s2">&lt;/td&gt;"</code><code class="p">;</code>
 <code class="k">echo</code> <code class="s2">"&lt;td bgcolor=</code><code class="se">\"</code><code class="si">{</code><code class="nv">$color</code><code class="si">}</code><code class="se">\"</code><code class="s2">&gt;</code><code class="si">{</code><code class="nv">$key</code><code class="si">}</code><code class="s2">&lt;/td&gt;</code><code class="se">\n</code><code class="s2">&lt;/tr&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code>
<code class="p">}</code>

<code class="nv">$person</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Fred"</code><code class="p">,</code> <code class="s1">'age'</code> <code class="o">=&gt;</code> <code class="mi">35</code><code class="p">,</code> <code class="s1">'wife'</code> <code class="o">=&gt;</code> <code class="s2">"Wilma"</code><code class="p">);</code>

<code class="k">echo</code> <code class="s2">"&lt;table border=</code><code class="se">\"</code><code class="s2">1</code><code class="se">\"</code><code class="s2">&gt;"</code><code class="p">;</code>

<code class="nb">array_walk</code><code class="p">(</code><code class="nv">$person</code><code class="p">,</code> <code class="s2">"printRow"</code><code class="p">,</code> <code class="s2">"lightblue"</code><code class="p">);</code>
<code class="k">echo</code> <code class="s2">"&lt;/table&gt;"</code><code class="p">;</code></pre>
<p>If you have multiple options you want to pass into the called function, simply pass an array in as a third parameter:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$extraData</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s1">'border'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="s1">'color'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">red</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="nv">$baseArray</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">Ford</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Chrysler</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Volkswagen</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Honda</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Toyota</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="nb">array_walk</code><code class="p">(</code><code class="nv">$baseArray</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">walkFunction</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="nv">$extraData</code><code class="p">);</code><code>

</code><code class="k">function</code><code> </code><code class="nf">walkFunction</code><code class="p">(</code><code class="nv">$item</code><code class="p">,</code><code> </code><code class="nv">$index</code><code class="p">,</code><code> </code><code class="nv">$data</code><code class="p">)</code><code>
</code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="si">{</code><code class="nv">$item</code><code class="si">}</code><code class="s2"> &lt;- item, then border: </code><code class="si">{</code><code class="nv">$data</code><code class="p">[</code><code class="s1">'border'</code><code class="p">]</code><code class="si">}</code><code class="s2">"</code><code class="p">;</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="s2"> color-&gt;</code><code class="si">{</code><code class="nv">$data</code><code class="p">[</code><code class="s1">'color'</code><code class="p">]</code><code class="si">}</code><code class="s2">&lt;br /&gt;</code><code class="s2">"</code><code> </code><code class="p">;</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="nx">Ford</code><code> </code><code class="o">&lt;-</code><code> </code><code class="nx">item</code><code class="p">,</code><code> </code><code class="nx">then</code><code> </code><code class="nx">border</code><code class="o">:</code><code> </code><code class="mi">2</code><code> </code><code class="nx">color</code><code class="o">-&gt;</code><code class="na">red</code></strong><code>
</code><strong><code class="nx">Crysler</code><code> </code><code class="o">&lt;-</code><code> </code><code class="nx">item</code><code class="p">,</code><code> </code><code class="nx">then</code><code> </code><code class="nx">border</code><code class="o">:</code><code> </code><code class="mi">2</code><code> </code><code class="nx">color</code><code class="o">-&gt;</code><code class="na">red</code></strong><code>
</code><strong><code class="nx">VW</code><code> </code><code class="o">&lt;-</code><code> </code><code class="nx">item</code><code class="p">,</code><code> </code><code class="nx">then</code><code> </code><code class="nx">border</code><code class="o">:</code><code> </code><code class="mi">2</code><code> </code><code class="nx">color</code><code class="o">-&gt;</code><code class="na">red</code></strong><code>
</code><strong><code class="nx">Honda</code><code> </code><code class="o">&lt;-</code><code> </code><code class="nx">item</code><code class="p">,</code><code> </code><code class="nx">then</code><code> </code><code class="nx">border</code><code class="o">:</code><code> </code><code class="mi">2</code><code> </code><code class="nx">color</code><code class="o">-&gt;</code><code class="na">red</code></strong><code>
</code><strong><code class="nx">Toyota</code><code> </code><code class="o">&lt;-</code><code> </code><code class="nx">item</code><code class="p">,</code><code> </code><code class="nx">then</code><code> </code><code class="nx">border</code><code class="o">:</code><code> </code><code class="mi">2</code><code> </code><code class="nx">color</code><code class="o">-&gt;</code><code class="na">red</code></strong></pre>
<p>The <code>array_walk()</code> function processes elements in their internal order.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Reducing an Array"><div class="sect2" id="reducing_an_array">
<h2>Reducing an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="reducing" id="idm45922778462184"/>A cousin of <code>array_walk()</code>, <a contenteditable="false" data-type="indexterm" data-primary="array_reduce function" id="idm45922778469032"/><code>array_reduce()</code> applies a function to each element of the array in turn, to build a single value:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$result</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_reduce</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">,</code><code> </code><em><code class="nx">callable</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="k">default</code></em><code> </code><code class="p">]);</code></pre>
<p>The function takes two arguments: the running total, and the current value being processed. It should return the new running total. For instance, to add up the squares of the values of an array, use:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addItUp</code><code> </code><code class="o">=</code><code> </code><code class="k">function</code><code> </code><code class="p">(</code><code class="nv">$runningTotal</code><code class="p">,</code><code> </code><code class="nv">$currentValue</code><code class="p">)</code><code>
</code><code class="p">{</code><code>
 </code><code class="nv">$runningTotal</code><code> </code><code class="o">+=</code><code> </code><code class="nv">$currentValue</code><code> </code><code class="o">*</code><code> </code><code class="nv">$currentValue</code><code class="p">;</code><code>

 </code><code class="k">return</code><code> </code><code class="nv">$runningTotal</code><code class="p">;</code><code>
</code><code class="p">};</code><code>

</code><code class="nv">$numbers</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">,</code><code> </code><code class="mi">7</code><code class="p">);</code><code>
</code><code class="nv">$total</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_reduce</code><code class="p">(</code><code class="nv">$numbers</code><code class="p">,</code><code> </code><code class="nv">$addItUp</code><code class="p">);</code><code>

</code><code class="k">echo</code><code> </code><code class="nv">$total</code><code class="p">;</code><code>

</code><strong><code class="mi">87</code></strong></pre>
<p>The <code>array_reduce()</code> line makes these function calls:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nx">addItUp</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code>
<code class="nx">addItUp</code><code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="mi">3</code><code class="p">);</code>
<code class="nx">addItUp</code><code class="p">(</code><code class="mi">13</code><code class="p">,</code> <code class="mi">5</code><code class="p">);</code>
<code class="nx">addItUp</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">7</code><code class="p">);</code></pre>
<p>The <em>default</em> argument, if provided, is a seed value. For instance, if we change the call to <code>array_reduce()</code> in the previous example to:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$total</code> <code class="o">=</code> <code class="nb">array_reduce</code><code class="p">(</code><code class="nv">$numbers</code><code class="p">,</code> <code class="s2">"addItUp"</code><code class="p">,</code> <code class="mi">11</code><code class="p">);</code></pre>
<p>The resulting function calls are:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nx">addItUp</code><code class="p">(</code><code class="mi">11</code><code class="p">,</code> <code class="mi">2</code><code class="p">);</code>
<code class="nx">addItUp</code><code class="p">(</code><code class="mi">15</code><code class="p">,</code> <code class="mi">3</code><code class="p">);</code>
<code class="nx">addItUp</code><code class="p">(</code><code class="mi">24</code><code class="p">,</code> <code class="mi">5</code><code class="p">);</code>
<code class="nx">addItUp</code><code class="p">(</code><code class="mi">49</code><code class="p">,</code> <code class="mi">7</code><code class="p">);</code></pre>
<p>If the array is empty, <code>array_reduce()</code> returns the <em>default</em> value. If no default value is given and the array is empty, <code>array_reduce()</code> returns <code>NULL</code>.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Searching for Values"><div class="sect2" id="searching_for_values">
<h2>Searching for Values</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="values of" id="ix_arrays_values_search"/><a contenteditable="false" data-type="indexterm" data-primary="searching" data-secondary="arrays for values" id="ix_search_arrays"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="searching for values in" id="ix_arrays_search_values"/>The <a contenteditable="false" data-type="indexterm" data-primary="in_array function" id="idm45922778137736"/><code>in_array()</code> function returns <code>true</code> or <code>false</code>, depending on whether the first argument is an element in the array given as the second argument:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">if</code><code> </code><code class="p">(</code><code class="nb">in_array</code><code class="p">(</code><em><code class="nx">to_find</code></em><code class="p">,</code><code> </code><em><code class="k">array</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="nx">strict</code></em><code class="p">]))</code><code> </code><code class="p">{</code><code> </code><code class="o">...</code><code> </code><code class="p">}</code></pre>
<p>If the optional third argument is <code>true</code>, the types of <em>to_find</em> and the value in the array must match. The default is to not check the data types.</p>
<p>Here’s a simple example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$addresses</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"spam@cyberpromo.net"</code><code class="p">,</code> <code class="s2">"abuse@example.com"</code><code class="p">,</code> 
<code class="s2">"root@example.com"</code><code class="p">);</code>
<code class="nv">$gotSpam</code> <code class="o">=</code> <code class="nb">in_array</code><code class="p">(</code><code class="s2">"spam@cyberpromo.net"</code><code class="p">,</code> <code class="nv">$addresses</code><code class="p">);</code> <code class="c1">// $gotSpam is true</code>
<code class="nv">$gotMilk</code> <code class="o">=</code> <code class="nb">in_array</code><code class="p">(</code><code class="s2">"milk@tucows.com"</code><code class="p">,</code> <code class="nv">$addresses</code><code class="p">);</code> <code class="c1">// $gotMilk is false</code></pre>
<p>PHP automatically indexes the values in arrays, so <code>in_array()</code> is generally much faster than a loop checking every value in the array to find the one you want.</p>
<p><a data-type="xref" href="#example_five_twodot_searching_an_array">Example 5-2</a> checks whether the user has entered information in all the required fields in a form.</p>
<div data-type="example" id="example_five_twodot_searching_an_array">
<h5><span class="label">Example 5-2. </span>Searching an array</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="cp">&lt;?php</code>
<code class="k">function</code> <code class="nf">hasRequired</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="nv">$requiredFields</code><code class="p">)</code> <code class="p">{</code>
 <code class="nv">$array</code> <code class="o">=</code>

 <code class="nv">$keys</code> <code class="o">=</code> <code class="nb">array_keys</code> <code class="p">(</code> <code class="nv">$array</code> <code class="p">);</code>
 <code class="k">foreach</code> <code class="p">(</code> <code class="nv">$requiredFields</code> <code class="k">as</code> <code class="nv">$fieldName</code> <code class="p">)</code> <code class="p">{</code>
 <code class="k">if</code> <code class="p">(</code><code class="o">!</code> <code class="nb">in_array</code> <code class="p">(</code> <code class="nv">$fieldName</code><code class="p">,</code> <code class="nv">$keys</code> <code class="p">))</code> <code class="p">{</code>
 <code class="k">return</code> <code class="k">false</code><code class="p">;</code>
 <code class="p">}</code>
 <code class="p">}</code>
 <code class="k">return</code> <code class="k">true</code><code class="p">;</code>
<code class="p">}</code>
<code class="k">if</code> <code class="p">(</code><code class="nv">$_POST</code> <code class="p">[</code><code class="s1">'submitted'</code><code class="p">])</code> <code class="p">{</code>
 <code class="nv">$testArray</code> <code class="o">=</code> <code class="nb">array_filter</code><code class="p">(</code><code class="nv">$_POST</code><code class="p">);</code>
 <code class="k">echo</code> <code class="s2">"&lt;p&gt;You "</code><code class="p">;</code>
 <code class="k">echo</code> <code class="nx">hasRequired</code> <code class="p">(</code> <code class="nv">$testArray</code><code class="p">,</code> <code class="k">array</code> <code class="p">(</code>
 <code class="s1">'name'</code><code class="p">,</code>
 <code class="s1">'email_address'</code>
 <code class="p">)</code> <code class="p">)</code> <code class="o">?</code> <code class="s2">"did"</code> <code class="o">:</code> <code class="s2">"did not"</code><code class="p">;</code>
 <code class="k">echo</code> <code class="s2">" have all the required fields.&lt;/p&gt;"</code><code class="p">;</code>
<code class="p">}</code>
<code class="cp">?&gt;</code>
<code class="nt">&lt;form</code> <code class="na">action=</code><code class="s">"</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$_SERVER</code><code class="p">[</code><code class="s1">'PHP_SELF'</code><code class="p">];</code> <code class="cp">?&gt;</code><code class="s">"</code> <code class="na">method=</code><code class="s">"POST"</code><code class="nt">&gt;</code>
 <code class="nt">&lt;p&gt;</code>
 Name: <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"text"</code> <code class="na">name=</code><code class="s">"name"</code> <code class="nt">/&gt;&lt;br</code> <code class="nt">/&gt;</code> Email address: <code class="nt">&lt;input</code>
 <code class="na">type=</code><code class="s">"text"</code> <code class="na">name=</code><code class="s">"email_address"</code> <code class="nt">/&gt;&lt;br</code> <code class="nt">/&gt;</code> Age (optional): <code class="nt">&lt;input</code>
 <code class="na">type=</code><code class="s">"text"</code> <code class="na">name=</code><code class="s">"age"</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;/p&gt;</code>
 <code class="nt">&lt;p</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"submit"</code> <code class="na">value=</code><code class="s">"submit"</code> <code class="na">name=</code><code class="s">"submitted"</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;/p&gt;</code>
<code class="nt">&lt;/form&gt;</code></pre>
<p>A variation on <code>in_array()</code> is the <code>array_search()</code> function. While <code>in_array()</code> returns <code>true</code> if the value is found, <code>array_search()</code> returns the key of the element, if found:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$person</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s1">'name'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">Fred</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s1">'age'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">35</code><code class="p">,</code><code> </code><code class="s1">'wife'</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">Wilma</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="nv">$k</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_search</code><code class="p">(</code><code class="s2">"</code><code class="s2">Wilma</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="nv">$person</code><code class="p">);</code><code>

</code><code class="k">echo</code><code class="p">(</code><code class="s2">"</code><code class="s2">Fred's </code><code class="si">{</code><code class="nv">$k</code><code class="si">}</code><code class="s2"> is Wilma</code><code class="se">\n</code><code class="s2">"</code><code class="p">);</code><code>

</code><strong><code class="nx">Fred</code><code class="err">'</code><code class="nx">s</code><code> </code><code class="nx">wife</code><code> </code><code class="nx">is</code><code> </code><code class="nx">Wilma</code></strong></pre>
</div>
<p>The <code>array_search()</code> function also takes the optional third <em>strict</em> argument, which requires that the types of the value being searched for and the value in the array match.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_traversing" id="idm45922777725816"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_values_search" id="idm45922777724552"/></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Sorting"><div class="sect1" id="sorting">
<h1>Sorting</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="sorting arrays" id="ix_sorting_arrays_ch5"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="sorting" id="ix_arrays_sorting_ch5"/>Sorting changes the internal order of elements in an array and optionally rewrites the keys to reflect this new order. For example, you might use sorting to arrange a list of scores from biggest to smallest, to alphabetize a list of names, or to order a set of users based on how many messages they posted.</p>
<p>PHP provides three ways to sort arrays—sorting by keys, sorting by values without changing the keys, or sorting by values and then changing the keys. Each kind of sort can be done in ascending order, descending order, or an order determined by a user-defined function.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_search_values" id="idm45922777729816"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_search_arrays" id="idm45922777728440"/></p>
<section data-type="sect2" data-pdf-bookmark="Sorting One Array at a Time"><div class="sect2" id="sorting_one_array_at_a_time">
<h2>Sorting One Array at a Time</h2>
<p>The functions provided by PHP to sort an array are shown in <a data-type="xref" href="#php_functions_for_sorting_an_array">Table 5-1</a>.<a contenteditable="false" data-type="indexterm" data-primary="uasort function" id="idm45922777703608"/><a contenteditable="false" data-type="indexterm" data-primary="uksort function" id="idm45922777702632"/><a contenteditable="false" data-type="indexterm" data-primary="usort function" id="idm45922777701656"/><a contenteditable="false" data-type="indexterm" data-primary="krsort function" id="idm45922777700680"/><a contenteditable="false" data-type="indexterm" data-primary="asort function" id="idm45922777699704"/></p>
<table class="border" id="php_functions_for_sorting_an_array">
<caption><span class="label">Table 5-1. </span>PHP functions for sorting an array</caption>
<thead>
<tr>
<th>Effect</th>
<th>Ascending</th>
<th>Descending</th>
<th>User-defined order</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sort array by values, then reassign indices starting with 0</td>
<td><code>sort()</code></td>
<td><code>rsort()</code></td>
<td><code>usort()</code></td>
</tr>
<tr>
<td>Sort array by values</td>
<td><code>asort()</code></td>
<td><code>arsort()</code></td>
<td><code>uasort()</code></td>
</tr>
<tr>
<td>Sort array by keys</td>
<td><code>ksort()</code></td>
<td><code>krsort()</code></td>
<td><code>uksort()</code></td>
</tr>
</tbody>
</table>
<p>The <a contenteditable="false" data-type="indexterm" data-primary="sort function" id="idm45922777686472"/><code>sort()</code>, <code>rsort()</code>, and <code>usort()</code> functions are designed to work on indexed arrays because they assign new numeric keys to represent the ordering. They’re useful when you need to answer questions such as “What are the top 10 scores?” and “Who’s the third person in alphabetical order?” The other sort functions can be used on indexed arrays, but you’ll only be able to access the sorted ordering by using traversal constructs such as <code>foreach</code> and <code>next()</code>.</p>
<p>To sort names into ascending alphabetical order, do something like this:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$names</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Cath"</code><code class="p">,</code> <code class="s2">"Angela"</code><code class="p">,</code> <code class="s2">"Brad"</code><code class="p">,</code> <code class="s2">"Mira"</code><code class="p">);</code>
<code class="nb">sort</code><code class="p">(</code><code class="nv">$names</code><code class="p">);</code> <code class="c1">// $names is now "Angela", "Brad", "Cath", "Mira"</code></pre>
<p>To get them in reverse alphabetical order, simply call <a contenteditable="false" data-type="indexterm" data-primary="rsort function" id="idm45922777660552"/><code>rsort()</code> instead of <code>sort()</code>.</p>
<p>If you have an associative array that maps usernames to minutes of login time, you can use <a contenteditable="false" data-type="indexterm" data-primary="arsort function" id="idm45922777658120"/><code>arsort()</code> to display a table of the top three, as shown here:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$logins</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code>
 <code class="s1">'njt'</code> <code class="o">=&gt;</code> <code class="mi">415</code><code class="p">,</code>
 <code class="s1">'kt'</code> <code class="o">=&gt;</code> <code class="mi">492</code><code class="p">,</code>
 <code class="s1">'rl'</code> <code class="o">=&gt;</code> <code class="mi">652</code><code class="p">,</code>
 <code class="s1">'jht'</code> <code class="o">=&gt;</code> <code class="mi">441</code><code class="p">,</code>
 <code class="s1">'jj'</code> <code class="o">=&gt;</code> <code class="mi">441</code><code class="p">,</code>
 <code class="s1">'wt'</code> <code class="o">=&gt;</code> <code class="mi">402</code><code class="p">,</code>
 <code class="s1">'hut'</code> <code class="o">=&gt;</code> <code class="mi">309</code><code class="p">,</code>
<code class="p">);</code>

<code class="nb">arsort</code><code class="p">(</code><code class="nv">$logins</code><code class="p">);</code>

<code class="nv">$numPrinted</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code>

<code class="k">echo</code> <code class="s2">"&lt;table&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code>

<code class="k">foreach</code> <code class="p">(</code><code class="nv">$logins</code> <code class="k">as</code> <code class="nv">$user</code> <code class="o">=&gt;</code> <code class="nv">$time</code><code class="p">)</code> <code class="p">{</code>
 <code class="k">echo</code><code class="p">(</code><code class="s2">"&lt;tr&gt;&lt;td&gt;</code><code class="si">{</code><code class="nv">$user</code><code class="si">}</code><code class="s2">&lt;/td&gt;&lt;td&gt;</code><code class="si">{</code><code class="nv">$time</code><code class="si">}</code><code class="s2">&lt;/td&gt;&lt;/tr&gt;</code><code class="se">\n</code><code class="s2">"</code><code class="p">);</code>

 <code class="k">if</code> <code class="p">(</code><code class="o">++</code><code class="nv">$numPrinted</code> <code class="o">==</code> <code class="mi">3</code><code class="p">)</code> <code class="p">{</code>
 <code class="k">break</code><code class="p">;</code> <code class="c1">// stop after three</code>
 <code class="p">}</code>
<code class="p">}</code>

<code class="k">echo</code> <code class="s2">"&lt;/table&gt;"</code><code class="p">;</code></pre>
<p>If you want that table displayed in ascending order by username, use <a contenteditable="false" data-type="indexterm" data-primary="ksort function" id="idm45922777654904"/><code>ksort()</code> instead.</p>
<p>User-defined ordering requires that you provide a function that takes two values and returns a value that specifies the order of the two values in the sorted array. The function should return <code>1</code> if the first value is greater than the second, <code>−1</code> if the first value is less than the second, and <code>0</code> if the values are the same for the purposes of your custom sort order.</p>
<p>The program in <a data-type="xref" href="#example_five_threedot_sorting_arrays">Example 5-3</a> applies the various sorting functions to the same data.</p>
<div data-type="example" id="example_five_threedot_sorting_arrays">
<h5><span class="label">Example 5-3. </span>Sorting arrays</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="cp">&lt;?php</code>
<code class="k">function</code> <code class="nf">userSort</code><code class="p">(</code><code class="nv">$a</code><code class="p">,</code> <code class="nv">$b</code><code class="p">)</code>
<code class="p">{</code>
 <code class="c1">// smarts is all-important, so sort it first</code>
 <code class="k">if</code> <code class="p">(</code><code class="nv">$b</code> <code class="o">==</code> <code class="s2">"smarts"</code><code class="p">)</code> <code class="p">{</code>
 <code class="k">return</code> <code class="mi">1</code><code class="p">;</code>
 <code class="p">}</code>
 <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nv">$a</code> <code class="o">==</code> <code class="s2">"smarts"</code><code class="p">)</code> <code class="p">{</code>
 <code class="k">return</code> <code class="nx">−1</code><code class="p">;</code>
 <code class="p">}</code>

 <code class="k">return</code> <code class="p">(</code><code class="nv">$a</code> <code class="o">==</code> <code class="nv">$b</code><code class="p">)</code> <code class="o">?</code> <code class="mi">0</code> <code class="o">:</code> <code class="p">((</code><code class="nv">$a</code> <code class="o">&lt;</code> <code class="nv">$b</code><code class="p">)</code> <code class="o">?</code> <code class="nx">−1</code> <code class="o">:</code> <code class="mi">1</code><code class="p">);</code>
<code class="p">}</code>

<code class="nv">$values</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code>
 <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s2">"Buzz Lightyear"</code><code class="p">,</code>
 <code class="s1">'email_address'</code> <code class="o">=&gt;</code> <code class="s2">"buzz@starcommand.gal"</code><code class="p">,</code>
 <code class="s1">'age'</code> <code class="o">=&gt;</code> <code class="mi">32</code><code class="p">,</code>
 <code class="s1">'smarts'</code> <code class="o">=&gt;</code> <code class="s2">"some"</code>
<code class="p">);</code>

<code class="k">if</code> <code class="p">(</code><code class="nv">$_POST</code><code class="p">[</code><code class="s1">'submitted'</code><code class="p">])</code> <code class="p">{</code>
 <code class="nv">$sortType</code> <code class="o">=</code> <code class="nv">$_POST</code><code class="p">[</code><code class="s1">'sort_type'</code><code class="p">];</code>

 <code class="k">if</code> <code class="p">(</code><code class="nv">$sortType</code> <code class="o">==</code> <code class="s2">"usort"</code> <code class="o">||</code> <code class="nv">$sortType</code> <code class="o">==</code> <code class="s2">"uksort"</code> <code class="o">||</code> <code class="nv">$sortType</code> <code class="o">==</code> <code class="s2">"uasort"</code><code class="p">)</code> <code class="p">{</code>
 <code class="nv">$sortType</code><code class="p">(</code><code class="nv">$values</code><code class="p">,</code> <code class="s2">"userSort"</code><code class="p">);</code>
 <code class="p">}</code>
 <code class="k">else</code> <code class="p">{</code>
 <code class="nv">$sortType</code><code class="p">(</code><code class="nv">$values</code><code class="p">);</code>
 <code class="p">}</code>
<code class="p">}</code> <code class="cp">?&gt;</code>
<code class="nt">&lt;form</code> <code class="na">action=</code><code class="s">"</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$_SERVER</code><code class="p">[</code><code class="s1">'PHP_SELF'</code><code class="p">];</code> <code class="cp">?&gt;</code><code class="s"> "</code> <code class="na">method=</code><code class="s">"post"</code><code class="nt">&gt;</code>
 <code class="nt">&lt;p&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code>
 <code class="na">value=</code><code class="s">"sort"</code> <code class="na">checked=</code><code class="s">"checked"</code> <code class="nt">/&gt;</code> Standard<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code> <code class="na">value=</code><code class="s">"rsort"</code> <code class="nt">/&gt;</code> Reverse<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code> <code class="na">value=</code><code class="s">"usort"</code> <code class="nt">/&gt;</code> User-defined<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code> <code class="na">value=</code><code class="s">"ksort"</code> <code class="nt">/&gt;</code> Key<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code> <code class="na">value=</code><code class="s">"krsort"</code> <code class="nt">/&gt;</code> Reverse key<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code>
 <code class="na">value=</code><code class="s">"uksort"</code> <code class="nt">/&gt;</code> User-defined key<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code> <code class="na">value=</code><code class="s">"asort"</code> <code class="nt">/&gt;</code> Value<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code>
 <code class="na">value=</code><code class="s">"arsort"</code> <code class="nt">/&gt;</code> Reverse value<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"sort_type"</code>
 <code class="na">value=</code><code class="s">"uasort"</code> <code class="nt">/&gt;</code> User-defined value<code class="nt">&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;/p&gt;</code>

 <code class="nt">&lt;p</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;&lt;input</code> <code class="na">type=</code><code class="s">"submit"</code> <code class="na">value=</code><code class="s">"Sort"</code> <code class="na">name=</code><code class="s">"submitted"</code> <code class="nt">/&gt;&lt;/p&gt;</code>

 <code class="nt">&lt;p&gt;</code>Values <code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$_POST</code><code class="p">[</code><code class="s1">'submitted'</code><code class="p">]</code> <code class="o">?</code> <code class="s2">"sorted by </code><code class="si">{</code><code class="nv">$sortType</code><code class="si">}</code><code class="s2">"</code> <code class="o">:</code> <code class="s2">"unsorted"</code><code class="p">;</code> 
 <code class="cp">?&gt;</code>:<code class="nt">&lt;/p&gt;</code>

 <code class="nt">&lt;ul&gt;</code>
 <code class="cp">&lt;?php</code> <code class="k">foreach</code> <code class="p">(</code><code class="nv">$values</code> <code class="k">as</code> <code class="nv">$key</code> <code class="o">=&gt;</code> <code class="nv">$value</code><code class="p">)</code> <code class="p">{</code>
 <code class="k">echo</code> <code class="s2">"&lt;li&gt;&lt;b&gt;</code><code class="si">{</code><code class="nv">$key</code><code class="si">}</code><code class="s2">&lt;/b&gt;: </code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="s2">&lt;/li&gt;"</code><code class="p">;</code>
 <code class="p">}</code> <code class="cp">?&gt;</code>
 <code class="nt">&lt;/ul&gt;</code>
<code class="nt">&lt;/form&gt;</code></pre>
</div>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Natural-Order Sorting"><div class="sect2" id="natural_order_sorting">
<h2>Natural-Order Sorting</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="natural-order sorting, arrays" id="idm45922777533640"/>PHP’s built-in sort functions correctly sort strings and <a contenteditable="false" data-type="indexterm" data-primary="numbers" data-secondary="sorting strings containing" id="idm45922777532040"/>numbers, but they don’t correctly sort strings that contain numbers. For example, if you have the filenames <em>ex10.php</em>, <em>ex5.php</em>, and <em>ex1.php</em>, the normal sort functions will rearrange them in this order: <em>ex1.php</em>, <em>ex10.php</em>, <em>ex5.php</em>. To correctly sort strings that contain numbers, use the <a contenteditable="false" data-type="indexterm" data-primary="natsort function" id="idm45922777343448"/><code>natsort()</code> and <a contenteditable="false" data-type="indexterm" data-primary="natcasesort function" id="idm45922777341928"/><code>natcasesort()</code> functions:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$output</code><code> </code><code class="o">=</code><code> </code><code class="nb">natsort</code><code class="p">(</code><em><code class="nx">input</code></em><code class="p">);</code><code>
</code><code class="nv">$output</code><code> </code><code class="o">=</code><code> </code><code class="nb">natcasesort</code><code class="p">(</code><em><code class="nx">input</code></em><code class="p">);</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Sorting Multiple Arrays at Once"><div class="sect2" id="sorting_multiple_arrays_at_once">
<h2>Sorting Multiple Arrays at Once</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="multiple arrays, sorting" id="idm45922777322328"/>The <a contenteditable="false" data-type="indexterm" data-primary="array_multisort function" id="idm45922777321128"/><code>array_multisort()</code> function sorts multiple indexed arrays at once:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">array_multisort</code><code class="p">(</code><em><code class="nx">array1</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="nx">array2</code></em><code class="p">,</code><code> </code><code class="o">...</code><code> </code><code class="p">]);</code></pre>
<p>Pass it a series of arrays and sorting orders (identified by the <code>SORT_ASC</code> or <code>SORT_DESC</code> constants), and it reorders the elements of all the arrays, assigning new indices. It is similar to a join operation on a relational database.</p>
<p>Imagine that you have a lot of people, and several pieces of data on each person:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$names</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"Tom"</code><code class="p">,</code> <code class="s2">"Dick"</code><code class="p">,</code> <code class="s2">"Harriet"</code><code class="p">,</code> <code class="s2">"Brenda"</code><code class="p">,</code> <code class="s2">"Joe"</code><code class="p">);</code>
<code class="nv">$ages</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">25</code><code class="p">,</code> <code class="mi">35</code><code class="p">,</code> <code class="mi">29</code><code class="p">,</code> <code class="mi">35</code><code class="p">,</code> <code class="mi">35</code><code class="p">);</code>
<code class="nv">$zips</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">80522</code><code class="p">,</code> <code class="s1">'02140'</code><code class="p">,</code> <code class="mi">90210</code><code class="p">,</code> <code class="mi">64141</code><code class="p">,</code> <code class="mi">80522</code><code class="p">);</code></pre>
<p>The first element of each array represents a single record—all the information known about Tom. Similarly, the second element constitutes another record—all the information known about Dick. The <code>array_multisort()</code> function reorders the elements of the arrays, preserving the records. That is, if <code>"Dick"</code> ends up first in the <code>$names</code> array after the sort, the rest of Dick’s information will be first in the other arrays too. (Note that we needed to quote Dick’s zip code to prevent it from being interpreted as an octal constant.)</p>
<p>Here’s how to sort the records first ascending by age, then descending by zip code:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nb">array_multisort</code><code class="p">(</code><code class="nv">$ages</code><code class="p">,</code> <code class="nx">SORT_ASC</code><code class="p">,</code> <code class="nv">$zips</code><code class="p">,</code> <code class="nx">SORT_DESC</code><code class="p">,</code> <code class="nv">$names</code><code class="p">,</code> <code class="nx">SORT_ASC</code><code class="p">);</code></pre>
<p>We need to include <code>$names</code> in the function call to ensure that Dick’s name stays with his age and zip code. Printing out the data shows the result of the sort:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">for</code><code> </code><code class="p">(</code><code class="nv">$i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code> </code><code class="nv">$i</code><code> </code><code class="o">&lt;</code><code> </code><code class="nb">count</code><code class="p">(</code><code class="nv">$names</code><code class="p">);</code><code> </code><code class="nv">$i</code><code class="o">++</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="si">{</code><code class="nv">$names</code><code class="p">[</code><code class="nv">$i</code><code class="p">]</code><code class="si">}</code><code class="s2">, </code><code class="si">{</code><code class="nv">$ages</code><code class="p">[</code><code class="nv">$i</code><code class="p">]</code><code class="si">}</code><code class="s2">, </code><code class="si">{</code><code class="nv">$zips</code><code class="p">[</code><code class="nv">$i</code><code class="p">]</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>
</code><strong><code class="nx">Tom</code><code class="p">,</code><code> </code><code class="mi">25</code><code class="p">,</code><code> </code><code class="mi">80522</code></strong><code>
</code><strong><code class="nx">Harriet</code><code class="p">,</code><code> </code><code class="mi">29</code><code class="p">,</code><code> </code><code class="mi">90210</code></strong><code>
</code><strong><code class="nx">Joe</code><code class="p">,</code><code> </code><code class="mi">35</code><code class="p">,</code><code> </code><code class="mi">80522</code></strong><code>
</code><strong><code class="nx">Brenda</code><code class="p">,</code><code> </code><code class="mi">35</code><code class="p">,</code><code> </code><code class="mi">64141</code></strong><code>
</code><strong><code class="nx">Dick</code><code class="p">,</code><code> </code><code class="mi">35</code><code class="p">,</code><code> </code><code class="mo">02140</code></strong></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Reversing Arrays"><div class="sect2" id="reversing_arrays">
<h2>Reversing Arrays</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="reversing order of" id="idm45922776984856"/>The <a contenteditable="false" data-type="indexterm" data-primary="array_reverse function" id="idm45922776999016"/><code>array_reverse()</code> function reverses the internal order of elements in an array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$reversed</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_reverse</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">);</code></pre>
<p>Numeric keys are renumbered starting at 0, while string indices are unaffected. In general, it’s better to use the reverse-order sorting functions instead of sorting and then reversing the order of an array.</p>
<p>The <code>array_flip()</code> function returns an array that reverses the order of each original element’s key-value pair:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$flipped</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_flip</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">);</code></pre>
<p>That is, for each element of the array whose value is a valid key, the element’s value becomes its key and the element’s key becomes its value. For example, if you have an array that maps usernames to home directories, you can use <code>array_flip()</code> to create an array that maps home directories to usernames:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$u2h</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code>
 <code class="s1">'gnat'</code> <code class="o">=&gt;</code> <code class="s2">"/home/staff/nathan"</code><code class="p">,</code>
 <code class="s1">'frank'</code> <code class="o">=&gt;</code> <code class="s2">"/home/action/frank"</code><code class="p">,</code>
 <code class="s1">'petermac'</code> <code class="o">=&gt;</code> <code class="s2">"/home/staff/petermac"</code><code class="p">,</code>
 <code class="s1">'ktatroe'</code> <code class="o">=&gt;</code> <code class="s2">"/home/staff/kevin"</code>
<code class="p">);</code>
<code class="nv">$h2u</code> <code class="o">=</code> <code class="nb">array_flip</code><code class="p">(</code><code class="nv">$u2h</code><code class="p">);</code>

<code class="nv">$user</code> <code class="o">=</code> <code class="nv">$h2u</code><code class="p">[</code><code class="s2">"/home/staff/kevin"</code><code class="p">];</code> <code class="c1">// $user is now 'ktatroe'</code></pre>
<p>Elements whose original values are neither strings nor integers are left alone in the resulting array. The new array lets you discover the key in the original array given its value, but this technique works effectively only when the original array has unique values.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Randomizing Order"><div class="sect2" id="randomizing_order">
<h2>Randomizing Order</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="randomizing order of" id="idm45922776687352"/><a contenteditable="false" data-type="indexterm" data-primary="randomizing order of arrays" id="idm45922776685976"/>To traverse the elements in an array in random order, use the <a contenteditable="false" data-type="indexterm" data-primary="shuffle function" id="idm45922776684776"/><code>shuffle()</code> function. It replaces all existing keys—string or numeric—with consecutive integers starting at 0.</p>
<p>Here’s how to randomize the order of the days of the week:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$weekdays</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">Monday</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Tuesday</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Wednesday</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Thursday</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Friday</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="nb">shuffle</code><code class="p">(</code><code class="nv">$weekdays</code><code class="p">);</code><code>

</code><code class="nb">print_r</code><code class="p">(</code><code class="nv">$weekdays</code><code class="p">);</code><code>

</code><strong><code class="k">Array</code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">Tuesday</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">Thursday</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">Monday</code></strong><code>
 </code><strong><code class="p">[</code><code class="mi">3</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">Friday</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">4</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">Wednesday</code></strong><code>
</code><strong><code class="p">)</code></strong></pre>
<p>Obviously, the order after you <code>shuffle()</code> may not be the same as the sample output here due to the random nature of the function. Unless you are interested in getting multiple random elements from an array without repeating any specific item, using the <code>rand()</code> function to pick an index is more efficient.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_sorting_ch5" id="idm45922776589528"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_sorting_arrays_ch5" id="idm45922776603720"/></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Acting on Entire Arrays"><div class="sect1" id="acting_on_entire_arrays">
<h1>Acting on Entire Arrays</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="acting on entire" id="ix_arrays_entire"/>PHP has several useful built-in functions for modifying or applying an operation to all elements of an array. You can calculate the sum of an array, merge multiple arrays, find the difference between two arrays, and more.</p>
<section data-type="sect2" data-pdf-bookmark="Calculating the Sum of an Array"><div class="sect2" id="calculating_the_sum_of_an_array">
<h2>Calculating the Sum of an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="calculating sum of" id="idm45922776596712"/>The <a contenteditable="false" data-type="indexterm" data-primary="array_sum function" id="idm45922776561576"/><code>array_sum()</code> function adds up the values in an indexed or associative array:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$sum</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_sum</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">);</code></pre>
<p>For example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$scores</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="mi">98</code><code class="p">,</code> <code class="mi">76</code><code class="p">,</code> <code class="mi">56</code><code class="p">,</code> <code class="mi">80</code><code class="p">);</code>
<code class="nv">$total</code> <code class="o">=</code> <code class="nb">array_sum</code><code class="p">(</code><code class="nv">$scores</code><code class="p">);</code> <code class="c1">// $total = 310</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Merging Two Arrays"><div class="sect2" id="merging_two_arrays">
<h2>Merging Two Arrays</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="merging" id="idm45922776519848"/>The <code>array_merge()</code> function intelligently merges two or more arrays:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$merged</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_merge</code><code class="p">(</code><em><code class="nx">array1</code></em><code class="p">,</code><code> </code><em><code class="nx">array2</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="k">array</code><code> </code><code class="o">...</code></em><code> </code><code class="p">])</code></pre>
<p>If a numeric key from an earlier array is repeated, the value from the later array is assigned a new numeric key:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$first</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"hello"</code><code class="p">,</code> <code class="s2">"world"</code><code class="p">);</code> <code class="c1">// 0 =&gt; "hello", 1 =&gt; "world"</code>
<code class="nv">$second</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s2">"exit"</code><code class="p">,</code> <code class="s2">"here"</code><code class="p">);</code> <code class="c1">// 0 =&gt; "exit", 1 =&gt; "here"</code>

<code class="nv">$merged</code> <code class="o">=</code> <code class="nb">array_merge</code><code class="p">(</code><code class="nv">$first</code><code class="p">,</code> <code class="nv">$second</code><code class="p">);</code>
<code class="c1">// $merged = array("hello", "world", "exit", "here")</code></pre>
<p>If a string key from an earlier array is repeated, the earlier value is replaced by the later value:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$first</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'bill'</code> <code class="o">=&gt;</code> <code class="s2">"clinton"</code><code class="p">,</code> <code class="s1">'tony'</code> <code class="o">=&gt;</code> <code class="s2">"danza"</code><code class="p">);</code>
<code class="nv">$second</code> <code class="o">=</code> <code class="k">array</code><code class="p">(</code><code class="s1">'bill'</code> <code class="o">=&gt;</code> <code class="s2">"gates"</code><code class="p">,</code> <code class="s1">'adam'</code> <code class="o">=&gt;</code> <code class="s2">"west"</code><code class="p">);</code>

<code class="nv">$merged</code> <code class="o">=</code> <code class="nb">array_merge</code><code class="p">(</code><code class="nv">$first</code><code class="p">,</code> <code class="nv">$second</code><code class="p">);</code>
<code class="c1">// $merged = array('bill' =&gt; "gates", 'tony' =&gt; "danza", 'adam' =&gt; "west")</code></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Calculating the Difference Between Two Arrays"><div class="sect2" id="calculating_the_difference_between_two">
<h2>Calculating the Difference Between Two Arrays</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="differences between" id="idm45922776339896"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="calculating difference between" id="idm45922776338552"/>The <a contenteditable="false" data-type="indexterm" data-primary="array_diff function" id="idm45922776337080"/><code>array_diff()</code> function calculates the difference between two or more arrays, returning an array with values from the first array that are not present in the others:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$diff</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_diff</code><code class="p">(</code><em><code class="nx">array1</code></em><code class="p">,</code><code> </code><em><code class="nx">array2</code></em><code> </code><code class="p">[,</code><code> </code><em><code class="k">array</code></em><code> </code><code class="o">...</code><code> </code><code class="p">]);</code></pre>
<p>For example:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$a1</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">bill</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">claire</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">ella</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">simon</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">judy</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="nv">$a2</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">jack</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">claire</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">toni</code><code class="s2">"</code><code class="p">);</code><code>
</code><code class="nv">$a3</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">ella</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">simon</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">garfunkel</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="c1">// find values of $a1 not in $a2 or $a3
</code><code class="nv">$difference</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_diff</code><code class="p">(</code><code class="nv">$a1</code><code class="p">,</code><code> </code><code class="nv">$a2</code><code class="p">,</code><code> </code><code class="nv">$a3</code><code class="p">);</code><code>
</code><code class="nb">print_r</code><code class="p">(</code><code class="nv">$difference</code><code class="p">);</code><code>

</code><strong><code class="k">Array</code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">bill</code><code class="s2">"</code><code class="p">,</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">4</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="s2">"</code><code class="s2">judy</code><code class="s2">"</code></strong><code>
</code><strong><code class="p">);</code></strong></pre>
<p>Values are compared using the strict comparison operator <code>===</code>, so <code>1</code> and <code>"1"</code> are considered different. The keys of the first array are preserved, so in <code>$diff</code> the key of <code>"bill"</code> is <code>0</code> and the key of <code>"judy"</code> is <code>4</code>.</p>
<p>In another example, the following code returns the difference of two arrays:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$first</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">two</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">);</code><code>
</code><code class="nv">$second</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">two</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">three</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">four</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="nv">$difference</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_diff</code><code class="p">(</code><code class="nv">$first</code><code class="p">,</code><code> </code><code class="nv">$second</code><code class="p">);</code><code>
</code><code class="nb">print_r</code><code class="p">(</code><code class="nv">$difference</code><code class="p">);</code><code>

</code><strong><code class="k">Array</code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">1</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">3</code></strong><code>
</code><strong><code class="p">)</code></strong></pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Filtering Elements from an Array"><div class="sect2" id="filtering_elements_from_an_array">
<h2>Filtering Elements from an Array</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="filtering elements of" id="idm45922776062552"/>To identify a subset of an array based on its values, use the <a contenteditable="false" data-type="indexterm" data-primary="array_filter function" id="idm45922776074808"/><code>array_filter()</code> function:</p>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$filtered</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_filter</code><code class="p">(</code><em><code class="k">array</code></em><code class="p">,</code><code> </code><em><code class="nx">callback</code></em><code class="p">);</code></pre>
<p>Each value of <em>array</em> is passed to the function named in <em>callback</em>. The returned array contains only those elements of the original array for which the function returns a <code>true</code> value. For example:</p>
<pre data-type="programlisting" data-code-language="php"><strong><code class="k">function</code></strong><code> </code><em><code class="nf">isOdd</code></em><code> </code><code class="p">(</code><code class="nv">$element</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><strong><code class="k">return</code></strong><code> </code><code class="nv">$element</code><code> </code><code class="o">%</code><code> </code><code class="mi">2</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><code class="nv">$numbers</code><code> </code><code class="o">=</code><code> </code><strong><code class="k">array</code></strong><code class="p">(</code><code class="mi">9</code><code class="p">,</code><code> </code><code class="mi">23</code><code class="p">,</code><code> </code><code class="mi">24</code><code class="p">,</code><code> </code><code class="mi">27</code><code class="p">);</code><code>
</code><code class="nv">$odds</code><code> </code><code class="o">=</code><code> </code><em><code class="nb">array_filter</code></em><code class="p">(</code><code class="nv">$numbers</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">isOdd</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="c1">// $odds is array(0 =&gt; 9, 1 =&gt; 23, 3 =&gt; 27)</code></pre>
<p>As you can see, the keys are preserved. This function is most useful with associative arrays.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_entire" id="idm45922775967720"/></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Using Arrays to Implement Data Types"><div class="sect1" id="using_arrays_to_implement_data_types">
<h1>Using Arrays to Implement Data Types</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="data types" id="ix_data_types_arrays"/><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="data types, implementing" id="ix_arrays_data_types_imp"/>Arrays crop up in almost every PHP program. In addition to their obvious purpose of storing collections of values, they’re also used to implement various abstract data types. In this section, we show how to use arrays to implement sets and stacks.</p>
<section data-type="sect2" data-pdf-bookmark="Sets"><div class="sect2" id="sets">
<h2>Sets</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="sets implemented using" id="idm45922775971512"/><a contenteditable="false" data-type="indexterm" data-primary="sets, implementing with arrays" id="idm45922775970136"/>Arrays enable you to implement the basic operations of set theory: union, intersection, and difference. Each set is represented by an array, and various PHP functions implement the set operations. The values in the set are the values in the array—the keys are not used, but they are generally preserved by the operations.</p>
<p>The <em>union</em> of two sets is all the elements from both sets with duplicates removed. The <a contenteditable="false" data-type="indexterm" data-primary="array_merge function" id="idm45922775937816"/><code>array_merge()</code> and <a contenteditable="false" data-type="indexterm" data-primary="array_unique function" id="idm45922775936456"/><code>array_unique()</code> functions let you calculate the union. Here’s how to find the union of two arrays:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">function</code><code> </code><code class="nf">arrayUnion</code><code class="p">(</code><code class="nv">$a</code><code class="p">,</code><code> </code><code class="nv">$b</code><code class="p">)</code><code>
</code><code class="p">{</code><code>
 </code><code class="nv">$union</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_merge</code><code class="p">(</code><code class="nv">$a</code><code class="p">,</code><code> </code><code class="nv">$b</code><code class="p">);</code><code> </code><code class="c1">// duplicates may still exist
</code><code> </code><code class="nv">$union</code><code> </code><code class="o">=</code><code> </code><code class="nb">array_unique</code><code class="p">(</code><code class="nv">$union</code><code class="p">);</code><code>

 </code><code class="k">return</code><code> </code><code class="nv">$union</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><code class="nv">$first</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">two</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">);</code><code>
</code><code class="nv">$second</code><code> </code><code class="o">=</code><code> </code><code class="k">array</code><code class="p">(</code><code class="s2">"</code><code class="s2">two</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">three</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">four</code><code class="s2">"</code><code class="p">);</code><code>

</code><code class="nv">$union</code><code> </code><code class="o">=</code><code> </code><code class="nx">arrayUnion</code><code class="p">(</code><code class="nv">$first</code><code class="p">,</code><code> </code><code class="nv">$second</code><code class="p">);</code><code>
</code><code class="nb">print_r</code><code class="p">(</code><code class="nv">$union</code><code class="p">);</code><code>

</code><strong><code class="k">Array</code><code class="p">(</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">1</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">two</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="mi">3</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">4</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">three</code></strong><code>
</code><strong><code> </code><code class="p">[</code><code class="mi">5</code><code class="p">]</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">four</code></strong><code>
</code><strong><code class="p">)</code></strong></pre>
<p>The <em>intersection</em> of two sets is the set of elements they have in common. PHP’s built-in <a contenteditable="false" data-type="indexterm" data-primary="array_intersect function" id="idm45922775877432"/><code>array_intersect()</code> function takes any number of arrays as arguments and returns an array of those values that exist in each. If multiple keys have the same value, the first key with that value is preserved.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Stacks"><div class="sect2" id="stacks">
<h2>Stacks</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="arrays" data-secondary="stacks implemented using" id="ix_arrays_stacks_imp"/><a contenteditable="false" data-type="indexterm" data-primary="stacks, implementing with arrays" id="ix_stacks_imp_arrays"/>Although not as common in PHP programs as in other programs, one fairly common data type is the last-in first-out (LIFO) stack. We can create stacks using a pair of PHP functions, <a contenteditable="false" data-type="indexterm" data-primary="array_push function" id="idm45922775887176"/><code>array_push()</code> and <a contenteditable="false" data-type="indexterm" data-primary="array_pop function" id="idm45922775890232"/><code>array_pop()</code>. The <code>array_push()</code> function is identical to an assignment to <code>$array[]</code>. We use <code>array_push()</code> because it accentuates the fact that we’re working with stacks, and the parallelism with <code>array_pop()</code> makes our code easier to read. There are also <a contenteditable="false" data-type="indexterm" data-primary="array_shift function" id="idm45922775896200"/><code>array_shift()</code> and <a contenteditable="false" data-type="indexterm" data-primary="array_unshift function" id="idm45922775894680"/><code>array_unshift()</code> functions for treating an array like a queue.</p>
<p>Stacks are particularly useful for maintaining state. <a data-type="xref" href="#example_five_fourdot_state_debugger">Example 5-4</a> provides a simple state debugger that allows you to print out a list of which functions have been called up to this point (i.e., the <em>stack trace</em>).</p>
<div data-type="example" id="example_five_fourdot_state_debugger">
<h5><span class="label">Example 5-4. </span>State debugger</h5>
<pre data-type="programlisting" data-code-language="php"><code class="nv">$callTrace</code> <code class="o">=</code> <code class="k">array</code><code class="p">();</code>

<code class="k">function</code> <code class="nf">enterFunction</code><code class="p">(</code><code class="nv">$name</code><code class="p">)</code>
<code class="p">{</code>
 <code class="k">global</code> <code class="nv">$callTrace</code><code class="p">;</code>
 <code class="nv">$callTrace</code><code class="p">[]</code> <code class="o">=</code> <code class="nv">$name</code><code class="p">;</code>

 <code class="k">echo</code> <code class="s2">"Entering </code><code class="si">{</code><code class="nv">$name</code><code class="si">}</code><code class="s2"> (stack is now: "</code> <code class="o">.</code> <code class="nb">join</code><code class="p">(</code><code class="s1">' -&gt; '</code><code class="p">,</code> <code class="nv">$callTrace</code><code class="p">)</code> <code class="o">.</code> <code class="s2">")&lt;br /&gt;"</code><code class="p">;</code>
<code class="p">}</code>

<code class="k">function</code> <code class="nf">exitFunction</code><code class="p">()</code>
<code class="p">{</code>
 <code class="k">echo</code> <code class="s2">"Exiting&lt;br /&gt;"</code><code class="p">;</code>

 <code class="k">global</code> <code class="nv">$callTrace</code><code class="p">;</code>
 <code class="nb">array_pop</code><code class="p">(</code><code class="nv">$callTrace</code><code class="p">);</code>
<code class="p">}</code>

<code class="k">function</code> <code class="nf">first</code><code class="p">()</code>
<code class="p">{</code>
 <code class="nx">enterFunction</code><code class="p">(</code><code class="s2">"first"</code><code class="p">);</code>
 <code class="nx">exitFunction</code><code class="p">();</code>
<code class="p">}</code>

<code class="k">function</code> <code class="nf">second</code><code class="p">()</code>
<code class="p">{</code>
 <code class="nx">enterFunction</code><code class="p">(</code><code class="s2">"second"</code><code class="p">);</code>
 <code class="nx">first</code><code class="p">();</code>
 <code class="nx">exitFunction</code><code class="p">();</code>
<code class="p">}</code>

<code class="k">function</code> <code class="nf">third</code><code class="p">()</code>
<code class="p">{</code>
 <code class="nx">enterFunction</code><code class="p">(</code><code class="s2">"third"</code><code class="p">);</code>
 <code class="nx">second</code><code class="p">();</code>
 <code class="nx">first</code><code class="p">();</code>
 <code class="nx">exitFunction</code><code class="p">();</code>
<code class="p">}</code>

<code class="nx">first</code><code class="p">();</code>
<code class="nx">third</code><code class="p">();</code></pre>
</div>
<p>Here’s the output from <a data-type="xref" href="#example_five_fourdot_state_debugger">Example 5-4</a>:<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_stacks_imp" id="idm45922775508904"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_stacks_imp_arrays" id="idm45922775507624"/></p>
<pre data-type="programlisting" data-code-language="php"><strong><code class="nx">Entering</code><code> </code><code class="nx">first</code><code> </code><code class="p">(</code><code class="nx">stack</code><code> </code><code class="nx">is</code><code> </code><code class="nx">now</code><code class="o">:</code><code> </code><code class="nx">first</code><code class="p">)</code></strong><code>
</code><strong><code class="nx">Exiting</code></strong><code>
</code><strong><code class="nx">Entering</code><code> </code><code class="nx">third</code><code> </code><code class="p">(</code><code class="nx">stack</code><code> </code><code class="nx">is</code><code> </code><code class="nx">now</code><code class="o">:</code><code> </code><code class="nx">third</code><code class="p">)</code></strong><code>
</code><strong><code class="nx">Entering</code><code> </code><code class="nx">second</code><code> </code><code class="p">(</code><code class="nx">stack</code><code> </code><code class="nx">is</code><code> </code><code class="nx">now</code><code class="o">:</code><code> </code><code class="nx">third</code><code> </code><code class="o">-&gt;</code><code> </code><code class="na">second</code><code class="p">)</code></strong><code>
</code><strong><code class="nx">Entering</code><code> </code><code class="nx">first</code><code> </code><code class="p">(</code><code class="nx">stack</code><code> </code><code class="nx">is</code><code> </code><code class="nx">now</code><code class="o">:</code><code> </code><code class="nx">third</code><code> </code><code class="o">-&gt;</code><code> </code><code class="na">second</code><code> </code><code class="o">-&gt;</code><code> </code><code class="na">first</code><code class="p">)</code></strong><code>
</code><strong><code class="nx">Exiting</code></strong><code>
</code><strong><code class="nx">Exiting</code></strong><code>
</code><strong><code class="nx">Entering</code><code> </code><code class="nx">first</code><code> </code><code class="p">(</code><code class="nx">stack</code><code> </code><code class="nx">is</code><code> </code><code class="nx">now</code><code class="o">:</code><code> </code><code class="nx">third</code><code> </code><code class="o">-&gt;</code><code> </code><code class="na">first</code><code class="p">)</code></strong><code>
</code><strong><code class="nx">Exiting</code></strong><code>
</code><strong><code class="nx">Exiting</code></strong></pre>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Implementing the Iterator Interface"><div class="sect1" id="implementing_the_iterator_interface">
<h1>Implementing the Iterator Interface</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="Iterator interface" id="ix_iterator_imp"/>Using the <a contenteditable="false" data-type="indexterm" data-primary="foreach statement" id="ix_foreach_iterator"/><a contenteditable="false" data-type="indexterm" data-primary="loop statements" data-secondary="foreach statement" id="ix_loop_foreach_iterator"/><a contenteditable="false" data-type="indexterm" data-primary="objects" data-secondary="iterating over" id="ix_objects_iterating_ch5"/><code>foreach</code> construct, you can iterate not only over arrays, but also over instances of classes that implement the <code>Iterator</code> interface (see <a data-type="xref" href="ch06.xhtml#objects-id00032">Chapter 6</a> for more information on objects and interfaces). To implement the <code>Iterator</code> interface, you must implement five methods on your class:</p>
<dl>
<dt><code>current()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="current method" id="idm45922775648984"/>Returns the element currently pointed at by the iterator.</dd>
<dt><code>key()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="key method" id="idm45922775646888"/>Returns the key for the element currently pointed at by the iterator.</dd>
<dt><code>next()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="next method" id="idm45922775644792"/>Moves the iterator to the next element in the object and returns it.</dd>
<dt><code>rewind()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="rewind method" id="idm45922775642696"/>Moves the iterator to the first element in the array.</dd>
<dt><code>valid()</code></dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="valid method" id="idm45922775640600"/>Returns <code>true</code> if the iterator currently points at a valid element, and <code>false</code> <span class="keep-together">otherwise.</span></dd>
</dl>
<p><a data-type="xref" href="#example_five_fivedot_iterator_interface">Example 5-5</a> reimplements a simple iterator class containing a static array of data.</p>
<div data-type="example" id="example_five_fivedot_iterator_interface">
<h5><span class="label">Example 5-5. </span>Iterator interface</h5>
<pre data-type="programlisting" data-code-language="php"><code class="k">class</code><code> </code><code class="nc">BasicArray</code><code> </code><code class="k">implements</code><code> </code><code class="nx">Iterator</code><code>
</code><code class="p">{</code><code>
 </code><code class="k">private</code><code> </code><code class="nv">$position</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code>
 </code><code class="k">private</code><code> </code><code class="nv">$array</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s2">"</code><code class="s2">first</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">second</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">third</code><code class="s2">"</code><code class="p">];</code><code>

 </code><code class="k">public</code><code> </code><code class="k">function</code><code> </code><code class="nf-Magic">__construct</code><code class="p">()</code><code>
 </code><code class="p">{</code><code>
 </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">position</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code>
 </code><code class="p">}</code><code>

 </code><code class="k">public</code><code> </code><code class="k">function</code><code> </code><code class="nf">rewind</code><code class="p">()</code><code>
 </code><code class="p">{</code><code>
 </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">position</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="p">;</code><code>
 </code><code class="p">}</code><code>

 </code><code class="k">public</code><code> </code><code class="k">function</code><code> </code><code class="nf">current</code><code class="p">()</code><code>
 </code><code class="p">{</code><code>
 </code><code class="k">return</code><code> </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">array</code><code class="p">[</code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">position</code><code class="p">];</code><code>
 </code><code class="p">}</code><code>

 </code><code class="k">public</code><code> </code><code class="k">function</code><code> </code><code class="nf">key</code><code class="p">()</code><code>
 </code><code class="p">{</code><code>
 </code><code class="k">return</code><code> </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">position</code><code class="p">;</code><code>
 </code><code class="p">}</code><code>

 </code><code class="k">public</code><code> </code><code class="k">function</code><code> </code><code class="nf">next</code><code class="p">()</code><code>
 </code><code class="p">{</code><code>
 </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">position</code><code> </code><code class="o">+=</code><code> </code><code class="mi">1</code><code class="p">;</code><code>
 </code><code class="p">}</code><code>

 </code><code class="k">public</code><code> </code><code class="k">function</code><code> </code><code class="nf">valid</code><code class="p">()</code><code>
 </code><code class="p">{</code><code>
 </code><code class="k">return</code><code> </code><code class="nb">isset</code><code class="p">(</code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">array</code><code class="p">[</code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">position</code><code class="p">]);</code><code>
 </code><code class="p">}</code><code>
</code><code class="p">}</code><code>

</code><code class="nv">$basicArray</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="nx">BasicArray</code><code class="p">;</code><code>

</code><code class="k">foreach</code><code> </code><code class="p">(</code><code class="nv">$basicArray</code><code> </code><code class="k">as</code><code> </code><code class="nv">$value</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><code class="k">foreach</code><code> </code><code class="p">(</code><code class="nv">$basicArray</code><code> </code><code class="k">as</code><code> </code><code class="nv">$key</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nv">$value</code><code class="p">)</code><code> </code><code class="p">{</code><code>
 </code><code class="k">echo</code><code> </code><code class="s2">"</code><code class="si">{</code><code class="nv">$key</code><code class="si">}</code><code class="s2"> =&gt; </code><code class="si">{</code><code class="nv">$value</code><code class="si">}</code><code class="se">\n</code><code class="s2">"</code><code class="p">;</code><code>
</code><code class="p">}</code><code>

</code><strong><code class="nx">first</code></strong><code>
</code><strong><code class="nx">second</code></strong><code>
</code><strong><code class="nx">third</code></strong><code>
</code><strong><code> </code></strong><code>
</code><strong><code class="mi">0</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">first</code></strong><code>
</code><strong><code class="mi">1</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">second</code></strong><code>
</code><strong><code class="mi">2</code><code> </code><code class="o">=&gt;</code><code> </code><code class="nx">third</code></strong></pre>
</div>
<p>When you implement the <code>Iterator</code> interface on a class, it allows you only to traverse elements in instances of that class using the <code>foreach</code> construct; it does not allow you to treat those instances as arrays or parameters to other methods. This, for example, rewinds the <code>Iterator</code> pointing at <code>$trie</code>’s properties using the built-in <code>rewind()</code> function instead of calling the <code>rewind()</code> method on <code>$trie</code>:</p>
<pre data-type="programlisting" data-code-language="php"><code class="k">class</code> <code class="nc">Trie</code> <code class="k">implements</code> <code class="nx">Iterator</code>
<code class="p">{</code>
 <code class="k">const</code> <code class="no">POSITION_LEFT</code> <code class="o">=</code> <code class="s2">"left"</code><code class="p">;</code>
 <code class="k">const</code> <code class="no">POSITION_THIS</code> <code class="o">=</code> <code class="s2">"this"</code><code class="p">;</code>
 <code class="k">const</code> <code class="no">POSITION_RIGHT</code> <code class="o">=</code> <code class="s2">"right"</code><code class="p">;</code>

 <code class="k">var</code> <code class="nv">$leftNode</code><code class="p">;</code>
 <code class="k">var</code> <code class="nv">$rightNode</code><code class="p">;</code>

 <code class="k">var</code> <code class="nv">$position</code><code class="p">;</code>

 <code class="c1">// implement Iterator methods here...</code>
<code class="p">}</code>

<code class="nv">$trie</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Trie</code><code class="p">();</code>

<code class="nb">rewind</code><code class="p">(</code><code class="nv">$trie</code><code class="p">);</code></pre>

<p>The optional SPL library provides a wide variety of useful iterators, including filesystem directory, tree, and regex matching iterators.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_arrays_ch5" id="idm45922775150264"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_iterator_imp" id="idm45922775198872"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_foreach_iterator" id="idm45922775197496"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_loop_foreach_iterator" id="idm45922775196120"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_objects_iterating_ch5" id="idm45922775194776"/></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What’s Next"><div class="sect1" id="whatapostrophes_next-id00063">
<h1>What’s Next</h1>
<p>The last three chapters—on functions, strings, and arrays—have covered a lot of foundational ground. The next chapter builds on this foundation and takes you into the newish world of objects and object-oriented programming (OOP). Some argue that OOP is the better way to program, as it is more encapsulated and reusable than procedural programming. That debate continues, but once you get into the object-oriented approach to programming and understand its benefits, you can make an informed decision about how you’ll program in the future. That said, the overall trend in the programming world is to use OOP as much as possible.</p>
<p>One word of caution before you continue: there are many situations where a novice OOP programmer can get lost, so be sure you’re really comfortable with OOP before you do anything major or mission-critical with it.</p>
</div></section>
</div></section></div>



  </body></html>