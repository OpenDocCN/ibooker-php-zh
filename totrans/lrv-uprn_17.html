<html><head></head><body><section data-pdf-bookmark="Chapter 17. Helpers and Collections" data-type="chapter" epub:type="chapter"><div class="chapter" id="helpers_and_collections">&#13;
<h1><span class="label">Chapter 17. </span>Helpers and Collections</h1>&#13;
&#13;
&#13;
<p>We’ve already covered many global functions throughout the book: these are little helpers that make it easier to perform common tasks, like <code>dispatch()</code> for jobs, <code>event()</code> for events, and <code>app()</code> for dependency resolution. We also talked a bit about Laravel’s collections, or arrays on steroids, in <a data-type="xref" href="ch05.html#database_and_eloquent">Chapter 5</a>.</p>&#13;
&#13;
<p>In this chapter we’ll cover some of the more common and powerful helpers and some of the basics of programming with collections. Many of the “helpers” in this section that once were global functions are now calls on facades; <code>array_first()</code>, the global function, has been replaced by <code>Arr::first()</code>, the auth call. So while these aren’t all <em>technically</em> helpers, as they’re not all global functions anymore, they still have the same position in our toolbox.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Helpers" data-type="sect1"><div class="sect1" id="id541">&#13;
<h1>Helpers</h1>&#13;
&#13;
<p>You can find a full list of the<a data-primary="helpers" data-secondary="list of" data-type="indexterm" id="id1963"/> helpers Laravel offers in the <a href="https://oreil.ly/vssfi">helpers docs</a>, but we’re going to cover a few of the most useful functions here.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Arrays" data-type="sect2"><div class="sect2" id="id343">&#13;
<h2>Arrays</h2>&#13;
&#13;
<p>PHP’s native<a data-primary="helpers" data-secondary="arrays" data-type="indexterm" id="Harray17"/><a data-primary="array helpers" data-type="indexterm" id="arrayhelp17"/> array manipulation functions give us a lot of power, but sometimes there are standard manipulations we want to make that require unwieldy loops <span class="keep-together">and logic</span> checks. Laravel’s array helpers make a few common array manipulations &#13;
<span class="keep-together">much simpler</span>:</p>&#13;
<dl>&#13;
<dt><code>Arr::first(<em>$array, $callback, $default = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the first array value that passes a test, defined in a callback closure. You can optionally set the default value as the third parameter. Here’s an example:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$people</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">[</code>&#13;
        <code class="s1">'email'</code> <code class="o">=&gt;</code> <code class="s1">'m@me.com'</code><code class="p">,</code>&#13;
        <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'Malcolm Me'</code>&#13;
    <code class="p">],</code>&#13;
    <code class="p">[</code>&#13;
        <code class="s1">'email'</code> <code class="o">=&gt;</code> <code class="s1">'j@jo.com'</code><code class="p">,</code>&#13;
        <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'James Jo'</code>&#13;
    <code class="p">],</code>&#13;
<code class="p">];</code>&#13;
&#13;
 <code class="nv">$value</code> <code class="o">=</code> <code class="nx">Arr</code><code class="o">::</code><code class="na">first</code><code class="p">(</code><code class="nv">$people</code><code class="p">,</code> <code class="k">function</code> <code class="p">(</code><code class="nv">$person</code><code class="p">,</code> <code class="nv">$key</code><code class="p">)</code> <code class="p">{</code>&#13;
     <code class="k">return</code> <code class="nv">$person</code><code class="p">[</code><code class="s1">'email'</code><code class="p">]</code> <code class="o">==</code> <code class="s1">'j@jo.com'</code><code class="p">;</code>&#13;
 <code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>Arr::get(<em>$array, $key, $default = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Makes it easy to get values out of an array, with two added benefits: it won’t throw an error if you ask for a key that doesn’t exist (and you can provide defaults with the third parameter), and you can use dot notation to traverse nested arrays. For example:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'address'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'line1'</code> <code class="o">=&gt;</code> <code class="s1">'123 Main St.'</code><code class="p">]]];</code>&#13;
&#13;
<code class="nv">$line1</code> <code class="o">=</code> <code class="nx">Arr</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">'owner.address.line1'</code><code class="p">,</code> <code class="s1">'No address'</code><code class="p">);</code>&#13;
<code class="nv">$line2</code> <code class="o">=</code> <code class="nx">Arr</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">'owner.address.line2'</code><code class="p">);</code></pre>&#13;
</dd>&#13;
<dt><code>Arr::has(<em>$array, $keys</em>)</code></dt>&#13;
<dd>&#13;
<p>Makes it easy to check whether an array has a particular value set using dot notation for traversing nested arrays. The <code>$keys</code> parameter can be a single entry or an array of entries, which will check whether every entry in the array exists:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'address'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'line1'</code> <code class="o">=&gt;</code> <code class="s1">'123 Main St.'</code><code class="p">]]];</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nx">Arr</code><code class="o">::</code><code class="na">has</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">'owner.address.line2'</code><code class="p">))</code> <code class="p">{</code>&#13;
    <code class="c1">// Do stuff</code>&#13;
<code class="p">}</code></pre>&#13;
</dd>&#13;
<dt><code>Arr::hasAny(<em>$array, $keys</em>)</code></dt>&#13;
<dd>&#13;
<p>Makes it easy to check whether an array has any of the specified keys using dot notation for traversing nested arrays. The <code>$keys</code> parameter can be a single key or an array of keys, which will check whether any of the keys exists in the array:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'address'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'line1'</code> <code class="o">=&gt;</code> <code class="s1">'123 Main St.'</code><code class="p">]]];</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nx">Arr</code><code class="o">::</code><code class="na">hasAny</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="p">[</code><code class="s1">'owner.address'</code><code class="p">,</code> <code class="s1">'default.address'</code><code class="p">]))</code> <code class="p">{</code>&#13;
    <code class="c1">// Do stuff</code>&#13;
<code class="p">}</code></pre>&#13;
</dd>&#13;
</dl>&#13;
<dl class="pagebreak-before">&#13;
<dt><code>Arr::pluck(<em>$array, $value, $key = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns an array of the values corresponding to the provided key:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'id'</code> <code class="o">=&gt;</code> <code class="mi">4</code><code class="p">,</code> <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'Tricia'</code><code class="p">]],</code>&#13;
    <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'id'</code> <code class="o">=&gt;</code> <code class="mi">7</code><code class="p">,</code> <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'Kimberly'</code><code class="p">]],</code>&#13;
<code class="p">];</code>&#13;
&#13;
<code class="nv">$array</code> <code class="o">=</code> <code class="nx">Arr</code><code class="o">::</code><code class="na">pluck</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">'owner.name'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Returns ['Tricia', 'Kimberly'];</code></pre>&#13;
&#13;
<p>If you want the returned array to be keyed by another value from the source array, you can pass that value’s dot-notated reference as the third parameter:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="nx">Arr</code><code class="o">::</code><code class="na">pluck</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">'owner.name'</code><code class="p">,</code> <code class="s1">'owner.id'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Returns [4 =&gt; 'Tricia', 7 =&gt; 'Kimberly'];</code></pre>&#13;
</dd>&#13;
<dt><code>Arr::random(<em>$array, $num = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a random item from the provided array. If you provide a <code>$num</code> parameter, it will pull an array of that many results, randomly selected:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'id'</code> <code class="o">=&gt;</code> <code class="mi">4</code><code class="p">,</code> <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'Tricia'</code><code class="p">]],</code>&#13;
    <code class="p">[</code><code class="s1">'owner'</code> <code class="o">=&gt;</code> <code class="p">[</code><code class="s1">'id'</code> <code class="o">=&gt;</code> <code class="mi">7</code><code class="p">,</code> <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'Kimberly'</code><code class="p">]],</code>&#13;
<code class="p">];</code>&#13;
&#13;
<code class="nv">$randomOwner</code> <code class="o">=</code> <code class="nx">Arr</code><code class="o">::</code><code class="na">random</code><code class="p">(</code><code class="nv">$array</code><code class="p">);</code></pre>&#13;
</dd>&#13;
<dt><code>Arr::join(<em>$array, $glue, $finalGlue = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Joins the items from <code>$array</code> into a string, adding <code>$glue</code> between them. If <code>$finalGlue</code> is provided, it is added before the last element of the array, instead<a data-primary="" data-startref="Harray17" data-type="indexterm" id="id1964"/><a data-primary="" data-startref="arrayhelp17" data-type="indexterm" id="id1965"/> of  <code>$glue</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$array</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'Malcolm'</code><code class="p">,</code> <code class="s1">'James'</code><code class="p">,</code> <code class="s1">'Tricia'</code><code class="p">,</code> <code class="s1">'Kimberly'</code><code class="p">];</code>&#13;
&#13;
<code class="nx">Arr</code><code class="o">::</code><code class="na">join</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">', '</code><code class="p">);</code>&#13;
<code class="c1">// Malcolm, James, Tricia, Kimberly</code>&#13;
&#13;
<code class="nx">Arr</code><code class="o">::</code><code class="na">join</code><code class="p">(</code><code class="nv">$array</code><code class="p">,</code> <code class="s1">', '</code><code class="p">,</code> <code class="s1">', and'</code><code class="p">);</code>&#13;
<code class="c1">// Malcolm, James, Tricia, and Kimberly</code></pre>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Strings" data-type="sect2"><div class="sect2" id="id344">&#13;
<h2>Strings</h2>&#13;
&#13;
<p>Just<a data-primary="helpers" data-secondary="strings" data-type="indexterm" id="Hstrings17"/><a data-primary="string helpers" data-type="indexterm" id="strhelpers17"/> like with arrays, there are some string manipulations and checks that are possible with native PHP functions, but that can be cumbersome. Laravel’s helpers make a few common string operations faster and simpler:</p>&#13;
<dl>&#13;
<dt><code>e(<em>$string</em>)</code></dt>&#13;
<dd>&#13;
<p>An alias to <code>htmlentities</code>(); prepares a (often user-provided) string for safe echoing on an HTML page. For &#13;
<span class="keep-together">example</span>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">e</code><code class="p">(</code><code class="s1">'&lt;script&gt;do something nefarious&lt;/script&gt;'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Returns &amp;lt;script&amp;gt;do something nefarious&amp;lt;/script&amp;gt;</code></pre>&#13;
</dd>&#13;
<dt><code>str(<em>$string</em>)</code></dt>&#13;
<dd>&#13;
<p>Used for casting stringables; is an alias for <code>Str::of(<em>$string</em>)</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">str</code><code class="p">(</code><code class="s1">'http'</code><code class="p">)</code> <code class="o">===</code> <code class="nx">Str</code><code class="o">::</code><code class="na">of</code><code class="p">(</code><code class="s1">'http'</code><code class="p">);</code>&#13;
<code class="c1">// true</code></pre>&#13;
</dd>&#13;
<dt><code>Str::startsWith(<em>$haystack, $needle</em>)</code>, <code>Str::endsWith(<em>$haystack, $needle</em>)</code>, <code>Str::contains(<em>$haystack, $needle, $ignoreCase</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a Boolean indicating whether the provided <code>$haystack</code> string starts with, ends with, or contains the provided <code>$needle</code> string:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">if</code> <code class="p">(</code><code class="nx">Str</code><code class="o">::</code><code class="na">startsWith</code><code class="p">(</code><code class="nv">$url</code><code class="p">,</code> <code class="s1">'https'</code><code class="p">))</code> <code class="p">{</code>&#13;
    <code class="c1">// Do something</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nx">Str</code><code class="o">::</code><code class="na">endsWith</code><code class="p">(</code><code class="nv">$abstract</code><code class="p">,</code> <code class="s1">'...'</code><code class="p">))</code> <code class="p">{</code>&#13;
    <code class="c1">// Do something</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nx">Str</code><code class="o">::</code><code class="na">contains</code><code class="p">(</code><code class="nv">$description</code><code class="p">,</code> <code class="s1">'1337 h4x0r'</code><code class="p">))</code> <code class="p">{</code>&#13;
    <code class="c1">// Run away</code>&#13;
<code class="p">}</code></pre>&#13;
</dd>&#13;
<dt><code>Str::limit(<em>$value, $limit = 100, $end = '...'</em>)</code></dt>&#13;
<dd>&#13;
<p>Limits a string to the provided number of characters. If the string’s length is less than <span class="keep-together">the limit,</span> just returns the string; if it’s greater, trims to the number of characters provided and then appends either <code>...</code> or the provided <code>$end</code> string. For &#13;
<span class="keep-together">example</span>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$abstract</code> <code class="o">=</code> <code class="nx">Str</code><code class="o">::</code><code class="na">limit</code><code class="p">(</code><code class="nv">$loremIpsum</code><code class="p">,</code> <code class="mi">30</code><code class="p">);</code>&#13;
<code class="c1">// Returns "Lorem ipsum dolor sit amet, co..."</code>&#13;
&#13;
<code class="nv">$abstract</code> <code class="o">=</code> <code class="nx">Str</code><code class="o">::</code><code class="na">limit</code><code class="p">(</code><code class="nv">$loremIpsum</code><code class="p">,</code> <code class="mi">30</code><code class="p">,</code> <code class="s2">"&amp;hellip;"</code><code class="p">);</code>&#13;
<code class="c1">// Returns "Lorem ipsum dolor sit amet, co&amp;hellip;"</code></pre>&#13;
</dd>&#13;
<dt><code>Str::words(<em>$value, $words = 100, $end = '...'</em>)</code></dt>&#13;
<dd>&#13;
<p>Limits a string to the provided number of words. If the string’s length is less than the number of words, just returns the string; if it’s greater, trims to the number of words provided and then appends either <code>...</code> or the provided <code>$end</code> string. For example:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$abstract</code> <code class="o">=</code> <code class="nx">Str</code><code class="o">::</code><code class="na">words</code><code class="p">(</code><code class="nv">$loremIpsum</code><code class="p">,</code> <code class="mi">3</code><code class="p">);</code>&#13;
<code class="c1">// Returns "Lorem ipsum dolor..."</code>&#13;
&#13;
<code class="nv">$abstract</code> <code class="o">=</code> <code class="nx">Str</code><code class="o">::</code><code class="na">words</code><code class="p">(</code><code class="nv">$loremIpsum</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="s2">" &amp;hellip;"</code><code class="p">);</code>&#13;
<code class="c1">// Returns "Lorem ipsum dolor sit amet, &amp;hellip;"</code></pre>&#13;
</dd>&#13;
<dt><code>Str::before(<em>$subject, $search</em>)</code>, <code>Str::after(<em>$subject, $search</em>)</code>, <code>Str::beforeLast(<em>$subject, $search</em>)</code>, <code>Str::afterLast(<em>$subject, $search</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the subsections of a string before or after another string, or the last instance of another string. For example:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Str</code><code class="o">::</code><code class="na">before</code><code class="p">(</code><code class="s1">'Nice to meet you!'</code><code class="p">,</code> <code class="s1">'meet you'</code><code class="p">);</code>&#13;
<code class="c1">// Returns "Nice to "</code>&#13;
&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">after</code><code class="p">(</code><code class="s1">'Nice to meet you!'</code><code class="p">,</code> <code class="s1">'Nice'</code><code class="p">);</code>&#13;
<code class="c1">// Returns " to meet you!"</code>&#13;
&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">beforeLast</code><code class="p">(</code><code class="s1">'App\Notifications\WelcomeNotification'</code><code class="p">,</code> <code class="s1">'\\'</code><code class="p">);</code>&#13;
<code class="c1">// Returns "App\Notifications"</code>&#13;
&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">afterLast</code><code class="p">(</code><code class="s1">'App\Notifications\WelcomeNotification'</code><code class="p">,</code> <code class="s1">'\\'</code><code class="p">);</code>&#13;
<code class="c1">// Returns "WelcomeNotification"</code></pre>&#13;
</dd>&#13;
<dt><code>Str::is(<em>$pattern, $value</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a Boolean indicating whether or not a given string matches a given pattern. <span class="keep-together">The pattern</span> can be a regex pattern, or you can use asterisks to indicate wildcard positions:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Str</code><code class="o">::</code><code class="na">is</code><code class="p">(</code><code class="s1">'*.dev'</code><code class="p">,</code> <code class="s1">'myapp.dev'</code><code class="p">);</code>       <code class="c1">// true</code>&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">is</code><code class="p">(</code><code class="s1">'*.dev'</code><code class="p">,</code> <code class="s1">'myapp.dev.co.uk'</code><code class="p">);</code> <code class="c1">// false</code>&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">is</code><code class="p">(</code><code class="s1">'*dev*'</code><code class="p">,</code> <code class="s1">'myapp.dev'</code><code class="p">);</code>       <code class="c1">// true</code>&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">is</code><code class="p">(</code><code class="s1">'*myapp*'</code><code class="p">,</code> <code class="s1">'www.myapp.dev'</code><code class="p">);</code> <code class="c1">// true</code>&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">is</code><code class="p">(</code><code class="s1">'my*app'</code><code class="p">,</code> <code class="s1">'myfantasticapp'</code><code class="p">);</code> <code class="c1">// true</code>&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">is</code><code class="p">(</code><code class="s1">'my*app'</code><code class="p">,</code> <code class="s1">'myapp'</code><code class="p">);</code>          <code class="c1">// true</code></pre>&#13;
</dd>&#13;
</dl>&#13;
<div data-type="tip"><h1>How to Pass a Regex to Str::is()</h1>&#13;
<p>If<a data-primary="regex patterns, passing to strings" data-type="indexterm" id="id1966"/> you’re curious about what regex patterns are acceptable to pass to <code>Str::is()</code>, check out the method definition here (shortened for space) to see how it works:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">public</code> <code class="k">function</code> <code class="nf">is</code><code class="p">(</code><code class="nv">$pattern</code><code class="p">,</code> <code class="nv">$value</code><code class="p">)</code>&#13;
<code class="p">{</code>&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nv">$pattern</code> <code class="o">==</code> <code class="nv">$value</code><code class="p">)</code> <code class="k">return</code> <code class="k">true</code><code class="p">;</code>&#13;
&#13;
    <code class="nv">$pattern</code> <code class="o">=</code> <code class="nb">preg_quote</code><code class="p">(</code><code class="nv">$pattern</code><code class="p">,</code> <code class="s1">'#'</code><code class="p">);</code>&#13;
    <code class="nv">$pattern</code> <code class="o">=</code> <code class="nx">Str</code><code class="o">::</code><code class="na">replace</code><code class="p">(</code><code class="s1">'\*'</code><code class="p">,</code> <code class="s1">'.*'</code><code class="p">,</code> <code class="nv">$pattern</code><code class="p">);</code>&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nb">preg_match</code><code class="p">(</code><code class="s1">'#^'</code><code class="o">.</code><code class="nv">$pattern</code><code class="o">.</code><code class="s1">'\z#u'</code><code class="p">,</code> <code class="nv">$value</code><code class="p">)</code> <code class="o">===</code> <code class="mi">1</code><code class="p">)</code> <code class="p">{</code>&#13;
        <code class="k">return</code> <code class="k">true</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
&#13;
    <code class="k">return</code> <code class="k">false</code><code class="p">;</code>&#13;
<code class="p">}</code></pre>&#13;
</div>&#13;
<dl>&#13;
<dt><code>Str::isUuid(<em>$value</em>)</code></dt>&#13;
<dd>&#13;
<p>Determines whether the value is a valid UUID:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Str</code><code class="o">::</code><code class="na">isUuid</code><code class="p">(</code><code class="s1">'33f6115c-1c98-49f3-9158-a4a4376dfbe1'</code><code class="p">);</code> <code class="c1">// Returns true</code>&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">isUuid</code><code class="p">(</code><code class="s1">'laravel-up-and-running'</code><code class="p">);</code> <code class="c1">// Returns false</code></pre>&#13;
</dd>&#13;
<dt><code>Str::random(<em>$length = n</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a random string of alphanumeric mixed-case characters of the length specified:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$hash</code> <code class="o">=</code> <code class="nx">Str</code><code class="o">::</code><code class="na">random</code><code class="p">(</code><code class="mi">64</code><code class="p">);</code>&#13;
<code class="c1">// Sample: J40uNWAvY60wE4BPEWxu7BZFQEmxEHmGiLmQncj0ThMGJK7O5Kfgptyb9ul wspmh</code></pre>&#13;
</dd>&#13;
<dt><code>Str::slug(<em>$title, $separator = '-', $language = 'en'</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a URL-friendly slug from a string—​often used for creating a URL segment for a name or title:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Str</code><code class="o">::</code><code class="na">slug</code><code class="p">(</code><code class="s1">'How to Win Friends and Influence People'</code><code class="p">);</code>&#13;
<code class="c1">// Returns 'how-to-win-friends-and-influence-people'</code></pre>&#13;
</dd>&#13;
<dt><code>Str::plural(<em>$value, $count = n</em>)</code></dt>&#13;
<dd>&#13;
<p>Converts a string to its plural form. This function currently only supports the English language:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Str</code><code class="o">::</code><code class="na">plural</code><code class="p">(</code><code class="s1">'book'</code><code class="p">);</code>&#13;
<code class="c1">// Returns books</code>&#13;
&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">plural</code><code class="p">(</code><code class="s1">'person'</code><code class="p">);</code>&#13;
<code class="c1">// Returns people</code>&#13;
&#13;
<code class="nx">Str</code><code class="o">::</code><code class="na">plural</code><code class="p">(</code><code class="s1">'person'</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
<code class="c1">// Returns person</code></pre>&#13;
</dd>&#13;
<dt><code>__(<em>$key, $replace = [], $locale = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Translates the given translation string or translation key using your localization<a data-primary="" data-startref="Hstrings17" data-type="indexterm" id="id1967"/><a data-primary="" data-startref="strhelpers17" data-type="indexterm" id="id1968"/> files:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">echo</code> <code class="nx">__</code><code class="p">(</code><code class="s1">'Welcome to your dashboard'</code><code class="p">);</code>&#13;
&#13;
<code class="k">echo</code> <code class="nx">__</code><code class="p">(</code><code class="s1">'messages.welcome'</code><code class="p">);</code></pre>&#13;
</dd>&#13;
</dl>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id1969">&#13;
<h1>Fluent String Operations</h1>&#13;
<p>While<a data-primary="fluent interfaces" data-secondary="string operations" data-type="indexterm" id="id1970"/> the <code>Str</code> helpers are hugely powerful tools, one downside is that you often find yourself in the middle of four nested calls (<code>Str::trim(Str::replace))</code>, etc.).</p>&#13;
&#13;
<p>You can now also use the <code>Str</code> helper methods fluently by chaining the calls on the response of the <code>Str::of</code> method. Take a look:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">return</code> <code class="p">(</code><code class="nx">string</code><code class="p">)</code> <code class="nx">Str</code><code class="o">::</code><code class="na">of</code><code class="p">(</code><code class="s1">'  Go to town!! '</code><code class="p">)</code>&#13;
    <code class="o">-&gt;</code><code class="na">trim</code><code class="p">()</code>&#13;
    <code class="o">-&gt;</code><code class="na">replace</code><code class="p">(</code><code class="s1">'town'</code><code class="p">,</code> <code class="s1">'bed'</code><code class="p">)</code>&#13;
    <code class="o">-&gt;</code><code class="na">slug</code><code class="p">();</code> <code class="c1">// Returns "go-to-bed"</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Application Paths" data-type="sect2"><div class="sect2" id="id345">&#13;
<h2>Application Paths</h2>&#13;
&#13;
<p>When<a data-primary="helpers" data-secondary="application paths" data-type="indexterm" id="id1971"/><a data-primary="filesytem, application path helpers" data-type="indexterm" id="id1972"/><a data-primary="application path helpers" data-type="indexterm" id="id1973"/> you’re dealing with the filesystem, it can often be tedious to make links to certain directories for getting and saving files. These helpers give you quick access to find the fully qualified paths to some of the most important directories in your app.</p>&#13;
&#13;
<p>Note that each of these can be called with no parameters, but if a parameter is passed, it will be appended to the end of the normal directory string and returned as a whole:</p>&#13;
<dl>&#13;
<dt><code>app_path(<em>$append = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the path for the <em>app</em> directory:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">app_path</code><code class="p">();</code>&#13;
<code class="c1">// Returns /home/forge/myapp.com/app</code></pre>&#13;
</dd>&#13;
<dt><code>base_path(<em>$path = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the path for the root directory of your app:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">base_path</code><code class="p">();</code>&#13;
<code class="c1">// Returns /home/forge/myapp.com</code></pre>&#13;
</dd>&#13;
<dt><code>config_path(<em>$path = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the path for configuration files in your app:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">config_path</code><code class="p">();</code>&#13;
<code class="c1">// Returns /home/forge/myapp.com/config</code></pre>&#13;
</dd>&#13;
<dt><code>database_path(<em>$path = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the path for database files in your app:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">database_path</code><code class="p">();</code>&#13;
<code class="c1">// Returns /home/forge/myapp.com/database</code></pre>&#13;
</dd>&#13;
<dt><code>storage_path(<em>$path = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the path for the <em>storage</em> directory in your app:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">storage_path</code><code class="p">();</code>&#13;
<code class="c1">// Returns /home/forge/myapp.com/storage</code></pre>&#13;
</dd>&#13;
<dt><code>lang_path(<em>$path = ''</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the path for the <em>lang</em> directory in your app:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">lang_path</code><code class="p">();</code>&#13;
<code class="c1">// Returns /home/forge/myapp.com/resources/lang</code></pre>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="URLs" data-type="sect2"><div class="sect2" id="id542">&#13;
<h2>URLs</h2>&#13;
&#13;
<p>Some<a data-primary="helpers" data-secondary="URLs" data-type="indexterm" id="id1974"/><a data-primary="Uniform Resource Locators (URLs)" data-secondary="links and assets helpers" data-type="indexterm" id="id1975"/> frontend file paths are consistent but at times annoying to type—​for example, paths to assets—and it’s helpful to have convenient shortcuts to them, which we’ll cover here. But some can actually vary as route definitions move, so some of these helpers are vital in making sure all of your links and assets work correctly:</p>&#13;
<dl>&#13;
<dt><code>action(<em>$action</em>, <em>$parameters = []</em>, <em>$absolute = true</em>)</code></dt>&#13;
<dd>&#13;
<p>Assuming a controller method has a single URL mapped to it, returns the correct URL given a controller and method name pair (separated by <code>@</code>) or using tuple notation:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ action('PersonController@index') }}"</code><code class="o">&gt;</code><code class="nx">See</code> <code class="nx">all</code> <code class="nx">People</code><code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code>&#13;
<code class="c1">// Or, using tuple notation:</code>&#13;
<code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ action(</code>&#13;
<code class="s2">    [App\Http\Controllers\PersonController::class, 'index']</code>&#13;
<code class="s2">    ) }}"</code><code class="o">&gt;</code>&#13;
    <code class="nx">See</code> <code class="nx">all</code> <code class="nx">People</code>&#13;
<code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code>&#13;
&#13;
<code class="c1">// Returns &lt;a href="http://myapp.com/people"&gt;See all People&lt;/a&gt;</code></pre>&#13;
&#13;
<p>If the controller method requires parameters, you can pass them in as the second parameter (as an array, if there’s more than one required parameter). You can <span class="keep-together">key them</span> if you want for clarity, but what matters is just that they’re in the right order:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ action(</code>&#13;
<code class="s2">    'PersonController@show',</code>&#13;
<code class="s2">    ['id =&gt; 3]</code>&#13;
<code class="s2">    ) }}"</code><code class="o">&gt;</code><code class="nx">See</code> <code class="nx">Person</code> <code class="c1">#3&lt;/a&gt;</code>&#13;
<code class="c1">// or</code>&#13;
<code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ action(</code>&#13;
<code class="s2">    'PersonController@show',</code>&#13;
<code class="s2">    [3]</code>&#13;
<code class="s2">    ) }}"</code><code class="o">&gt;</code><code class="nx">See</code> <code class="nx">Person</code> <code class="c1">#3&lt;/a</code>&#13;
&#13;
<code class="c1">// Returns &lt;a href="http://myapp.com/people/3"&gt;See Person #3&lt;/a&gt;</code></pre>&#13;
&#13;
<p>If you pass <code>false</code> to the third parameter, your links will generate as relative <span class="keep-together">(<em>/people/3</em>)</span> instead of absolute (<em>http://myapp.com/people/3</em>).</p>&#13;
</dd>&#13;
<dt><code>route(<em>$name</em>, <em>$parameters = []</em>, <em>$absolute = true</em>)</code></dt>&#13;
<dd>&#13;
<p>If a route has a name, returns the URL for <span class="keep-together">that route:</span></p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// routes/web.php</code>&#13;
<code class="nx">Route</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="s1">'people'</code><code class="p">,</code> <code class="p">[</code><code class="nx">PersonController</code><code class="o">::</code><code class="na">class</code><code class="p">,</code> <code class="s1">'index'</code><code class="p">])</code>&#13;
    <code class="o">-&gt;</code><code class="na">name</code><code class="p">(</code><code class="s1">'people.index'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// A view somewhere</code>&#13;
<code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ route('people.index') }}"</code><code class="o">&gt;</code><code class="nx">See</code> <code class="nx">all</code> <code class="nx">People</code><code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code>&#13;
&#13;
<code class="c1">// Returns &lt;a href="http://myapp.com/people"&gt;See all People&lt;/a&gt;</code></pre>&#13;
&#13;
<p>If the route definition requires parameters, you can pass them in as the second parameter (as an array if more than one parameter is required). Again, you can key them if you want for clarity, but what matters is just that they’re in the right order:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ route('people.show', ['id' =&gt; 3]) }}"</code><code class="o">&gt;</code><code class="nx">See</code> <code class="nx">Person</code> <code class="c1">#3&lt;/a&gt;</code>&#13;
<code class="c1">// or</code>&#13;
<code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"{{ route('people.show', [3]) }}"</code><code class="o">&gt;</code><code class="nx">See</code> <code class="nx">Person</code> <code class="c1">#3&lt;/a&gt;</code>&#13;
&#13;
<code class="c1">// Returns &lt;a href="http://myapp.com/people/3"&gt;See Person #3&lt;/a&gt;</code></pre>&#13;
&#13;
<p>If you pass <code>false</code> to the third parameter, your links will generate as relative instead of absolute.</p>&#13;
</dd>&#13;
<dt><code>url(<em>$string</em>)</code> and <code>secure_url(<em>$string</em>)</code></dt>&#13;
<dd>&#13;
<p>Given any path string, converts to a fully qualified URL. (<code>secure_url()</code> is the same as <code>url()</code> but forces HTTPS):</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">url</code><code class="p">(</code><code class="s1">'people/3'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Returns http://myapp.com/people/3</code></pre>&#13;
&#13;
<p>If no parameters are passed, this instead gives an instance of <code class="keep-together">Illuminate</code><code class="keep-together">\Routing</code><code>\UrlGenerator</code>, which makes method chaining possible:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">url</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">current</code><code class="p">();</code>&#13;
<code class="c1">// Returns http://myapp.com/abc</code>&#13;
&#13;
<code class="nx">url</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">full</code><code class="p">();</code>&#13;
<code class="c1">// Returns http://myapp.com/abc?order=reverse</code>&#13;
&#13;
<code class="nx">url</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">previous</code><code class="p">();</code>&#13;
<code class="c1">// Returns http://myapp.com/login</code>&#13;
&#13;
<code class="c1">// And many more methods available on the UrlGenerator...</code></pre>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Miscellaneous" data-type="sect2"><div class="sect2" id="id346">&#13;
<h2>Miscellaneous</h2>&#13;
&#13;
<p>There<a data-primary="helpers" data-secondary="miscellaneous global helpers" data-type="indexterm" id="Hglobal17"/> are a few other global helpers that I’d recommend getting familiar with. Of course, you should check out the <a href="https://oreil.ly/vssfi">whole list</a>, but the ones mentioned here are definitely worth taking a look at:</p>&#13;
<dl>&#13;
<dt><code>abort(<em>$code, $message, $headers</em>)</code>, <code>abort_unless(<em>$boolean, $code, $message, $headers</em>)</code>, <code>abort_if(<em>$boolean, $code, $message, $headers</em>)</code></dt>&#13;
<dd>&#13;
<p>Throws HTTP exceptions. <code>abort()</code> throws the exception defined, <code>abort_unless()</code> throws it if the first parameter is <code>false</code>, and <code>abort_if()</code> throws it if the first parameter is <code>true</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">public</code> <code class="k">function</code> <code class="nf">controllerMethod</code><code class="p">(</code><code class="nx">Request</code> <code class="nv">$request</code><code class="p">)</code>&#13;
<code class="p">{</code>&#13;
    <code class="nx">abort</code><code class="p">(</code><code class="mi">403</code><code class="p">,</code> <code class="s1">'You shall not pass'</code><code class="p">);</code>&#13;
    <code class="nx">abort_unless</code><code class="p">(</code><code class="nx">request</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">filled</code><code class="p">(</code><code class="s1">'magicToken'</code><code class="p">),</code> <code class="mi">403</code><code class="p">);</code>&#13;
    <code class="nx">abort_if</code><code class="p">(</code><code class="nx">request</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">user</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">isBanned</code><code class="p">,</code> <code class="mi">403</code><code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
</dd>&#13;
<dt><code>auth()</code></dt>&#13;
<dd>&#13;
<p>Returns an instance of the Laravel authenticator. Like the <code>Auth</code> facade, you can use this to get the current user, to check for login state, and more:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$user</code> <code class="o">=</code> <code class="nx">auth</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">user</code><code class="p">();</code>&#13;
<code class="nv">$userId</code> <code class="o">=</code> <code class="nx">auth</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">id</code><code class="p">();</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nx">auth</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">check</code><code class="p">())</code> <code class="p">{</code>&#13;
   <code class="c1">// Do something</code>&#13;
<code class="p">}</code></pre>&#13;
</dd>&#13;
<dt><code>back()</code></dt>&#13;
<dd>&#13;
<p>Generates a “redirect back” response, sending the user to the previous location:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Route</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="s1">'post'</code><code class="p">,</code> <code class="k">function</code> <code class="p">()</code> <code class="p">{</code>&#13;
    <code class="c1">// ...</code>&#13;
&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nv">$condition</code><code class="p">)</code> <code class="p">{</code>&#13;
        <code class="k">return</code> <code class="nx">back</code><code class="p">();</code>&#13;
    <code class="p">}</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>collect(<em>$array</em>)</code></dt>&#13;
<dd>&#13;
<p>Takes an array and returns the same data, converted to a collection:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$collection</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="s1">'Rachel'</code><code class="p">,</code> <code class="s1">'Hototo'</code><code class="p">]);</code></pre>&#13;
&#13;
<p>We’ll cover collections in just a bit.</p>&#13;
</dd>&#13;
<dt><code>config(<em>$key</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the value for any dot-notated configuration item:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$defaultDbConnection</code> <code class="o">=</code> <code class="nx">config</code><code class="p">(</code><code class="s1">'database.default'</code><code class="p">);</code></pre>&#13;
</dd>&#13;
<dt><code>csrf_field()</code>, <code>csrf_token()</code></dt>&#13;
<dd>&#13;
<p>Returns a full HTML hidden input field (<code>csrf_field()</code>) or just the appropriate token value (<code>csrf_token()</code>) for adding CSRF verification to your form &#13;
<span class="keep-together">submission</span>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">form</code><code class="o">&gt;</code>&#13;
    <code class="p">{{</code> <code class="nx">csrf_field</code><code class="p">()</code> <code class="p">}}</code>&#13;
<code class="o">&lt;/</code><code class="nx">form</code><code class="o">&gt;</code>&#13;
&#13;
<code class="c1">// or</code>&#13;
&#13;
<code class="o">&lt;</code><code class="nx">form</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">input</code> <code class="nx">type</code><code class="o">=</code><code class="s2">"hidden"</code> <code class="nx">name</code><code class="o">=</code><code class="s2">"_token"</code> <code class="nx">value</code><code class="o">=</code><code class="s2">"{{ csrf_token() }}"</code><code class="o">&gt;</code>&#13;
<code class="o">&lt;/</code><code class="nx">form</code><code class="o">&gt;</code></pre>&#13;
</dd>&#13;
<dt><code>dump(<em>$variable</em>)</code>, <code>dd(<em>$variable</em>...)</code></dt>&#13;
<dd>&#13;
<p>Runs an output similar to <code>var_dump()</code> on all provided parameters; <code>dd()</code> also runs <code>exit()</code> to quit the application (this is used for debugging):</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// ...</code>&#13;
<code class="nx">dump</code><code class="p">(</code><code class="nv">$var1</code><code class="p">,</code> <code class="nv">$var2</code><code class="p">);</code> <code class="c1">// Check the output...</code>&#13;
<code class="c1">// ...</code>&#13;
<code class="nx">dd</code><code class="p">(</code><code class="nv">$var1</code><code class="p">,</code> <code class="nv">$var2</code><code class="p">,</code> <code class="nv">$state</code><code class="p">);</code> <code class="c1">// Why is this not working???</code></pre>&#13;
</dd>&#13;
<dt><code>env(<em>$key</em>, <em>$default = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the environment variable for the given key:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$key</code> <code class="o">=</code> <code class="nx">env</code><code class="p">(</code><code class="s1">'API_KEY'</code><code class="p">,</code> <code class="s1">''</code><code class="p">);</code></pre>&#13;
&#13;
<p>Remember, do not ever use <code>env()</code> outside of config files.</p>&#13;
</dd>&#13;
<dt><code>dispatch(<em>$job</em>)</code></dt>&#13;
<dd>&#13;
<p>Dispatches a job:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">dispatch</code><code class="p">(</code><code class="k">new</code> <code class="nx">EmailAdminAboutNewUser</code><code class="p">(</code><code class="nv">$user</code><code class="p">));</code></pre>&#13;
</dd>&#13;
<dt><code>event(<em>$event</em>)</code></dt>&#13;
<dd>&#13;
<p>Fires an event:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">event</code><code class="p">(</code><code class="k">new</code> <code class="nx">ContactAdded</code><code class="p">(</code><code class="nv">$contact</code><code class="p">));</code></pre>&#13;
</dd>&#13;
<dt><code>old(<em>$key = null</em>, <em>$default = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns the old value (from the last user form submission) for this form key, if <span class="keep-together">it exists:</span></p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">input</code> <code class="nx">name</code><code class="o">=</code><code class="s2">"name"</code> <code class="nx">value</code><code class="o">=</code><code class="s2">"{{ old('value', 'Your name here') }}"</code></pre>&#13;
</dd>&#13;
<dt><code>redirect(<em>$path</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a redirect response to the given path:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Route</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="s1">'post'</code><code class="p">,</code> <code class="k">function</code> <code class="p">()</code> <code class="p">{</code>&#13;
    <code class="c1">// ...</code>&#13;
&#13;
    <code class="k">return</code> <code class="nx">redirect</code><code class="p">(</code><code class="s1">'home'</code><code class="p">);</code>&#13;
<code class="p">});</code></pre>&#13;
&#13;
<p>Without parameters, this generates an instance of the <code>Illuminate\Routing</code><span class="keep-together"><code>\Redirector</code></span> class.</p>&#13;
</dd>&#13;
<dt><code>response(<em>$content</em>, <em>$status = 200</em>, <em>$headers</em>)</code></dt>&#13;
<dd>&#13;
<p>If passed with parameters, returns a prebuilt instance of <code>Response</code>. If passed with no parameters, it returns an instance of the <code>Response</code> factory:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">return</code> <code class="nx">response</code><code class="p">(</code><code class="s1">'OK'</code><code class="p">,</code> <code class="mi">200</code><code class="p">,</code> <code class="p">[</code><code class="s1">'X-Header-Greatness'</code> <code class="o">=&gt;</code> <code class="s1">'Super great'</code><code class="p">]);</code>&#13;
&#13;
<code class="k">return</code> <code class="nx">response</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">json</code><code class="p">([</code><code class="s1">'status'</code> <code class="o">=&gt;</code> <code class="s1">'success'</code><code class="p">]);</code></pre>&#13;
</dd>&#13;
<dt><code>tap(<em>$value</em>, <em>$callback = null</em>)</code></dt>&#13;
<dd>&#13;
<p>Calls the closure (the second argument), passing it the first argument, and then returns the first argument (instead of the output of the closure):</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">return</code> <code class="nx">tap</code><code class="p">(</code><code class="nx">Contact</code><code class="o">::</code><code class="na">first</code><code class="p">(),</code> <code class="k">function</code> <code class="p">(</code><code class="nv">$contact</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nv">$contact</code><code class="o">-&gt;</code><code class="na">name</code> <code class="o">=</code> <code class="s1">'Aheahe'</code><code class="p">;</code>&#13;
    <code class="nv">$contact</code><code class="o">-&gt;</code><code class="na">save</code><code class="p">();</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>view(<em>$viewPath</em>)</code></dt>&#13;
<dd>&#13;
<p>Returns a view instance:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">Route</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="s1">'home'</code><code class="p">,</code> <code class="k">function</code> <code class="p">()</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nx">view</code><code class="p">(</code><code class="s1">'home'</code><code class="p">);</code> <code class="c1">// Gets /resources/views/home.blade.php</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>fake()</code></dt>&#13;
<dd>&#13;
<p>Returns an instance of<a data-primary="" data-startref="Hglobal17" data-type="indexterm" id="id1976"/> Faker:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">@</code><code class="k">for</code><code class="p">(</code><code class="nv">$i</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code> <code class="nv">$i</code> <code class="o">&lt;=</code> <code class="mi">4</code><code class="p">;</code> <code class="nv">$i</code><code class="o">++</code><code class="p">)</code>&#13;
    <code class="o">&lt;</code><code class="nx">td</code><code class="o">&gt;</code><code class="nx">Purchased</code> <code class="nx">by</code> <code class="p">{{</code> <code class="nx">fake</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">unique</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">name</code><code class="p">()</code> <code class="p">}}</code><code class="o">&lt;/</code><code class="nx">td</code><code class="o">&gt;</code>&#13;
<code class="o">@</code><code class="k">endfor</code></pre>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Collections" data-type="sect1"><div class="sect1" id="collections">&#13;
<h1>Collections</h1>&#13;
&#13;
<p>Collections<a data-primary="collections" data-secondary="introduction to" data-type="indexterm" id="id1977"/> are one of the most powerful yet underappreciated tools Laravel <span class="keep-together">provides.</span> We covered them a bit in <a data-type="xref" href="ch05.html#eloquent_collections">“Eloquent Collections”</a>, but here’s a quick recap.</p>&#13;
&#13;
<p>Collections are essentially arrays with superpowers. The array-traversing methods you normally have to pass arrays into (<code>array_walk()</code>, <code>array_map()</code>, <code>array_reduce()</code>, etc.), all of which have confusingly inconsistent method signatures, are available as consistent, clean, chainable methods on every collection. You can get a taste of functional programming and map, reduce, and filter your way to cleaner code.</p>&#13;
&#13;
<p>We’ll cover some of the basics of Laravel’s collections and collection pipeline programming here, but for a much deeper overview, check out Adam Wathan’s book <em>Refactoring to Collections</em> (Gumroad).</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Basics" data-type="sect2"><div class="sect2" id="id544">&#13;
<h2>The Basics</h2>&#13;
&#13;
<p>Collections<a data-primary="collections" data-secondary="basics of" data-type="indexterm" id="id1978"/> are not a new idea within Laravel. Many languages make collection-style programming available on arrays out of the box, but with PHP we’re not quite <span class="keep-together">so lucky.</span></p>&#13;
&#13;
<p>Using PHP’s <code>array*()</code> functions, we can take the monstrosity shown in <a data-type="xref" href="#commonforeach">Example 17-1</a> and turn it into the slightly less monstrous monstrosity shown in <a data-type="xref" href="#refactoring">Example 17-2</a>.</p>&#13;
<div data-type="example" id="commonforeach">&#13;
<h5><span class="label">Example 17-1. </span>A common, but ugly, <code>foreach</code> loop</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="p">[</code><code class="o">...</code><code class="p">];</code>&#13;
&#13;
<code class="nv">$admins</code> <code class="o">=</code> <code class="p">[];</code>&#13;
&#13;
<code class="k">foreach</code> <code class="p">(</code><code class="nv">$users</code> <code class="k">as</code> <code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nv">$user</code><code class="p">[</code><code class="s1">'status'</code><code class="p">]</code> <code class="o">==</code> <code class="s1">'admin'</code><code class="p">)</code> <code class="p">{</code>&#13;
        <code class="nv">$user</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]</code> <code class="o">=</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'first'</code><code class="p">]</code> <code class="o">.</code> <code class="s1">' '</code> <code class="o">.</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'last'</code><code class="p">];</code>&#13;
        <code class="nv">$admins</code><code class="p">[]</code> <code class="o">=</code> <code class="nv">$user</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="k">return</code> <code class="nv">$admins</code><code class="p">;</code></pre></div>&#13;
<div data-type="example" id="refactoring">&#13;
<h5><span class="label">Example 17-2. </span>Refactoring the <code>foreach</code> loop with native PHP functions</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="p">[</code><code class="o">...</code><code class="p">];</code>&#13;
&#13;
<code class="k">return</code> <code class="nb">array_map</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nv">$user</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]</code> <code class="o">=</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'first'</code><code class="p">]</code> <code class="o">.</code> <code class="s1">' '</code> <code class="o">.</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'last'</code><code class="p">];</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">;</code>&#13;
<code class="p">},</code> <code class="nb">array_filter</code><code class="p">(</code><code class="nv">$users</code><code class="p">,</code> <code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'status'</code><code class="p">]</code> <code class="o">==</code> <code class="s1">'admin'</code><code class="p">;</code>&#13;
<code class="p">}));</code></pre></div>&#13;
&#13;
<p>Here, we’ve gotten rid of a temporary variable (<code>$admins</code>) and converted one confusing <code>foreach</code> loop into two distinct actions: map and filter.</p>&#13;
&#13;
<p>The problem is, PHP’s array manipulation functions are awful and confusing. Just look at this example; <code>array_map()</code> takes the closure first and the array second, but <code>array_filter()</code> takes the array first and the closure second. In addition, if we added any complexity to this, we’d have functions wrapping functions wrapping functions. It’s a mess.</p>&#13;
&#13;
<p>Laravel’s collections take the power of PHP’s array manipulation methods and give them a clean, fluent syntax—and they add many methods that don’t even exist in PHP’s array manipulation toolbox. Using the <code>collect()</code> helper method that turns an array into a Laravel collection, we can do what’s shown in <a data-type="xref" href="#refactoringcoll">Example 17-3</a>.</p>&#13;
<div data-type="example" id="refactoringcoll">&#13;
<h5><span class="label">Example 17-3. </span>Refactoring the <code>foreach</code> loop with Laravel’s collections</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="k">return</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">filter</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'status'</code><code class="p">]</code> <code class="o">==</code> <code class="s1">'admin'</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">map</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nv">$user</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]</code> <code class="o">=</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'first'</code><code class="p">]</code> <code class="o">.</code> <code class="s1">' '</code> <code class="o">.</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'last'</code><code class="p">];</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">;</code>&#13;
<code class="p">});</code></pre></div>&#13;
&#13;
<p>This isn’t the most extreme of examples. There are plenty of others where the reduction in lines of code and the increased simplicity would make an even stronger case. But this right here is <em>so common</em>.</p>&#13;
&#13;
<p>Look at the original example and how muddy it is. It’s not entirely clear until you understand the entire code sample what any given piece is there for.</p>&#13;
&#13;
<p>The biggest benefit collections provide, over anything else, is breaking the actions you’re taking to manipulate an array into simple, discrete, understandable tasks. You can now do something like this:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="p">[</code><code class="o">...</code><code class="p">]</code>&#13;
<code class="nv">$countAdmins</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">(</code><code class="nv">$users</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">filter</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'status'</code><code class="p">]</code> <code class="o">==</code> <code class="s1">'admin'</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">count</code><code class="p">();</code></pre>&#13;
&#13;
<p>or something like this:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="p">[</code><code class="o">...</code><code class="p">];</code>&#13;
<code class="nv">$greenTeamPoints</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">(</code><code class="nv">$users</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">filter</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'team'</code><code class="p">]</code> <code class="o">==</code> <code class="s1">'green'</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">sum</code><code class="p">(</code><code class="s1">'points'</code><code class="p">);</code></pre>&#13;
&#13;
<p>Many of the examples we’ll look at in the rest of this chapter operate on this mythical <code>$users</code> collection we’ve started imagining here. Each entry in the <code>$users</code> array will represent a single human; they’ll likely all be array-accessible. The specific properties each user will have may vary a bit depending on the example. But any time you see this <code>$users</code> variable, know that that’s what we’re working with.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="A Few Collection Operations" data-type="sect2"><div class="sect2" id="id347">&#13;
<h2>A Few Collection Operations</h2>&#13;
&#13;
<p>There’s<a data-primary="collections" data-secondary="collection operations" data-type="indexterm" id="Copera17"/> much more you can do than what we’ve covered so far. I recommend you take a look at the <a href="https://oreil.ly/i83f4">Laravel collections docs</a> to learn more about all the methods you can use, but to get you started, here are just a few of the core methods:</p>&#13;
<dl>&#13;
<dt><code>all()</code>, <code>toArray()</code></dt>&#13;
<dd>&#13;
<p>If you’d like to convert your collection to an array, you can do so with either <code>all()</code> or <code>toArray()</code>. <code>toArray()</code> flattens to arrays not just the collection but also any Eloquent objects underneath it. <code>all()</code> converts <em>only</em> the collection to an array; any Eloquent objects contained within the collection will be preserved as Eloquent objects. Here are a few examples:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">User</code><code class="o">::</code><code class="na">all</code><code class="p">();</code>&#13;
&#13;
<code class="nv">$users</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code>&#13;
&#13;
<code class="cm">/* Returns</code>&#13;
<code class="cm">    [</code>&#13;
<code class="cm">        ['id' =&gt; '1', 'name' =&gt; 'Agouhanna'],</code>&#13;
<code class="cm">        ...</code>&#13;
<code class="cm">    ]</code>&#13;
<code class="cm">*/</code>&#13;
&#13;
<code class="nv">$users</code><code class="o">-&gt;</code><code class="na">all</code><code class="p">();</code>&#13;
&#13;
<code class="cm">/* Returns</code>&#13;
<code class="cm">    [</code>&#13;
<code class="cm">        Eloquent object { id : 1, name: 'Agouhanna' },</code>&#13;
<code class="cm">        ...</code>&#13;
<code class="cm">    ]</code>&#13;
<code class="cm">*/</code></pre>&#13;
</dd>&#13;
<dt><code>filter()</code>, <code>reject()</code></dt>&#13;
<dd>&#13;
<p>When you want to get a subset of your original collection by checking each item against a closure, you’ll use <code>filter()</code> (which keeps an item if the closure returns <code>true</code>) or <code>reject()</code> (which keeps an item if the closure returns <code>false</code>):</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
<code class="nv">$admins</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">filter</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="o">-&gt;</code><code class="na">isAdmin</code><code class="p">;</code>&#13;
<code class="p">});</code>&#13;
&#13;
<code class="nv">$paidUsers</code> <code class="o">=</code> <code class="nv">$user</code><code class="o">-&gt;</code><code class="na">reject</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="o">-&gt;</code><code class="na">isTrial</code><code class="p">;</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>where()</code></dt>&#13;
<dd>&#13;
<p><code>where()</code> makes it easy to provide a subset of your original collection where a given key is equal to a given value. Anything you can do with <code>where()</code> you can also do with <code>filter()</code>, but it’s a shortcut for a common scenario:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
<code class="nv">$admins</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">where</code><code class="p">(</code><code class="s1">'role'</code><code class="p">,</code> <code class="s1">'admin'</code><code class="p">);</code></pre>&#13;
</dd>&#13;
<dt><code>whereNull()</code>, <code>whereNotNull()</code></dt>&#13;
<dd>&#13;
<p><code>whereNull()</code> makes it easy to provide a subset of your original collection where a given key is equal to <code>null</code>; <code>whereNotNull()</code> is the inverse:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
<code class="nv">$active</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">whereNull</code><code class="p">(</code><code class="s1">'deleted_at'</code><code class="p">);</code>&#13;
<code class="nv">$deleted</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">whereNotNull</code><code class="p">(</code><code class="s1">'deleted_at'</code><code class="p">);</code></pre>&#13;
</dd>&#13;
<dt><code>first()</code>, <code>last()</code></dt>&#13;
<dd>&#13;
<p>If you want just a single item from your collection, you can use <code>first()</code> to pull from the beginning of the list or <code>last()</code> to pull from the end.</p>&#13;
&#13;
<p>If you call <code>first()</code> or <code>last()</code> with no parameters, they’ll just give you the first or last item in the collection, respectively. But if you pass either a closure, they’ll instead give you the first or last item in the collection <em>that returns <code>true</code> when passed to that closure.</em></p>&#13;
&#13;
<p>Sometimes you’ll do this because you want the actual first or last item. But sometimes it’s the easiest way to get one item even if you only expect there to be one:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
<code class="nv">$owner</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">first</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="o">-&gt;</code><code class="na">isOwner</code><code class="p">;</code>&#13;
<code class="p">});</code>&#13;
&#13;
<code class="nv">$firstUser</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">first</code><code class="p">();</code>&#13;
<code class="nv">$lastUser</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">last</code><code class="p">();</code></pre>&#13;
&#13;
<p>You can also pass a second parameter to each method, which is the default value and will be provided as a fallback if the closure doesn’t provide any results.</p>&#13;
</dd>&#13;
<dt><code>each()</code></dt>&#13;
<dd>&#13;
<p>If you’d like to do something with each item of a collection, but it doesn’t include modifying the items or the collection itself, you can use <code>each()</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
<code class="nv">$users</code><code class="o">-&gt;</code><code class="na">each</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nx">EmailUserAThing</code><code class="o">::</code><code class="na">dispatch</code><code class="p">(</code><code class="nv">$user</code><code class="p">);</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>map()</code></dt>&#13;
<dd>&#13;
<p>If you’d like to iterate over all the items in a collection, make changes to them, and return a new collection with all of your changes, you’ll want to use <code>map()</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
<code class="nv">$users</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">map</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="p">[</code>&#13;
        <code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'first'</code><code class="p">]</code> <code class="o">.</code> <code class="s1">' '</code> <code class="o">.</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'last'</code><code class="p">],</code>&#13;
        <code class="s1">'email'</code> <code class="o">=&gt;</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'email'</code><code class="p">],</code>&#13;
    <code class="p">];</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>reduce()</code></dt>&#13;
<dd>&#13;
<p>If you’d like to get a single result from your collection, like a count or a string, you’ll probably want to use <code>reduce()</code>. This method works by taking an initial value (called the <em>carry</em>) and then allowing each item in the collection to change that value somehow. You can define an initial value for the carry, and a closure that accepts the current state of the carry, and then each item as parameters:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$points</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">reduce</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$carry</code><code class="p">,</code> <code class="nv">$user</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$carry</code> <code class="o">+</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'points'</code><code class="p">];</code>&#13;
<code class="p">},</code> <code class="mi">0</code><code class="p">);</code> <code class="c1">// Start with a carry of 0</code></pre>&#13;
</dd>&#13;
<dt><code>pluck()</code></dt>&#13;
<dd>&#13;
<p>If you want to pull out just the values for a given key under each item in a collection, you can use <code>pluck()</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$emails</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">pluck</code><code class="p">(</code><code class="s1">'email'</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code></pre>&#13;
</dd>&#13;
<dt><code>chunk()</code>, <code>take()</code></dt>&#13;
<dd>&#13;
<p><code>chunk()</code> makes it easy to split your collection into groups of a predefined size, and <code>take()</code> pulls just the provided number of items:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$rowsOfUsers</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">chunk</code><code class="p">(</code><code class="mi">3</code><code class="p">);</code> <code class="c1">// Separates into groups of 3</code>&#13;
&#13;
<code class="nv">$topThree</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">take</code><code class="p">(</code><code class="mi">3</code><code class="p">);</code> <code class="c1">// Pulls the first 3</code></pre>&#13;
</dd>&#13;
<dt><code>takeUntil()</code>, <code>takeWhile()</code></dt>&#13;
<dd>&#13;
<p><code>takeUntil()</code> returns all items in the collection until the callback returns <code>true</code>. <code>takeWhile()</code> returns all items in the collection until the callback returns <code>false</code>. If the callback passed to <code>takeUntil()</code> never returns <code>true</code>, or if the callback passed to <code>takeWhile()</code> never returns <code>false</code>, the entire collection is returned:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$items</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$subset</code> <code class="o">=</code> <code class="nv">$items</code><code class="o">-&gt;</code><code class="na">takeUntil</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$item</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$item</code> <code class="o">&gt;=</code> <code class="mi">5</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code>&#13;
<code class="c1">// [1, 2, 3, 4]</code>&#13;
&#13;
<code class="nv">$subset</code> <code class="o">=</code> <code class="nv">$items</code><code class="o">-&gt;</code><code class="na">takeWhile</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$item</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$item</code> <code class="o">&lt;</code> <code class="mi">4</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code>&#13;
<code class="c1">// [1, 2, 3]</code></pre>&#13;
</dd>&#13;
<dt><code>groupBy()</code></dt>&#13;
<dd>&#13;
<p>If you want to group all of the items in your collection by the value of one of their properties, you can use <code>groupBy()</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$usersByRole</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">groupBy</code><code class="p">(</code><code class="s1">'role'</code><code class="p">);</code>&#13;
&#13;
<code class="cm">/* Returns:</code>&#13;
<code class="cm">    [</code>&#13;
<code class="cm">        'member' =&gt; [...],</code>&#13;
<code class="cm">        'admin' =&gt; [...],</code>&#13;
<code class="cm">    ]</code>&#13;
<code class="cm">*/</code></pre>&#13;
&#13;
<p>You can also pass a closure, and whatever you return from the closure will be what’s used to group the records:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$heroes</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$heroesByAbilityType</code> <code class="o">=</code> <code class="nv">$heroes</code><code class="o">-&gt;</code><code class="na">groupBy</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$hero</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nv">$hero</code><code class="o">-&gt;</code><code class="na">canFly</code><code class="p">()</code> <code class="o">&amp;&amp;</code> <code class="nv">$hero</code><code class="o">-&gt;</code><code class="na">isInvulnerable</code><code class="p">())</code> <code class="p">{</code>&#13;
        <code class="k">return</code> <code class="s1">'Kryptonian'</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nv">$hero</code><code class="o">-&gt;</code><code class="na">bitByARadioactiveSpider</code><code class="p">())</code> <code class="p">{</code>&#13;
        <code class="k">return</code> <code class="s1">'Spidermanesque'</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
&#13;
    <code class="k">if</code> <code class="p">(</code><code class="nv">$hero</code><code class="o">-&gt;</code><code class="na">color</code> <code class="o">===</code> <code class="s1">'green'</code> <code class="o">&amp;&amp;</code> <code class="nv">$hero</code><code class="o">-&gt;</code><code class="na">likesSmashing</code><code class="p">())</code> <code class="p">{</code>&#13;
        <code class="k">return</code> <code class="s1">'Hulk-like'</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
&#13;
    <code class="k">return</code> <code class="s1">'Generic'</code><code class="p">;</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>reverse()</code>, <code>shuffle()</code></dt>&#13;
<dd>&#13;
<p><code>reverse()</code> reverses the order of the items in your collection, and <code>shuffle()</code> randomizes them:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$numbers</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">reverse</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code> <code class="c1">// [3, 2, 1]</code>&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">shuffle</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code> <code class="c1">// [2, 3, 1]</code></pre>&#13;
</dd>&#13;
<dt><code>skip()</code></dt>&#13;
<dd>&#13;
<p><code>skip()</code> returns a new collection without the given number of items:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$numbers</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">skip</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">values</code><code class="p">();</code> <code class="c1">// [4, 5]</code></pre>&#13;
</dd>&#13;
<dt><code>skipUntil()</code></dt>&#13;
<dd>&#13;
<p><code>skipUntil()</code> skips items until the callback returns <code>true</code>. You can also pass in a value to <code>skipUntil</code>, and it will skip all values until the given value is found. If the value is never found or the callback never returns <code>true</code>, an empty collection is returned:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$numbers</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">skipUntil</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$item</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$item</code> <code class="o">&gt;</code> <code class="mi">3</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">values</code><code class="p">();</code>&#13;
<code class="c1">// [4, 5]</code>&#13;
&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">skipUntil</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">values</code><code class="p">();</code>&#13;
<code class="c1">// [3, 4, 5]</code></pre>&#13;
</dd>&#13;
<dt><code>skipWhile()</code></dt>&#13;
<dd>&#13;
<p><code>skipWhile()</code> skips items while the callback returns <code>true</code>. If the callback never returns <code>false</code>, an empty collection is returned:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$numbers</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">skipWhile</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$item</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$item</code> <code class="o">&lt;=</code> <code class="mi">3</code><code class="p">;</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code>&#13;
<code class="c1">// [4, 5]</code></pre>&#13;
</dd>&#13;
<dt><code>sort()</code>, <code>sortBy()</code>, <code>sortByDesc()</code></dt>&#13;
<dd>&#13;
<p>If your items are simple strings or integers, you can use <code>sort()</code> to sort them:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$sortedNumbers</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">6</code><code class="p">])</code><code class="o">-&gt;</code><code class="na">sort</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">toArray</code><code class="p">();</code> <code class="c1">// [1, 6, 7]</code></pre>&#13;
&#13;
<p>If they’re more complex, you can pass a string (representing the property) or a closure to <code>sortBy()</code> or <code>sortByDesc()</code> to define your sorting behavior:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="c1">// Sort an array of users by their 'email' property</code>&#13;
<code class="nv">$users</code><code class="o">-&gt;</code><code class="na">sort</code><code class="p">(</code><code class="s1">'email'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Sort an array of users by their 'email' property</code>&#13;
<code class="nv">$users</code><code class="o">-&gt;</code><code class="na">sortBy</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$user</code><code class="p">,</code> <code class="nv">$key</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nv">$user</code><code class="p">[</code><code class="s1">'email'</code><code class="p">];</code>&#13;
<code class="p">});</code></pre>&#13;
</dd>&#13;
<dt><code>countBy()</code></dt>&#13;
<dd>&#13;
<p><code>countBy</code> counts every occurrence of each value in a collection:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$collection</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">10</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">20</code><code class="p">,</code> <code class="mi">20</code><code class="p">,</code> <code class="mi">20</code><code class="p">,</code> <code class="mi">30</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$collection</code><code class="o">-&gt;</code><code class="na">countBy</code><code class="p">()</code><code class="o">-&gt;</code><code class="na">all</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// [10 =&gt; 2, 20 =&gt; 3, 30 =&gt; 1]</code></pre>&#13;
&#13;
<p>Each key in the resulting collection is one of the original values; its paired value is the number of times that value occurred in the original collection.</p>&#13;
&#13;
<p>The <code>countBy</code> method also accepts a callback, which customizes the value that’s used to count each item in the collection:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$collection</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="s1">'laravel.com'</code><code class="p">,</code> <code class="s1">'tighten.co'</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$collection</code><code class="o">-&gt;</code><code class="na">countBy</code><code class="p">(</code><code class="k">function</code> <code class="p">(</code><code class="nv">$address</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nx">Str</code><code class="o">::</code><code class="na">after</code><code class="p">(</code><code class="nv">$address</code><code class="p">,</code> <code class="s1">'.'</code><code class="p">);</code>&#13;
<code class="p">})</code><code class="o">-&gt;</code><code class="na">all</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// all: ["com" =&gt; 1, "co" =&gt; 1]</code></pre>&#13;
</dd>&#13;
<dt><code>count()</code>, <code>isEmpty()</code>, <code>isNotEmpty()</code></dt>&#13;
<dd>&#13;
<p>You can see how many items there are in your collection using <code>count()</code>, <code>isEmpty()</code>, or <code>isNotEmpty()</code> tell you whether there are items:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$numbers</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">count</code><code class="p">();</code>   <code class="c1">// 3</code>&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">isEmpty</code><code class="p">();</code> <code class="c1">// false</code>&#13;
<code class="nv">$numbers</code><code class="o">-&gt;</code><code class="na">isNotEmpty</code><code class="p">()</code> <code class="c1">// true</code></pre>&#13;
</dd>&#13;
<dt><code>avg()</code>, <code>sum()</code></dt>&#13;
<dd>&#13;
<p>If you’re working with a collection of numbers, <code>avg()</code> and <code>sum()</code> do what their method names say and don’t require any parameters:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">])</code><code class="o">-&gt;</code><code class="na">sum</code><code class="p">();</code> <code class="c1">// 6</code>&#13;
<code class="nx">collect</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">])</code><code class="o">-&gt;</code><code class="na">avg</code><code class="p">();</code> <code class="c1">// 2</code></pre>&#13;
&#13;
<p>But if you’re working with arrays, you can pass the key of the property you’d like to pull from each array to operate on:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$users</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="o">...</code><code class="p">]);</code>&#13;
&#13;
<code class="nv">$sumPoints</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">sum</code><code class="p">(</code><code class="s1">'points'</code><code class="p">);</code>&#13;
<code class="nv">$avgPoints</code> <code class="o">=</code> <code class="nv">$users</code><code class="o">-&gt;</code><code class="na">avg</code><code class="p">(</code><code class="s1">'points'</code><code class="p">);</code></pre>&#13;
</dd>&#13;
<dt><code>join</code></dt>&#13;
<dd>&#13;
<p><code>join()</code> joins the collection values into a single output string, joining each with a provided string—like PHP’s <code>join()</code> method. You can also (optionally) customize the final concatenation<a data-primary="" data-startref="Copera17" data-type="indexterm" id="id1979"/> operator:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$collection</code> <code class="o">=</code> <code class="nx">collect</code><code class="p">([</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">]);</code>&#13;
<code class="nv">$collection</code><code class="o">-&gt;</code><code class="na">join</code><code class="p">(</code><code class="s1">', '</code><code class="p">,</code> <code class="s1">', and '</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// 'a, b, c, d, and e'</code></pre>&#13;
<div data-type="note" epub:type="note"><h1>Using Collections Outside of Laravel</h1>&#13;
<p>Have<a data-primary="collections" data-secondary="using outside of Laravel" data-type="indexterm" id="id1980"/> you fallen in love with collections, and do you want to use them on your non-Laravel projects?</p>&#13;
&#13;
<p>Just use the <code>composer require illuminate/collections</code> command and you’ll have the <code>Illuminate\S⁠u⁠p⁠p⁠o⁠r⁠t⁠\​C⁠o⁠l⁠l⁠e⁠c⁠t⁠i⁠o⁠n</code> class ready to use in your code—along with the <code>collect()</code> helper.</p>&#13;
</div>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="TL;DR" data-type="sect1"><div class="sect1" id="id545">&#13;
<h1>TL;DR</h1>&#13;
&#13;
<p>Laravel<a data-primary="helpers" data-secondary="overview of" data-type="indexterm" id="id1981"/> provides a suite of global helper functions that simplify all sorts of tasks. They make it easier to manipulate and inspect arrays and strings, they facilitate generating paths and URLs, and they provide simple access to some consistent and vital &#13;
<span class="keep-together">functionality</span>.</p>&#13;
&#13;
<p>Laravel’s<a data-primary="collections" data-secondary="overview of" data-type="indexterm" id="id1982"/> collections are powerful tools that bring the possibility of collection pipelines to PHP.</p>&#13;
</div></section>&#13;
</div></section></body></html>