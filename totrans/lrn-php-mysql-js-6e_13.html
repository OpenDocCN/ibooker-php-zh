<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 10. What’s New in PHP 8 and MySQL 8" class="calibre4"><div class="preface" id="whats_new_in_php_8_and_mysql_8">
<h1 class="calibre10"><span class="keep-together">Chapter 10. </span>What’s New in PHP 8 and MySQL 8</h1>

<p class="author1">By the end of the second decade of the 21st century, both PHP and MySQL had matured into their eighth versions and can now be considered highly mature products by software technology standards.</p>

<p class="author1">According<a contenteditable="false" data-primary="PHP programming language" data-secondary="widespread adoption of" data-type="indexterm" id="idm45694722534920" class="calibre6"/><a contenteditable="false" data-primary="ASP.NET" data-type="indexterm" id="idm45694722533528" class="calibre6"/> to the <a href="https://tinyurl.com/w3tpl" class="calibre6">w3techs.com</a> website, by early 2021 PHP was used in one way or another by over 79% of all websites, a massive 70% ahead of its nearest rival, ASP.NET. <a href="https://tinyurl.com/egctmpd" class="calibre6">explore-group.com</a> reported that in 2019 MySQL remained the most popular database in use on the web, installed on 52% of websites. Although<a contenteditable="false" data-primary="PostgreSQL" data-type="indexterm" id="idm45694722530568" class="calibre6"/><a contenteditable="false" data-primary="MySQL" data-secondary="current market share" data-type="indexterm" id="idm45694722529464" class="calibre6"/> MySQL’s market share had slipped a little in recent years, it still remained a good 16% ahead of its nearest competitor, PostgreSQL, which is used on 36% of websites. It appears this will continue to be the case in the foreseeable future, especially as the almost identical<a contenteditable="false" data-primary="MariaDB" data-type="indexterm" id="idm45694722527672" class="calibre6"/> MariaDB also lays claim to a percentage of the market.</p>

<p class="author1">With the latest version 8 releases of these two technologies, along with JavaScript, these mainstays of modern web development appear set to remain important to web development for many years to come. So let’s take a look at what’s new in the latest versions of PHP and MySQL.</p>

<section data-type="sect1" data-pdf-bookmark="About This Chapter" class="calibre4"><div class="preface" id="idm45694722525688">
<h1 class="calibre11">About This Chapter</h1>

<p class="author1">The latest releases of both of these technologies occurred as this edition of the book was being prepared, so this short chapter is more of a summary or update. It not only includes information useful to the beginning to intermediate PHP and MySQL developer, but it also takes the opportunity to detail some of the more advanced improvements that have been made to the two technologies.</p>

<p class="author1">If any of the following is a topic you have not yet covered in this book or elsewhere, don’t worry; you don’t (yet) need it in your development toolkit. But with those you have seen before, you’ll understand what’s been added or changed and have a hint of how to make use of it.</p>

<p class="author1">Future editions of this book will incorporate those parts most useful to a new developer within the main body of the tutorials.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="PHP 8" class="calibre4"><div class="preface" id="php_8">
<h1 class="calibre11">PHP 8</h1>

<p class="author1">Version 8<a contenteditable="false" data-primary="new features" data-secondary="PHP 8 updates" data-type="indexterm" id="NFphp10" class="calibre6"/><a contenteditable="false" data-primary="PHP programming language" data-secondary="benefits of" data-type="indexterm" id="idm45694722518776" class="calibre6"/> of PHP marks a major update and a huge milestone, bringing a number of new features to the following: type, system, syntax error handling, strings, object-oriented programming, and more.</p>

<p class="author1">The new features make PHP more powerful and easy to use than ever while minimizing changes that could break or modify existing installations.</p>

<p class="author1">For example, Named Parameters, Just In Time (JIT) compilation, Attributes, and Constructor Properties bring major improvements and syntax changes, improved error handling, and changes and improvements in operators to help reduce the chances of overlooked bugs.</p>

<div data-type="note" epub:type="note" class="calibre19">
<h1 class="calibre71">PHP8 and the AMPPS Stack</h1>

<p class="author1">At<a contenteditable="false" data-primary="AMPPS server" data-secondary="PHP 8 installation" data-type="indexterm" id="idm45694722514408" class="calibre6"/><a contenteditable="false" data-primary="PHP programming language" data-secondary="PHP 8 installation" data-type="indexterm" id="idm45694722513000" class="calibre6"/> the time of writing, the AMPPS stack, which you were recommended to install in <a data-type="xref" href="ch02.xhtml#setting_up_a_development_server" class="calibre6">Chapter 2</a>, comes with MySQL 8.0.18, but its version of PHP is still 7.3.11. During the course of publication of this book, it is anticipated that version 8 of PHP will be included in the AMPPS stack, and I recommend you let AMPPS handle its installation for you, especially if you are a beginner. But if it is not yet available in AMPPS, and you wish to start using PHP 8 immediately, you can always download the newer version directly from the <a href="http://php.net" class="calibre6">php.net</a> website, following the instructions provided there to install and use it.</p>
</div>

<section data-type="sect2" data-pdf-bookmark="Named Parameters" class="calibre4"><div class="preface" id="named_parameters">
<h2 class="calibre28">Named Parameters</h2>

<p class="author1">In<a contenteditable="false" data-primary="PHP programming language" data-secondary="named parameters" data-type="indexterm" id="idm45694722507320" class="calibre6"/><a contenteditable="false" data-primary="named parameters (PHP)" data-type="indexterm" id="idm45694722505848" class="calibre6"/> addition to traditional positional parameters, in which the order in which arguments are passed must always be the same, PHP 8 allows named parameters in function calls, like this:</p>

<pre data-code-language="php" data-programming-language="perl" class="calibre29">
<code class="n">str_contains</code><code class="p">(</code><code class="n">needle</code><code class="o">:</code> <code class="s">'ian'</code><code class="p">,</code> <code class="n">haystack</code><code class="o">:</code> <code class="s">'Antidisestablishmentarianism'</code><code class="p">);</code></pre>

<p class="author1">This makes the function (or method) parameter names a part of the public API and allows you to pass input data into a function, based on their argument names, instead of the argument order, substantially increasing code clarity. Therefore, because the parameters are passed by name, their order is no longer of importance, which should lead to fewer difficult-to-find bugs. Incidentally, <code class="calibre15">str_contains</code> (explained later) is also new to PHP 8.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Attributes" class="calibre4"><div class="preface" id="attributes">
<h2 class="calibre28">Attributes</h2>

<p class="author1">In<a contenteditable="false" data-primary="PHP programming language" data-secondary="attributes" data-type="indexterm" id="idm45694722494136" class="calibre6"/><a contenteditable="false" data-primary="attributes (PHP)" data-type="indexterm" id="idm45694722492760" class="calibre6"/> PHP 8, attributes (such as properties and variables) map to PHP class names, allowing the inclusion of metadata in classes, methods, and variables. Previously you would have had to use DocBloc comments to infer them.</p>

<p class="author1">Attributes are a way to give one system or program details of another system, such as a plug-in or an event system, and are simple classes annotated with the <code class="calibre15"><span class="keep-together">#[</span><span class="keep-together">Attribute</span><span class="keep-together">]</span></code>  attribute, which can be attached to classes, properties, methods, functions, class constants, or function/method parameters.</p>

<p class="author1">At runtime attributes do nothing and have no impact on the code. However, they are available to the reflection API, which allows other code to examine the attribute and take additional actions.</p>

<p class="author1">You can find a good explanation of attributes (which are somewhat out of the scope of this book) in the <a class="calibre6" href="https://tinyurl.com/php8attr">PHP.net overview</a>.</p>

<p class="author1">As long as they are on a single line, attributes are interpreted as comments in older PHP versions and therefore are safely ignored.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Constructor Properties" class="calibre4"><div class="preface" id="constructor_properties">
<h2 class="calibre28">Constructor Properties</h2>

<p class="author1">With<a contenteditable="false" data-primary="PHP programming language" data-secondary="constructor properties" data-type="indexterm" id="idm45694722479112" class="calibre6"/><a contenteditable="false" data-primary="constructors" data-secondary="in PHP" data-type="indexterm" id="idm45694722477736" class="calibre6"/> PHP 8 you can now declare class properties right from the class constructor, saving a great deal of boilerplate coding. Take this code, for example:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">class</code><code class="calibre15"> </code><code class="nc">newRecord</code><code class="calibre15">
</code><code class="p">{</code><code class="calibre15">
</code><strong class="calibre31"><code class="nx1">    public</code><code class="calibre17"> </code><code class="nx1">string</code><code class="calibre17"> </code><code class="nv1">$username</code><code class="p1">;</code><code class="calibre17">
</code><code class="nx1">    public</code><code class="calibre17"> </code><code class="nx1">string</code><code class="calibre17"> </code><code class="nv1">$email</code><code class="p1">;</code></strong><code class="calibre15">

</code><code class="n">     public</code><code class="calibre15"> </code><code class="k">function</code><code class="calibre15"> </code><code class="calibre15">__construct</code><code class="p">(</code><code class="calibre15">
</code><code class="n">        string</code><code class="calibre15"> </code><code class="nv">$username</code><code class="p">,</code><code class="calibre15">
</code><code class="n">        string</code><code class="calibre15"> </code><code class="nv">$email</code><code class="p">,</code><code class="calibre15">
</code><code class="n">    </code><code class="p">)</code><code class="calibre15"> </code><code class="p">{</code><code class="calibre15">
</code><code class="n">        </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">username</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="nv">$username</code><code class="p">;</code><code class="calibre15">
</code><code class="n">        </code><code class="nv">$this</code><code class="o">-&gt;</code><code class="na">email</code><code class="calibre15">    </code><code class="o">=</code><code class="calibre15"> </code><code class="nv">$email</code><code class="p">;</code><code class="calibre15">
</code><code class="n">    </code><code class="p">}</code><code class="calibre15">
</code><code class="p">}</code><code class="calibre15">
</code></pre>

<p class="author1">With constructor properties you can now reduce all of that to the following:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">class</code><code class="calibre15"> </code><code class="nc">newRecord</code><code class="calibre15">
</code><code class="p">{</code><code class="calibre15">
</code><code class="n">     public</code><code class="calibre15"> </code><code class="k">function</code><code class="calibre15"> </code><code class="calibre15">__construct</code><code class="p">(</code><code class="calibre15">
</code><strong class="calibre31"><code class="nx1">        public</code><code class="calibre17"> </code><code class="nx1">string</code><code class="calibre17"> </code><code class="nv1">$username</code><code class="p1">,</code><code class="calibre17">
</code><code class="nx1">        public</code><code class="calibre17"> </code><code class="nx1">string</code><code class="calibre17"> </code><code class="nv1">$email</code><code class="p1">,</code></strong><code class="calibre15">
</code><code class="n">    </code><code class="p">){}</code><code class="calibre15">
</code><code class="p">}</code></pre>

<p class="author1">This is a backward-incompatible feature, so only use it where you know for sure that PHP 8 is installed.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Just-In-Time Compilation" class="calibre4"><div class="preface" id="just_in_time_compilation">
<h2 class="calibre28">Just-In-Time Compilation</h2>

<p class="author1">When<a contenteditable="false" data-primary="PHP programming language" data-secondary="Just In Time (JIT) compilation" data-type="indexterm" id="idm45694722343448" class="calibre6"/><a contenteditable="false" data-primary="Just In Time (JIT) compilation (PHP)" data-type="indexterm" id="idm45694722342168" class="calibre6"/> enabled, Just In Time (JIT) compiles and caches native instructions (as opposed to what’s known as the OPcache, which saves file parsing time) to provide a performance boost to CPU-heavy applications.</p>

<p class="author1">You can enable JIT in the <em class="hyperlink">php.ini</em> file like this:</p>

<pre class="calibre29" data-code-language="text">
opcache.enable          = 1
opcache.jit_buffer_size = 100M
opcache.jit             = tracing
</pre>

<p class="author1">Bear in mind that JIT is relatively new to PHP and that it currently makes debugging and profiling harder with the added layer. Also, there were issues with JIT right up to the day before initial release, so be wary that there may remain some undiscovered bugs in the system for a short period until they are ironed out. Therefore, JIT compilation is disabled by default, and you should probably keep it disabled while debugging, just in case.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Union Types" class="calibre4"><div class="preface" id="union_types">
<h2 class="calibre28">Union Types</h2>

<p class="author1">In<a contenteditable="false" data-primary="PHP programming language" data-secondary="Union Types" data-type="indexterm" id="idm45694722344760" class="calibre6"/><a contenteditable="false" data-primary="Union Types (PHP)" data-type="indexterm" id="idm45694721526600" class="calibre6"/> PHP 8, type declarations can be extended with Union Types to declare more than one type (which also supports <code class="calibre15">false</code> as a special type for Boolean <code class="calibre15">false</code>) like this:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">function</code><code class="calibre15"> </code><code class="nf">parse_value</code><code class="p">(</code><strong class="calibre31"><code class="nx1">string</code><code class="o1">|</code><code class="nx1">int</code><code class="o1">|</code><code class="nx1">float</code></strong><code class="p">)</code><code class="o">:</code><code class="calibre15"> </code><code class="n">string</code><code class="o">|</code><code class="k">null</code><code class="calibre15"> </code><code class="p">{}</code><code class="calibre15">
</code></pre>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Null-safe Operator" class="calibre4"><div class="preface" id="null_safe_operator">
<h2 class="calibre28">Null-safe Operator</h2>

<p class="author1">In<a contenteditable="false" data-primary="PHP programming language" data-secondary="null-safe operator" data-type="indexterm" id="idm45694720993320" class="calibre6"/><a contenteditable="false" data-primary="null-safe (?-&gt;) operator" data-type="indexterm" id="idm45694721626296" class="calibre6"/><a contenteditable="false" data-primary="?-&gt; (null-safe) operator" data-type="indexterm" id="idm45694721317592" class="calibre6"/> the following, the <code class="calibre15">?-&gt;</code> null-safe operator will short-circuit the remainder of the section if it encounters a <code class="calibre15">null</code> value and will return a <code class="calibre15">null</code> immediately without causing an error:</p>

<pre data-type="programlisting" class="calibre29">
return $user-&gt;getAddress()?-&gt;getCountry()?-&gt;isoCode;</pre>

<p class="author1">Previously you would have needed to use several sequential calls to <code class="calibre15">isset()</code> for each section, testing them each in turn for having a <code class="calibre15">null</code> value.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="match Expressions" class="calibre4"><div class="preface" id="mathc_expressions">
<h2 class="calibre28">match Expressions</h2>

<p class="author1">A <code class="calibre15">match</code> expression<a contenteditable="false" data-primary="PHP programming language" data-secondary="match expressions" data-type="indexterm" id="idm45694758388104" class="calibre6"/><a contenteditable="false" data-primary="match expressions (PHP)" data-type="indexterm" id="idm45694720915192" class="calibre6"/><a contenteditable="false" data-primary="switch statements" data-secondary="in PHP" data-type="indexterm" id="idm45694721112168" class="calibre6"/> is like a <code class="calibre15">switch</code> block, but it provides type-safe comparisons, supports a return value, does not require a <code class="calibre15">break</code> statement to break out, and also supports multiple matching values. So this rather cumbersome <code class="calibre15">switch</code> block:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<strong class="calibre31"><code class="k1">switch</code></strong><code class="calibre15"> </code><code class="p">(</code><code class="nv">$country</code><code class="p">)</code><code class="calibre15">
</code><code class="p">{</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="k">case</code><code class="calibre15"> </code><code class="s">"</code><code class="s">UK</code><code class="s">"</code><code class="o">:</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="k">case</code><code class="calibre15"> </code><code class="s">"</code><code class="s">USA</code><code class="s">"</code><code class="o">:</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="k">case</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Australia</code><code class="s">"</code><code class="o">:</code><code class="calibre15">
  </code><code class="k">default</code><code class="o">:</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="nv">$lang</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="s">"</code><code class="s">English</code><code class="s">"</code><code class="p">;</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="k">break</code><code class="p">;</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="k">case</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Spain</code><code class="s">"</code><code class="o">:</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="nv">$lang</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Spanish</code><code class="s">"</code><code class="p">;</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="k">break</code><code class="p">;</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="k">case</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Germany</code><code class="s">"</code><code class="o">:</code><code class="calibre15">
  </code><code class="k">case</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Austria</code><code class="s">"</code><code class="o">:</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="nv">$lang</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="s">"</code><code class="s">German</code><code class="s">"</code><code class="p">;</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="n"> </code><code class="calibre15"> </code><code class="k">break</code><code class="p">;</code><code class="calibre15">
</code><code class="p">}</code><code class="calibre15">
</code></pre>

<p class="author1">can be replaced with the following much simpler <code class="calibre15">match</code> expression:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="nv">$lang</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><strong class="calibre31"><code class="nx1">match</code></strong><code class="p">(</code><code class="nv">$country</code><code class="p">)</code><code class="calibre15">
</code><code class="p">{</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="s">"</code><code class="s">UK</code><code class="s">"</code><code class="p">,</code><code class="calibre15"> </code><code class="s">"</code><code class="s">USA</code><code class="s">"</code><code class="p">,</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Australia</code><code class="s">"</code><code class="p">,</code><code class="calibre15"> </code><code class="k">default</code><code class="calibre15"> </code><code class="o">=&gt;</code><code class="calibre15"> </code><code class="s">"</code><code class="s">English</code><code class="s">"</code><code class="p">,</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="s">"</code><code class="s">Spain</code><code class="s">"</code><code class="calibre15">                           </code><code class="o">=&gt;</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Spanish</code><code class="s">"</code><code class="p">,</code><code class="calibre15">
  </code><code class="s">"</code><code class="s">Germany</code><code class="s">"</code><code class="p">,</code><code class="calibre15"> </code><code class="s">"</code><code class="s">Austria</code><code class="s">"</code><code class="calibre15">              </code><code class="o">=&gt;</code><code class="calibre15"> </code><code class="s">"</code><code class="s">German</code><code class="s">"</code><code class="p">,</code><code class="calibre15">
</code><code class="p">};</code></pre>

<p class="author1">Regarding<a contenteditable="false" data-primary="type-safe comparisons" data-type="indexterm" id="idm45694720047480" class="calibre6"/> type-safe comparisons, a <code class="calibre15">switch</code> statement will get quite confused by the following code, because it will evaluate <code class="calibre15">'0e0'</code> as being an exponential value for zero and will echo <code class="calibre15">'null'</code>, when it ought to echo <code class="calibre15">'a'</code>. However, <code class="calibre15">match</code> will not have this issue.</p>

<pre data-type="programlisting" class="calibre29">
$a = '0e0';

switch ($a)
{
  case    0 : echo 'null'; break;
  case '0e0': echo 'a';    break;
}</pre>
</div></section>

<section data-type="sect2" data-pdf-bookmark="New Functions" class="calibre4"><div class="preface" id="new_functions_and_classes">
<h2 class="calibre28">New Functions</h2>

<p class="author1">PHP 8<a contenteditable="false" data-primary="PHP programming language" data-secondary="functions in" data-type="indexterm" id="PHPfunc10" class="calibre6"/><a contenteditable="false" data-primary="functions (PHP)" data-secondary="new in PHP8" data-type="indexterm" id="FPHPnew10" class="calibre6"/> provides a number of new functions that offer greater functionality and improvements to the language, covering areas such as string handling, debugging, and error handling.</p>

<section data-type="sect3" data-pdf-bookmark="str_contains" class="calibre4"><div class="preface" id="str_contains">
<h3 class="calibre43">str_contains</h3>

<p class="author1">The<a contenteditable="false" data-primary="str_contains function (PHP)" data-type="indexterm" id="idm45694719966264" class="calibre6"/><a contenteditable="false" data-primary="strpos function (PHP)" data-type="indexterm" id="idm45694719931608" class="calibre6"/> <code class="calibre15">str</code> function will return whether or not a string is contained within another string. It is a better function than <code class="calibre15">strpos</code>, because <code class="calibre15">strpos</code> returns the position of a string within another, or the value <code class="calibre15">false</code> if it’s not found. But there’s a potential <span class="keep-together">problem</span> because if the string is found at position zero and the value 0 is returned, this evaluates to <code class="calibre15">false</code> unless the<a contenteditable="false" data-primary="comparison operators" data-secondary="in PHP" data-type="indexterm" id="idm45694719765800" class="calibre6"/> strict comparison operator (<code class="calibre15">===</code>) is used instead of <code class="calibre15">==</code>.</p>

<p class="author1">Therefore, using <code class="calibre15">strpos</code>, you need to write less-than-clear code such as this:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><strong class="calibre31"><code class="nb1">strpos</code></strong><code class="p">(</code><code class="s">'Once upon a time'</code><code class="p">,</code><code class="calibre15"> </code><code class="s">'Once'</code><code class="p">)</code><code class="calibre15"> </code><code class="o">!==</code><code class="calibre15"> </code><code class="k">false</code><code class="p">)</code><code class="calibre15">
  </code><code class="k">echo</code><code class="calibre15"> </code><code class="s">'Found'</code><code class="p">;</code></pre>

<p class="author1">whereas code using <code class="calibre15">str_contains</code>, such as the following, is far clearer to understand when quickly scanning (and writing) code and is less likely to lead to obscure bugs:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><strong class="calibre31"><code class="nx1">str_contains</code></strong><code class="p">(</code><code class="s">'Once upon a time'</code><code class="p">,</code><code class="calibre15"> </code><code class="s">'Once'</code><code class="p">))</code><code class="calibre15">
  </code><code class="k">echo</code><code class="calibre15"> </code><code class="s">'Found'</code><code class="p">;</code></pre>

<p class="author1">The <code class="calibre15">str_contains</code> function is case-sensitive, so if you need to perform a case-<em class="hyperlink">in</em>sensitive check you should run both <code class="calibre15">$needle</code> and <code class="calibre15">$haystack</code> through a function to remove case first, such as <code class="calibre15">strtolower</code>, like this:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><code class="n">str_contains</code><code class="p">(</code><strong class="calibre31"><code class="nb1">strtolower</code></strong><code class="p">(</code><code class="s">'Once upon a time'</code><code class="p">),</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15">                </code><strong class="calibre31"><code class="nb1">strtolower</code></strong><code class="p">(</code><code class="s">'</code><strong class="calibre31"><code class="s2">o</code></strong><code class="s">nce'</code><code class="p">)))</code><code class="calibre15">
  </code><code class="k">echo</code><code class="calibre15"> </code><code class="s">'Found'</code><code class="p">;</code></pre>

<p class="author1">Should you wish to use <code class="calibre15">str_contains</code> and also ensure your code is backward compatible with older versions of PHP, you can employ the use of a polyfill (code that provides a feature your code expects to be natively available) to create your own version of the <code class="calibre15">str_contains</code> function (should it not already exist).</p>

<div data-type="note" epub:type="note" class="calibre19">
<h1 class="calibre71">Help with Polyfills</h1>

<p class="author1">Rather<a contenteditable="false" data-primary="polyfillls (PHP)" data-type="indexterm" id="polly10" class="calibre6"/><a contenteditable="false" data-primary="Symfony polyfill package" data-type="indexterm" id="idm45694719630568" class="calibre6"/> than coming up with your own polyfills, which could inadvertently introduce errors into your code, or be noncompatible with other people’s polyfills, you can use the ready-made Symfony polyfill package for PHP 8 available for free on <a href="https://github.com/symfony/polyfill-php80" class="calibre6">GitHub</a>.</p>

<p class="author1">In the following polyfill function for PHP 7+, the check for <code class="calibre15">$needle</code> being the empty string is there because PHP 8 considers the empty string to exist at every position within every string (even including within the empty string), so this behavior must be matched by the replacement function:</p>
</div>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="nb">function_exists</code><code class="p">(</code><code class="s">'str_contains'</code><code class="p">))</code>
<code class="p">{</code>
<code class="n">  function</code> <code class="n">str_contains</code><code class="p">(</code><code class="n">string</code> <code class="nv">$haystack</code><code class="p">,</code> <code class="n">string</code> <code class="nv">$needle</code><code class="p">)</code><code class="o">:</code> <code class="n">bool</code>
<code class="n"> </code> <code class="p">{</code>
<code class="n">    return</code> <code class="nv">$needle</code> <code class="o">===</code> <code class="s">''</code> <code class="o">||</code> <code class="nb">strpos</code><code class="p">(</code><code class="nv">$haystack</code><code class="p">,</code> <code class="nv">$needle</code><code class="p">)</code> <code class="o">!==</code> <code class="k">false</code><code class="p">;</code>
<code class="n">  </code><code class="p">}</code>
<code class="p">}</code></pre>
</div></section>

<section data-type="sect3" data-pdf-bookmark="str_starts_with" class="calibre4"><div class="preface" id="str_starts_with">
<h3 class="calibre43">str_starts_with</h3>

<p class="author1">The <code class="calibre15">str_starts_with</code> function<a contenteditable="false" data-primary="str_starts_with function (PHP)" data-type="indexterm" id="idm45694719567080" class="calibre6"/> provides a clearer means of checking whether one string starts with another. Previously you would probably use the <code class="calibre15">strpos</code> function and check whether it returns the value zero, but since we have already seen that 0 and <code class="calibre15">false</code> can become confused in certain situations, <code class="calibre15">str_starts_with</code> reduces this possibility substantially. You use it like this:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><strong class="calibre31"><code class="nx1">str_starts_with</code></strong><code class="p">(</code><code class="s">'In the beginning'</code><code class="p">,</code><code class="calibre15"> </code><code class="s">'In'</code><code class="p">))</code><code class="calibre15">
  </code><code class="k">echo</code><code class="calibre15"> </code><code class="s">'Found'</code><code class="p">;</code></pre>

<p class="author1">Just as with <code class="calibre15">str_contains</code>, the test is made in a case-sensitive manner, so use a function such as <code class="calibre15">strtolower</code> on both strings to perform an insensitive test. A PHP 7+ polyfill for this function could be the following:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="nb">function_exists</code><code class="p">(</code><code class="s">'str_starts_with'</code><code class="p">))</code>
<code class="p">{</code>
<code class="n">  function</code> <code class="n">str_starts_with</code><code class="p">(</code><code class="n">string</code> <code class="nv">$haystack</code><code class="p">,</code> <code class="n">string</code> <code class="nv">$needle</code><code class="p">)</code><code class="o">:</code> <code class="n">bool</code>
<code class="n"> </code> <code class="p">{</code>
<code class="n">    return</code> <code class="nv">$needle</code> <code class="o">===</code> <code class="s">''</code> <code class="o">||</code> <code class="nb">strpos</code><code class="p">(</code><code class="nv">$haystack</code><code class="p">,</code> <code class="nv">$needle</code><code class="p">)</code> <code class="o">===</code> <code class="mi">0</code><code class="p">;</code>
<code class="n">  </code><code class="p">}</code>
<code class="p">}</code></pre>

<p class="author1">Since PHP 8 considers the empty string to exist at every position in a string, this polyfill always returns <code class="calibre15">true</code> if <code class="calibre15">$needle</code> is the empty string.</p>
</div></section>

<section data-type="sect3" data-pdf-bookmark="str_ends_with" class="calibre4"><div class="preface" id="str_ends_with">
<h3 class="calibre43">str_ends_with</h3>

<p class="author1">This<a contenteditable="false" data-primary="str_ends_with function (PHP)" data-type="indexterm" id="idm45694719397416" class="calibre6"/> function provides a clearer and simpler means of checking whether one string ends with another. Previously you would probably use the <code class="calibre15">substr</code> function, passing it the negative length of <code class="calibre15">$needle</code>, but <code class="calibre15">str_ends_with</code> makes this task far simpler. You use it like this:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><strong class="calibre31"><code class="nx1">str_ends_with</code></strong><code class="p">(</code><code class="s">'In the end'</code><code class="p">,</code><code class="calibre15"> </code><code class="s">'end'</code><code class="p">))</code><code class="calibre15">
  </code><code class="k">echo</code><code class="calibre15"> </code><code class="s">'Found'</code><code class="p">;</code></pre>

<p class="author1">Just as with the other new string functions, the test is made in a case-sensitive manner, so use a function such as <code class="calibre15">strtolower</code> on both strings to perform an insensitive test. A PHP 7+ polyfill for this function could be the following:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><code class="o">!</code><code class="nb">function_exists</code><code class="p">(</code><code class="s">'str_ends_with'</code><code class="p">))</code><code class="calibre15">
</code><code class="p">{</code><code class="calibre15">
</code><code class="n">  function</code><code class="calibre15"> </code><code class="n">str_ends_with</code><code class="p">(</code><code class="n">string</code><code class="calibre15"> </code><code class="nv">$haystack</code><code class="p">,</code><code class="calibre15"> </code><code class="n">string</code><code class="calibre15"> </code><code class="nv">$needle</code><code class="p">)</code><code class="o">:</code><code class="calibre15"> </code><code class="n">bool</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15"> </code><code class="p">{</code><code class="calibre15">
</code><code class="n">    return</code><code class="calibre15"> </code><code class="nv">$needle</code><code class="calibre15"> </code><code class="o">===</code><code class="calibre15"> </code><code class="s">''</code><code class="calibre15"> </code><code class="o">||</code><code class="calibre15">
</code><code class="n"> </code><code class="calibre15">          </code><code class="nv">$needle</code><code class="calibre15"> </code><code class="o">===</code><code class="calibre15"> </code><code class="nb">substr</code><code class="p">(</code><code class="nv">$haystack</code><code class="p">,</code><code class="calibre15"> </code><strong class="calibre31"><code class="o1">-</code></strong><code class="nb">strlen</code><code class="p">(</code><code class="nv">$needle</code><code class="p">));</code><code class="calibre15">
</code><code class="n">  </code><code class="p">}</code><code class="calibre15">
</code><code class="p">}</code></pre>

<p class="author1">If the second argument passed to <code class="calibre15">substr</code> is negative (as in this case), then the string is matched working backward that number of characters from its end. Once again this polyfill always returns <code class="calibre15">true</code> if <code class="calibre15">$needle</code> is the null string. Also, note the use of the <code class="calibre15">===</code> strict comparison operator to ensure an exact comparison is made between the two strings.</p>
</div></section>

<section data-type="sect3" data-pdf-bookmark="fdiv" class="calibre4"><div class="preface" id="fdiv">
<h3 class="calibre43">fdiv</h3>

<p class="author1">The<a contenteditable="false" data-primary="fdiv function (PHP)" data-type="indexterm" id="idm45694719335512" class="calibre6"/><a contenteditable="false" data-primary="fmod function (PHP)" data-type="indexterm" id="idm45694719334376" class="calibre6"/> new <code class="calibre15">fdiv</code> function is similar to the existing <code class="calibre15">fmod</code> (which returns a floating-point remainder  after a division) and <code class="calibre15">intdiv</code> (which returns the integer quotient of a division) functions, but it allows for division by 0 without issuing a division-by-zero error, but returning one of  <code class="calibre15">INF</code>, <code class="calibre15">-INF</code>, or <code class="calibre15">NAN</code>, depending on the case.</p>

<p class="author1">For example, <code class="calibre15">intdiv(1, 0)</code> will issue a division-by-zero error, as will <code class="calibre15">1 % 0</code>, or simply <code class="calibre15">1 / 0</code>. But you can safely use <code class="calibre15">fdiv(1, 0)</code>, and the result will be a float with the value <code class="calibre15">INF</code>, while <code class="calibre15">fdiv(-1, 0)</code> returns <code class="calibre15">-INF</code>.</p>

<p class="author1">Here’s a PHP 7+ polyfill that you can use to make your code backward compatible:</p>

<pre data-code-language="php" data-type="programlisting" class="calibre29">
<code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="nb">function_exists</code><code class="p">(</code><code class="s">'fdiv'</code><code class="p">))</code>
<code class="p">{</code>
<code class="n"> </code> <code class="k">function</code> <code class="nf">fdiv</code><code class="p">(</code><code class="n">float</code> <code class="nv">$dividend</code><code class="p">,</code> <code class="n">float</code> <code class="nv">$divisor</code><code class="p">)</code><code class="o">:</code> <code class="n">float</code>
<code class="n"> </code> <code class="p">{</code>
<code class="n"> </code> <code class="n"> </code> <code class="k">return</code> <code class="o">@</code><code class="p">(</code><code class="nv">$dividend</code> <code class="o">/</code> <code class="nv">$divisor</code><code class="p">);</code>
<code class="n"> </code> <code class="p">}</code>
<code class="p">}</code></pre>
</div></section>

<section data-type="sect3" data-pdf-bookmark="get_resource_id" class="calibre4"><div class="preface" id="get_resource_id">
<h3 class="calibre43">get_resource_id</h3>

<p class="author1">PHP 8<a contenteditable="false" data-primary="" data-startref="polly10" data-type="indexterm" id="idm45694719275608" class="calibre6"/><a contenteditable="false" data-primary="get_resource_id function (PHP)" data-type="indexterm" id="idm45694719274200" class="calibre6"/> adds the new <code class="calibre15">get_resource_id</code> function that is similar to an <code class="calibre15">(int) $resource</code> cast to make it easier to retrieve a resource ID, but the return type is checked to be a resource, and the return value is an integer, and therefore they are type safe.</p>
</div></section>

<section data-type="sect3" data-pdf-bookmark="get_debug_type" class="calibre4"><div class="preface" id="get_debug_type">
<h3 class="calibre43">get_debug_type</h3>

<p class="author1">The<a contenteditable="false" data-primary="get_debug_type function (PHP)" data-type="indexterm" id="idm45694719253736" class="calibre6"/> <code class="calibre15">get_debug_type</code> function provides more consistent values than the existing <code class="calibre15">gettype</code> function and is best used to get detailed information on an unexpected variable in exception messages or logs, because it is more verbose and provides additional information. For more information, please refer to the <a href="https://wiki.php.net/rfc/get_debug_type" class="calibre6">Wiki</a>.</p>
</div></section>

<section data-type="sect3" data-pdf-bookmark="preg_last_error_msg" class="calibre4"><div class="preface" id="preg_last_error_msg">
<h3 class="calibre43">preg_last_error_msg</h3>

<p class="author1">PHP’s<a contenteditable="false" data-primary="preg_last_error_msg function (PHP)" data-type="indexterm" id="idm45694719248856" class="calibre6"/> <code class="calibre15">preg_</code> functions do not throw exceptions, so if there is an error, you must retrieve any message using <code class="calibre15">preg_last_error</code> to get the error code. But if you want a friendly error message instead of just an unexplained code, in PHP 8 you can now call <code class="calibre15">preg_last_error_msg</code>. If there was no error, then “No error” is returned.</p>

<p class="author1">As this book is aimed at the beginner to intermediate level, I have only really scratched the surface of all the great new features in PHP 8, giving you a taste of the main ones that you can start using right away. However, if you are keen to learn absolutely everything about this milestone update, you can get full details at<a contenteditable="false" data-primary="" data-startref="FPHPnew10" data-type="indexterm" id="idm45694719245336" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="NFphp10" data-type="indexterm" id="idm45694719243960" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="PHPfunc10" data-type="indexterm" id="idm45694719242584" class="calibre6"/> the <a href="https://www.php.net/releases/8.0" class="calibre6">official web page</a>.</p>
</div></section>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="MySQL 8" class="calibre4"><div class="preface" id="MySQL_8">
<h1 class="calibre11">MySQL 8</h1>

<p class="author1">MySQL 8<a contenteditable="false" data-primary="new features" data-secondary="MySQL 8 updates" data-type="indexterm" id="NFmysql10" class="calibre6"/><a contenteditable="false" data-primary="MySQL" data-secondary="versions of" data-type="indexterm" id="idm45694719236888" class="calibre6"/> was first released in 2018 before the previous edition of this book was able to cover the features included in the update. So now, with its most recent update (to 8.0.22) in late 2020, it’s a good opportunity to catch up with all that MySQL 8 has to offer over earlier releases, such as better Unicode support, better JSON and document handling, geographic support, and window functions.</p>

<p class="author1">In this summary, you’ll get an overview of eight of the areas that have been improved, upgraded, or added to in the latest version 8 release.</p>

<div data-type="note" epub:type="note" class="calibre19"><h6 class="calibre20">Note</h6>

<p class="author1">MySQL 8 is the successor to version 5.7 because version 6 was never really taken up by the development community, and when Sun Microsystems purchased MySQL, development of version 6 was halted. More importantly, until version 8 the biggest change was from 5.6 to 5.7 so, according to Sun, “Due to the many new and important features we were introducing in this MySQL version, we decided to start a fresh new series. As the series numbers 6 and 7 had actually been used before by MySQL, we went to 8.0.”</p>
</div>

<section data-type="sect2" data-pdf-bookmark="Updates to SQL" class="calibre4"><div class="preface" id="updates_to_sql">
<h2 class="calibre28">Updates to SQL</h2>

<p class="author1"><a contenteditable="false" data-primary="MySQL" data-secondary="window functions" data-type="indexterm" id="idm45694719230904" class="calibre6"/><a contenteditable="false" data-primary="window functions (MySQL)" data-type="indexterm" id="idm45694719229528" class="calibre6"/> MySQL 8 now has window functions (also known as <em class="hyperlink">analytic functions</em>). They are similar to grouped aggregate functions, which collapse calculations on sets of rows into a single row. However, a window or analytic function performs the aggregation for each row in the result set and is nonaggregate. As they are not central to your use of MySQL and should be considered advanced extensions, I do not cover them in this book.</p>

<p class="author1">The<a contenteditable="false" data-primary="functions (MySQL)" data-secondary="new in MySQL 8" data-type="indexterm" id="idm45694719227128" class="calibre6"/> new functions are <code class="calibre15">RANK</code>, <code class="calibre15">DENSE_RANK</code>, <code class="calibre15">PERCENT_RANK</code>, <code class="calibre15">CUME_DIST</code>, <code class="calibre15">NTILE</code>, <code class="calibre15">ROW_NUMBER</code>, <code class="calibre15">FIRST_VALUE</code>, <code class="calibre15">LAST_VALUE</code>, <code class="calibre15">NTH_VALUE</code>, <code class="calibre15">LEAD</code>, and <code class="calibre15">LAG</code>, and if you need to know more about them, they are fully documented on the MySQL <a href="https://tinyurl.com/mysql8winfuncs" class="calibre6">official website</a>.</p>

<p class="author1">MySQL 8 also brings recursive Common Table Expressions, enhanced alternatives of <code class="calibre15">NOWAIT</code> and <code class="calibre15">SKIP LOCKED</code> in the SQL locking clause, Descendent Indexes, a <code class="calibre15">GROUPING</code> function, and Optimizer Hints.</p>

<p class="author1">All these and more can be viewed on the <a href="https://tinyurl.com/mysql8statements" class="calibre6">MySQL website</a>.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="JSON (JavaScript Object Notation)" class="calibre4"><div class="preface" id="json">
<h2 class="calibre28">JSON (JavaScript Object Notation)</h2>

<p class="author1">There<a contenteditable="false" data-primary="MySQL" data-secondary="JSON handling" data-type="indexterm" id="idm45694719215240" class="calibre6"/><a contenteditable="false" data-primary="JavaScript Object Notation (JSON)" data-type="indexterm" id="idm45694719213832" class="calibre6"/> are a number of new functions for handling JSON, while sorting and grouping of JSON values has been improved. As well as adding extended syntax for ranges in path expressions and improved sorting, there are new table, aggregation, merge, and other functions.</p>

<p class="author1">Given these improvements to MySQL and the use of JSON, it could be argued that MySQL can now be used instead of<a contenteditable="false" data-primary="NoSQL databases" data-type="indexterm" id="idm45694719211816" class="calibre6"/> NoSQL databases.</p>

<p class="author1">The use of JSON in MySQL is beyond the scope of this book, but if it is an area of interest to you, you can refer to <a href="https://tinyurl.com/mysql8json" class="calibre6">the official documentation on all the new features</a>.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Geography Support" class="calibre4"><div class="preface" id="geography_support">
<h2 class="calibre28">Geography Support</h2>

<p class="author1">MySQL 8<a contenteditable="false" data-primary="MySQL" data-secondary="geography support" data-type="indexterm" id="idm45694719207576" class="calibre6"/><a contenteditable="false" data-primary="GIS (Geography Support)" data-type="indexterm" id="idm45694719206168" class="calibre6"/><a contenteditable="false" data-primary="Geography Support (GIS)" data-type="indexterm" id="idm45694719205064" class="calibre6"/><a contenteditable="false" data-primary="SRS (Spatial Reference System)" data-type="indexterm" id="idm45694719203960" class="calibre6"/><a contenteditable="false" data-primary="Spatial Reference System (SRS)" data-type="indexterm" id="idm45694719202888" class="calibre6"/> also brings GIS, or Geography Support, including metadata support for SRS (Spatial Reference System), SRS data types, indexes, and functions. This means that MySQL can now (for example) calculate the distance between two points on the Earth’s surface using their latitude and longitude coordinates in any of the supported spatial reference systems.</p>

<p class="author1">For further details on how to access MySQL GIS, you can refer to <a href="https://tinyurl.com/mysql8gis" class="calibre6">the official website</a>.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Reliability" class="calibre4"><div class="preface" id="reliabililty">
<h2 class="calibre28">Reliability</h2>

<p class="author1">MySQL<a contenteditable="false" data-primary="MySQL" data-secondary="benefits of" data-type="indexterm" id="MSQbene10" class="calibre6"/><a contenteditable="false" data-primary="InnoDB" data-type="indexterm" id="idm45694719196184" class="calibre6"/> is already extremely reliable, but it has been even further improved with version 8 by storing its metadata in the InnoDB transactional storage engine, such that <em class="hyperlink">Users</em>,<em class="hyperlink"> Privileges</em>, and <em class="hyperlink">Dictionary</em> tables now reside in <code class="calibre15">InnoDB</code>.</p>

<p class="author1">In MySQL 8 there is now only a single data dictionary, whereas in version 5.7 and earlier there were two data dictionaries (one for the server and one for the <code class="calibre15">InnoDB</code> layer), which could get out of sync.</p>

<p class="author1">From version 8 the user is guaranteed that any DDL statement (such as <code class="calibre15">CREATE TABLE</code>) will either be executed fully or not at all, preventing Primary and Replica servers from possibly getting out of sync.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Speed and Performance" class="calibre4"><div class="preface" id="speed">
<h2 class="calibre28">Speed and Performance</h2>

<p class="author1">In<a contenteditable="false" data-primary="Information Schema (MySQL)" data-type="indexterm" id="idm45694719189160" class="calibre6"/><a contenteditable="false" data-primary="Performance Schema (MySQL)" data-type="indexterm" id="idm45694719188008" class="calibre6"/> MySQL, the Information Schema has been sped up by up to 100 times by storing the tables as simple views on data dictionary tables in <code class="calibre15">InnoDB</code>. Additionally, over 100 indexes on Performance Schema tables have been added to further speed up performance, which is also much improved with faster reads and writes, I/O bound workloads, and high-contention workloads, plus you can now map user threads to CPUs to further optimize performance.</p>

<p class="author1">MySQL 8 scales better on heavy write workloads by a factor of up to four times compared with version 5.7 and offers even more significant increases for read/write <span class="keep-together">workloads.</span></p>

<p class="author1">With MySQL you can use every storage device at its highest ability and performance is increased on high-contention workloads (where transactions are queuing up to be granted a lock).</p>

<p class="author1">In all, the developers of MySQL 8 say that it is up to twice as fast, and you can read their reasoning and tips on how you can achieve this performance increase in your apps at <a href="https://tinyurl.com/mysql8performance" class="calibre6">the official website</a>.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Management" class="calibre4"><div class="preface" id="management">
<h2 class="calibre28">Management</h2>

<p class="author1">With MySQL 8<a contenteditable="false" data-primary="indexes (MySQL)" data-secondary="toggling between visible and invisible" data-type="indexterm" id="idm45694719180984" class="calibre6"/><a contenteditable="false" data-primary="MySQL" data-secondary="management of" data-type="indexterm" id="idm45694719179560" class="calibre6"/> you can now toggle an index between visible and invisible. An invisible index is not considered by the optimizer when a query plan is created, but the index is still maintained in the background, so it is easy to make it visible again, allowing you to decide whether an index is droppable.</p>

<p class="author1">Also, users now have full control over Undo tablespaces, and you can now persist global, dynamic server variables that would be lost upon server restart. Plus there’s now an SQL <code class="calibre15">RESTART</code> command to allow remote management of a MySQL server over an SQL connection, and there’s a new <code class="calibre15">RENAME COLUMN</code> command provided as an improvement over the previous <code class="calibre15">ALTER TABLE...CHANGE</code> syntax.</p>

<p class="author1">For further details, please refer to <a href="https://tinyurl.com/mysql8serveradmin" class="calibre6">the official website</a>.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Security" class="calibre4"><div class="preface" id="security">
<h2 class="calibre28">Security</h2>

<p class="author1">Security<a contenteditable="false" data-primary="security issues" data-secondary="MySQL 8 updates" data-type="indexterm" id="idm45694719172520" class="calibre6"/> was definitely not left on the table when version 8 was planned, as there are many new improvements.</p>

<p class="author1">To<a contenteditable="false" data-primary="authentication (HTTP)" data-type="indexterm" id="idm45694719170456" class="calibre6"/><a contenteditable="false" data-primary="HTTP authentication" data-secondary="default application" data-type="indexterm" id="idm45694719169320" class="calibre6"/><a contenteditable="false" data-primary="OpenSSL" data-type="indexterm" id="idm45694719167944" class="calibre6"/> start with, the default authentication plug-in has changed from <code class="calibre15">mysql_native_password</code> to <code class="calibre15">caching_sha2_password</code>, and OpenSSL has been selected as the default TLS/SSL library in both the Enterprise and now the Community editions and is dynamically linked.</p>

<p class="author1">With<a contenteditable="false" data-primary="Undo log (MySQL)" data-type="indexterm" id="idm45694719165272" class="calibre6"/><a contenteditable="false" data-primary="Redo log (MySQL)" data-type="indexterm" id="idm45694719164136" class="calibre6"/> MySQL 8, the Undo and Redo logs are now encrypted, and SQL roles have been implemented such that you can grant roles to users and privileges to roles. You can also use mandatory roles when new users are created. There<a contenteditable="false" data-primary="passwords" data-secondary="rotation policy in MySQL 8" data-type="indexterm" id="idm45694719162664" class="calibre6"/> is now a password <span class="keep-together">rotation</span> policy configurable as global or user level with a securely stored password <span class="keep-together">history.</span></p>

<p class="author1">In<a contenteditable="false" data-primary="brute force attacks" data-type="indexterm" id="idm45694719159496" class="calibre6"/> the authentication process, a delay has been added in MySQL 8 based on consecutive unsuccessful login attempts to slow down brute force attempts at attack. Triggering of and the maximum length of delay is configurable.</p>

<p class="author1">For more information on MySQL and security, please<a contenteditable="false" data-primary="" data-startref="MSQbene10" data-type="indexterm" id="idm45694719157576" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="NFmysql10" data-type="indexterm" id="idm45694719156200" class="calibre6"/> visit <a href="https://tinyurl.com/mysql8security" class="calibre6">the official website</a>.</p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Questions" class="calibre4"><div class="preface" id="idm45694719239768">
<h1 class="calibre11">Questions</h1>

<ol class="calibre25">
	<li class="calibre26">
	<p class="author1">What does PHP 8 now allow you to do when declaring class properties?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What is the null-safe operator, and what is it for?</p>
	</li>
	<li class="calibre26">
	<p class="author1">How would you use a <code class="calibre15">match</code> expression in PHP 8, and why can it be better than the alternative?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What easy-to-use new function can you now use in PHP 8 to determine if one string exists within another?</p>
	</li>
	<li class="calibre26">
	<p class="author1">In PHP 8, what is the best new way to make a floating-point division calculation without causing a division-by-zero error?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What is a polyfill?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What is a simple new way in PHP 8 to see in plain English the most recent error generated by a call to one of the <code class="calibre15">preg_</code> functions?</p>
	</li>
	<li class="calibre26">
	<p class="author1">By default, what does MySQL 8 now use as its transactional storage engine?</p>
	</li>
	<li class="calibre26">
	<p class="author1">In MySQL 8, what can you use instead of an <code class="calibre15">ALTER TABLE...CHANGE TABLE</code> command to change the name of a column?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What is the default authentication plug-in in MySQL 8?</p>
	</li>
</ol>

<p class="author1">See <a data-type="xref" href="app01_split_009.xhtml#chapter_10_answers" class="calibre6">“Chapter 10 Answers”</a> in the <a data-type="xref" href="app01_split_000.xhtml#solutions_to_the_chapter_questions" class="calibre6">Appendix A</a> for the answers to these <span class="keep-together">questions</span>.</p>
</div></section>
</div></section></div></body></html>