<html><head></head><body><section data-pdf-bookmark="Chapter 6. Frontend Components" data-type="chapter" epub:type="chapter"><div class="chapter" id="frontend_components">&#13;
<h1><span class="label">Chapter 6. </span>Frontend Components</h1>&#13;
&#13;
&#13;
<p>Laravel is mainly known as a PHP framework, but it’s also <em>full stack</em>, meaning it has a series of components and conventions focused on generating frontend code. Some of these, like pagination and message bags, are PHP helpers that target the frontend, but Laravel also provides a Vite-based frontend build system, some conventions around non-PHP assets, and several starter kits.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Laravel Starter Kits" data-type="sect1"><div class="sect1" id="id128">&#13;
<h1>Laravel Starter Kits</h1>&#13;
&#13;
<p>Out<a data-primary="frontend components" data-secondary="Laravel starter kits" data-tertiary="benefits of" data-type="indexterm" id="id1140"/> of the box, Laravel provides an entire build system, which we’ll cover shortly, but it also includes easy-to-install starter kits that contain templates, auth, styles, JavaScript, and user registration and management workflows.</p>&#13;
&#13;
<p>Laravel’s two starter kits are called Breeze and Jetstream.</p>&#13;
&#13;
<p>Breeze <a data-primary="Breeze" data-secondary="versus Jetstream" data-secondary-sortas="Jetstream" data-type="indexterm" id="id1141"/>is the simpler option; it provides all the needed routes, views, and styles for Laravel’s auth system, including registration, login, password reset, password confirmation, email confirmation, and an “edit profile” page. Breeze includes Tailwind styles, and you can choose either Blade templates or Inertia with React or Vue.</p>&#13;
&#13;
<p>Jetstream is more complex and robust; it provides everything Breeze does, but it also adds two-factor authentication, session management, API token management, and team management features. Jetstream includes Tailwind styles, and you can choose either Livewire or Inertia with Vue.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Inertia<a data-primary="Inertia" data-type="indexterm" id="id1142"/> is a frontend tool that allows you to build single-page apps in JavaScript, while using Laravel routes and controllers to provide the routing and data to each view, as if it were a traditional server-rendered app. Learn more at <a class="orm:hideurl" href="https://inertiajs.com"><em>inertiajs.com</em></a>.</p>&#13;
</div>&#13;
&#13;
<p>If you’re just getting started with Laravel, Breeze is easier to understand and can be used with just Blade. Most Laravel apps work just fine with only Breeze.</p>&#13;
&#13;
<p>Jetstream doesn’t have a Blade-only option, nor does it have a React option; you’ll need to work with some sort of frontend framework. Your choice is either Vue/Inertia or Livewire, which is a project that allows you to write mainly backend code but get frontend interactivity in your Laravel apps. However, Jetstream is more robust, so if you’re comfortable with Laravel and either Livewire or Inertia, and your project needs those extra features, Jetstream may be your best choice.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Laravel Breeze" data-type="sect2"><div class="sect2" id="breeze">&#13;
<h2>Laravel Breeze</h2>&#13;
&#13;
<p>Laravel Breeze<a data-primary="frontend components" data-secondary="Laravel starter kits" data-tertiary="Breeze" data-type="indexterm" id="id1143"/> is a simple starter kit that provides everything you need for an average Laravel application to allow your users to sign up, log in, and manage their profiles.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Installing Breeze" data-type="sect3"><div class="sect3" id="id129">&#13;
<h3>Installing Breeze</h3>&#13;
&#13;
<p>Breeze<a data-primary="Breeze" data-secondary="installing" data-type="indexterm" id="id1144"/><a data-primary="--dev flag" data-type="indexterm" id="id1145"/> is intended to be installed on new apps, so it’s usually the first thing you’ll install when you spin up a new app:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">laravel</code> <code class="k">new</code> <code class="nx">myProject</code>&#13;
<code class="nx">cd</code> <code class="nx">myProject</code>&#13;
<code class="nx">composer</code> <code class="k">require</code> <code class="nx">laravel</code><code class="o">/</code><code class="nx">breeze</code> <code class="o">--</code><code class="nx">dev</code></pre>&#13;
&#13;
<p>Once Breeze is added to your project, you’ll run its installer:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">php</code> <code class="nx">artisan</code> <code class="nx">breeze</code><code class="o">:</code><code class="nx">install</code></pre>&#13;
&#13;
<p>Once you run the installer, you’ll be prompted to choose a stack: Blade, Inertia with React, Inertia with Vue, or API, which is meant to power a non-Inertia frontend like Next.js. These stacks are explained in the following section.</p>&#13;
&#13;
<p>After Breeze is installed, make sure to run your migrations and build your frontend:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">php</code> <code class="nx">artisan</code> <code class="nx">migrate</code>&#13;
<code class="nx">npm</code> <code class="nx">install</code>&#13;
<code class="nx">npm</code> <code class="nx">run</code> <code class="nx">dev</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What comes with Breeze" data-type="sect3"><div class="sect3" id="id421">&#13;
<h3>What comes with Breeze</h3>&#13;
&#13;
<p>Breeze<a data-primary="Breeze" data-secondary="functionality included in" data-type="indexterm" id="id1146"/> automatically registers routes for registration, login, logout, password reset, email verification, and password confirmation pages. These routes live in a new <em>routes/auth.php</em> file.</p>&#13;
&#13;
<p>The non-API form of Breeze also registers routes for a dashboard and an “edit profile” page for users, and adds these routes directly to the <em>routes/web.php</em> file.</p>&#13;
&#13;
<p>The non-API form of Breeze also publishes controllers for the “edit profile” page, email verification, password resets, and several other authentication-related features. In addition, it adds Tailwind, Alpine.js, and PostCSS (for Tailwind). Beyond<a data-primary="Breeze" data-secondary="unique stacks in" data-type="indexterm" id="id1147"/> these shared files and dependencies, each stack adds its own, unique to its needs:</p>&#13;
<dl>&#13;
<dt>Breeze Blade</dt>&#13;
<dd>&#13;
<p>Breeze Blade comes with a series of Blade templates for all the features mentioned above, which you can find in <em>resources/views/auth</em>, <em>resources/view/components</em>, <em>resources/views/profile</em>, and a few others sprinkled around.</p>&#13;
</dd>&#13;
<dt>Breeze Inertia</dt>&#13;
<dd>&#13;
<p>Both Inertia stacks bring in Inertia, Ziggy (a tool for generating URLs to Laravel routes in JavaScript), Tailwind’s “forms” component, and the necessary JavaScript packages to make their respective frontend frameworks function. They both also publish a basic Blade template that loads Inertia and a series of React/Vue components for all the published pages in the <em>resources/js</em> directory.</p>&#13;
</dd>&#13;
<dt>Breeze API</dt>&#13;
<dd>&#13;
<p>The API stack for Breeze installs significantly less code and fewer packages than the other stacks, but it also removes the existing bootstrapped files that come with all new Laravel apps. The API stack is intended to prepare an app to be <em>only</em> an API backend for a separate Next.js app, so it removes <em>package.json</em>, all the JavaScript and CSS files, and all the frontend templates.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Laravel Jetstream" data-type="sect2"><div class="sect2" id="jetstream">&#13;
<h2>Laravel Jetstream</h2>&#13;
&#13;
<p>Jetstream<a data-primary="frontend components" data-secondary="Laravel starter kits" data-tertiary="Jetstream" data-type="indexterm" id="id1148"/><a data-primary="Jetstream" data-secondary="benefits of" data-type="indexterm" id="id1149"/> builds on Breeze’s functionality and adds even more tooling for starting a new app; however, it’s a more complicated setup with fewer options for configuration, so you’ll want to know that you need it before you choose Jetstream over Breeze.</p>&#13;
&#13;
<p>Jetstream, like Breeze, publishes routes, controllers, views, and configuration files. Like Breeze, Jetstream uses Tailwind, and comes in different tech “stacks.”</p>&#13;
&#13;
<p>Unlike Breeze, however, Jetstream requires interactivity, so there’s no Blade-only stack. Instead, you have two choices: Livewire (which is Blade with some PHP-powered JavaScript interactivity) or Inertia/Vue (there’s no React form for Jetstream).</p>&#13;
&#13;
<p>Jetstream also expands Breeze’s offering by bringing in team management features, two-factor authentication, session management, and personal API token &#13;
<span class="keep-together">management</span>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Installing Jetstream" data-type="sect3"><div class="sect3" id="id130">&#13;
<h3>Installing Jetstream</h3>&#13;
&#13;
<p>Jetstream<a data-primary="Jetstream" data-secondary="installing" data-type="indexterm" id="id1150"/> is meant to be installed in a new Laravel app, and you can install it with Composer:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">laravel</code> <code class="k">new</code> <code class="nx">myProject</code>&#13;
<code class="nx">cd</code> <code class="nx">myProject</code>&#13;
<code class="nx">composer</code> <code class="k">require</code> <code class="nx">laravel</code><code class="o">/</code><code class="nx">jetstream</code></pre>&#13;
&#13;
<p>Once Jetstream is added to your project, you’ll run its installer. Unlike Breeze, you won’t be prompted to pick your stack; instead, you need to pass in the stack (<code>livewire</code> or <code>inertia</code>) as the first parameter.</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">php</code> <code class="nx">artisan</code> <code class="nx">jetstream</code><code class="o">:</code><code class="nx">install</code> <code class="nx">livewire</code></pre>&#13;
&#13;
<p>If you want to add team management to your Jetstream install, pass<a data-primary="--teams flag" data-type="indexterm" id="id1151"/> the <code>--teams</code> flag to the installation step:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">php</code> <code class="nx">artisan</code> <code class="nx">jetstream</code><code class="o">:</code><code class="nx">install</code> <code class="nx">livewire</code> <code class="o">--</code><code class="nx">teams</code></pre>&#13;
&#13;
<p>Once you’ve installed Jetstream, make sure to run your migrations and build your frontend:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">php</code> <code class="nx">artisan</code> <code class="nx">migrate</code>&#13;
<code class="nx">npm</code> <code class="nx">install</code>&#13;
<code class="nx">npm</code> <code class="nx">run</code> <code class="nx">dev</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What comes with Jetstream" data-type="sect3"><div class="sect3" id="id131">&#13;
<h3>What comes with Jetstream</h3>&#13;
&#13;
<p>Jetstream<a data-primary="Jetstream" data-secondary="functionality included in" data-type="indexterm" id="id1152"/> publishes an incredible amount of code; here’s a quick summary:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Two-factor authentication and profile photo functionality added to the User model (and adding/modifying the required migrations)</p>&#13;
</li>&#13;
<li>&#13;
<p>A dashboard for logged-in users</p>&#13;
</li>&#13;
<li>&#13;
<p>Tailwind, Tailwind forms, Tailwind typography</p>&#13;
</li>&#13;
<li>&#13;
<p>Laravel Fortify, the backend auth component Jetstream builds on</p>&#13;
</li>&#13;
<li>&#13;
<p>“Actions” for Fortify and Jetstream in <em>app/Actions</em></p>&#13;
</li>&#13;
<li>&#13;
<p>Markdown text for terms and policies pages in <em>resources/markdown</em></p>&#13;
</li>&#13;
<li>&#13;
<p>A huge suite of tests</p>&#13;
</li>&#13;
</ul>&#13;
<div data-type="note" epub:type="note" id="fortify"><h1>Fortify</h1>&#13;
<p>Fortify<a data-primary="Fortify" data-type="indexterm" id="id1153"/> is a headless authentication system. It provides the routes and controllers for all the authentication features Laravel requires, from login and registration to password reset and more, to be consumed by whichever frontend you choose.</p>&#13;
&#13;
<p>Jetstream builds on Fortify, so you can actually think of Jetstream as one of many possible frontends in front of Fortify. Jetstream does also add backend functionality, so it shows just how robust a Fortify-backed auth system can be.</p>&#13;
</div>&#13;
&#13;
<p class="pagebreak-before">Jetstream’s<a data-primary="Jetstream" data-secondary="Livewire and Inertia configurations" data-type="indexterm" id="id1154"/> Livewire and Inertia configurations each come with slightly different dependencies and locations for the templates:</p>&#13;
<dl>&#13;
<dt>Jetstream Livewire</dt>&#13;
<dd>&#13;
<p>Jetstream’s Livewire template sets your app up for working with Livewire and Alpine, and it publishes Livewire components for the frontend. It provides:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Livewire</p>&#13;
</li>&#13;
<li>&#13;
<p>Alpine.js</p>&#13;
</li>&#13;
<li>&#13;
<p>Livewire components in <em>app/View/Components</em></p>&#13;
</li>&#13;
<li>&#13;
<p>Frontend templates in <em>resources/views</em></p>&#13;
</li>&#13;
</ul>&#13;
</dd>&#13;
<dt>Jetstream Inertia</dt>&#13;
<dd>&#13;
<p>Jetstream’s Inertia template sets your app up for working with Inertia and Vue, and it publishes Vue components for the frontend. It provides:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Inertia</p>&#13;
</li>&#13;
<li>&#13;
<p>Vue</p>&#13;
</li>&#13;
<li>&#13;
<p>Vue templates in <em>resources/js</em></p>&#13;
</li>&#13;
</ul>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Customizing your jetstream install" data-type="sect3"><div class="sect3" id="id423">&#13;
<h3>Customizing your jetstream install</h3>&#13;
&#13;
<p>Jetstream<a data-primary="Jetstream" data-secondary="customizing" data-type="indexterm" id="id1155"/> builds on Fortify, so customizing Jetstream sometimes will mean customizing Fortify. You can update any configuration settings in <em>config/fortify.php</em>, <em>config/jetstream.php</em>, the <em>FortifyServiceProvider</em>, and the <em>JetstreamServiceProvider</em>.</p>&#13;
&#13;
<p>Whereas Breeze publishes controllers for you to modify its behaviors, Jetstream publishes actions, each a one-off chunk of behavior with names like <em>ResetUserPassword.php</em> and <em>DeleteUser.php</em>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Further Jetstream features" data-type="sect3"><div class="sect3" id="id424">&#13;
<h3>Further Jetstream features</h3>&#13;
&#13;
<p>Jetstream enables your application to manage teams, personal API tokens, two-factor authentication, and tracking and disconnecting all active sessions. You can also hook into some of Jetstream’s UI niceties in your own code, like custom flash banners.</p>&#13;
&#13;
<p>To<a data-primary="Jetstream" data-secondary="documentation" data-type="indexterm" id="id1156"/> learn more about how this all works, take a look at the <a href="https://jetstream.laravel.com">Laravel docs for Jetstream</a>, which are exhaustive.</p>&#13;
</div></section>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Laravel’s Vite Configuration" data-type="sect1"><div class="sect1" id="vite">&#13;
<h1>Laravel’s Vite Configuration</h1>&#13;
&#13;
<p>Vite<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="uses for" data-type="indexterm" id="id1157"/> is a local frontend development environment that combines a dev server and Rollup-based build tooling chain. That might sound like a lot, but in Laravel, it’s primarily used to bundle CSS and JavaScript assets together.</p>&#13;
&#13;
<p>Laravel offers an NPM plug-in and a Blade directive to make it easy to work with Vite. Both are included in Laravel apps out of the box, along with a configuration file: <em>vite.config.js</em>.</p>&#13;
&#13;
<p>Take<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="configuration file contents" data-type="indexterm" id="id1158"/> a look at <a data-type="xref" href="#EX523">Example 6-1</a> to see what the contents of the default <em>vite.config.js</em> file look like.</p>&#13;
<div data-type="example" id="EX523">&#13;
<h5><span class="label">Example 6-1. </span>The default <em>vite.config.js</em></h5>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">defineConfig</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'vite'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">laravel</code> <code class="nx">from</code> <code class="s1">'laravel-vite-plugin'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">defineConfig</code><code class="p">({</code>&#13;
    <code class="nx">plugins</code><code class="o">:</code> <code class="p">[</code>&#13;
        <code class="nx">laravel</code><code class="p">({</code>&#13;
            <code class="nx">input</code><code class="o">:</code> <code class="p">[</code><code class="s1">'resources/css/app.css'</code><code class="p">,</code> <code class="s1">'resources/js/app.js'</code><code class="p">],</code>&#13;
            <code class="nx">refresh</code><code class="o">:</code> <code class="kc">true</code><code class="p">,</code>&#13;
        <code class="p">}),</code>&#13;
    <code class="p">],</code>&#13;
<code class="p">});</code></pre></div>&#13;
&#13;
<p>We’re<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="refreshes" data-type="indexterm" id="id1159"/> defining the files our plug-in should build from (<code>input</code>) and saying we do want the “refresh my page every time I save a view file” feature enabled (<code>refresh</code>).</p>&#13;
&#13;
<p>By default, Vite pulls from the two files listed in <a data-type="xref" href="#EX523">Example 6-1</a>, and will automatically refresh any time any file changes in these folders:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><em>app/View/Components/</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>lang/</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>resources/lang/</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>resources/views/</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>routes/</em></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Now that we’ve got our Vite config pointed to our CSS and JavaScript entry files, we’ll want to reference those files using the <code>@vite</code> Blade directive, as you can see in <a data-type="xref" href="#EX524">Example 6-2</a>.</p>&#13;
<div data-type="example" id="EX524">&#13;
<h5><span class="label">Example 6-2. </span>Using the <code>@vite</code> Blade directive</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">html</code><code class="o">&gt;</code>&#13;
<code class="o">&lt;</code><code class="nx">head</code><code class="o">&gt;</code>&#13;
    <code class="o">@</code><code class="nx">vite</code><code class="p">([</code><code class="s1">'resources/css/app.css'</code><code class="p">,</code> <code class="s1">'resources/js/app.js'</code><code class="p">])</code></pre></div>&#13;
&#13;
<p>That’s it! Next, let’s take a look at how to bundle files with Vite.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>If<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="Valet configuration option" data-type="indexterm" id="id1160"/> your local development domain is secured (HTTPS), you will need to modify your <em>vite.config.js</em> file to point to your credentials. If you’re using Valet, there’s a special configuration option for that:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ...</code>&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">defineConfig</code><code class="p">({</code>&#13;
    <code class="nx">plugins</code><code class="o">:</code> <code class="p">[</code>&#13;
        <code class="nx">laravel</code><code class="p">({</code>&#13;
            <code class="c1">// ...</code>&#13;
            <code class="nx">valetTls</code><code class="o">:</code> <code class="s1">'name-of_my-app-here.test'</code><code class="p">,</code>&#13;
        <code class="p">}),</code>&#13;
    <code class="p">],</code>&#13;
<code class="p">});</code></pre>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Bundling Files with Vite" data-type="sect2"><div class="sect2" id="id569">&#13;
<h2>Bundling Files with Vite</h2>&#13;
&#13;
<p>Finally, it’s<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="bundling files" data-type="indexterm" id="id1161"/> time to bundle our assets. There are two ways to bundle assets with Vite: “build” and “dev.”</p>&#13;
&#13;
<p>If you want to build your files once, either for delivery to production or for local testing, run <code>npm run build</code> and Vite will bundle your assets. If you are developing locally, however, you may prefer to have Vite spin up a process that will watch your view files for changes, retrigger the build any time it detects changes to your view files, and push a refresh to the page in your browser. That’s what <code>npm run dev</code> does for you.</p>&#13;
&#13;
<p>Your built files will end up in the <em>public/build/assets</em> folder of your app, with a file living at <em>public/build/manifest.json</em> that tells Laravel and Vite how to get to each built file from its nonbuilt path reference.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The <em>public/build</em> folder is ignored by default in Laravel’s <em>.gitignore</em>, so make sure to run <code>npm run build</code> as a part of your deployment process.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Vite Dev Server" data-type="sect2"><div class="sect2" id="id570">&#13;
<h2>The Vite Dev Server</h2>&#13;
&#13;
<p>When<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="Vite development server" data-type="indexterm" id="id1162"/> you run <code>npm run dev</code>, you’re spinning up an actual HTTP server, powered by Vite. The Vite Blade helper rewrites your asset URLs to point to the same locations on the dev server instead of on your local domain, which allows Vite to more quickly update and refresh your dependencies.</p>&#13;
&#13;
<p>This means that if you write the following Blade call:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">@</code><code class="nx">vite</code><code class="p">([</code><code class="s1">'resources/css/app.css'</code><code class="p">,</code> <code class="s1">'resources/js/app.js'</code><code class="p">])</code></pre>&#13;
&#13;
<p class="pagebreak-before">It’ll look like this on your production application:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">link</code> <code class="na">rel</code><code class="o">=</code><code class="s">"preload"</code> <code class="na">as</code><code class="o">=</code><code class="s">"style"</code>&#13;
    <code class="na">href</code><code class="o">=</code><code class="s">"http://my-app.test/build/assets/app-1c09da7e.css"</code> <code class="p">/&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">link</code> <code class="na">rel</code><code class="o">=</code><code class="s">"modulepreload"</code>&#13;
    <code class="na">href</code><code class="o">=</code><code class="s">"http://my-app.test/build/assets/app-ea0e9592.js"</code> <code class="p">/&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">link</code> <code class="na">rel</code><code class="o">=</code><code class="s">"stylesheet"</code>&#13;
    <code class="na">href</code><code class="o">=</code><code class="s">"http://my-app.test/build/assets/app-1c09da7e.css"</code> <code class="p">/&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">script</code> <code class="na">type</code><code class="o">=</code><code class="s">"module"</code>&#13;
    <code class="na">src</code><code class="o">=</code><code class="s">"http://my-app.test/build/assets/app-ea0e9592.js"</code><code class="p">&gt;&lt;/</code><code class="nt">script</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>But it’ll look something like this locally if your Vite server is running:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">script</code> <code class="na">type</code><code class="o">=</code><code class="s">"module"</code> <code class="na">src</code><code class="o">=</code><code class="s">"http://127.0.0.1:5173/@vite/client"</code><code class="p">&gt;&lt;/</code><code class="nt">script</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">link</code> <code class="na">rel</code><code class="o">=</code><code class="s">"stylesheet"</code> <code class="na">href</code><code class="o">=</code><code class="s">"http://127.0.0.1:5173/resources/css/app.css"</code> <code class="p">/&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">script</code> <code class="na">type</code><code class="o">=</code><code class="s">"module"</code> <code class="na">src</code><code class="o">=</code><code class="s">"http://127.0.0.1:5173/resources/js/app.js"</code><code class="p">&gt;&lt;/</code><code class="nt">script</code><code class="p">&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Working with Static Assets and Vite" data-type="sect2"><div class="sect2" id="id132">&#13;
<h2>Working with Static Assets and Vite</h2>&#13;
&#13;
<p>So<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="static assets and" data-type="indexterm" id="id1163"/><a data-primary="static assets" data-type="indexterm" id="id1164"/><a data-primary="absolute static assets" data-type="indexterm" id="id1165"/><a data-primary="relative static assets" data-type="indexterm" id="id1166"/> far we’ve only covered loading JavaScript and CSS with Vite. But Laravel’s Vite configuration can process and version your static assets (like images), as well.</p>&#13;
&#13;
<p>If you’re working in JavaScript templates, Vite will grab the links to any <em>relative</em> static assets and process and version them. Any <em>absolute</em> static assets Vite will ignore.</p>&#13;
&#13;
<p>This means the following images will receive different treatment, if they’re in JavaScript templates.</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;!--</code> <code class="nx">Ignored</code> <code class="nx">by</code> <code class="nx">Vite</code> <code class="o">--&gt;</code>&#13;
<code class="o">&lt;</code><code class="nx">img</code> <code class="nx">src</code><code class="o">=</code><code class="s2">"/resources/images/soccer.jpg"</code><code class="o">&gt;</code>&#13;
<code class="o">&lt;!--</code> <code class="nx">Processed</code> <code class="nx">by</code> <code class="nx">Vite</code> <code class="o">--&gt;</code>&#13;
<code class="o">&lt;</code><code class="nx">img</code> <code class="nx">src</code><code class="o">=</code><code class="s2">"../resources/images/soccer.jpg"</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>If you’re working in Blade templates, you’ll need to take two steps to have Vite handle your static assets. First, you’ll want to use the <code>Vite::asset</code> facade call to link your asset:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;</code><code class="nx">img</code> <code class="nx">src</code><code class="o">=</code><code class="s2">"{{ Vite::asset('resources/images/soccer.jpg') }}"</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>And second, you’ll need to add a configuration step to your <em>resources/js/app.js</em> file that shows Vite which files or folders to import:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">import</code><code class="o">.</code><code class="nx">meta</code><code class="o">.</code><code class="nb">glob</code><code class="p">([</code>&#13;
  <code class="c1">// Imports all the files in /resources/images/</code>&#13;
  <code class="s1">'../images/**'</code><code class="p">,</code>&#13;
<code class="p">]);</code></pre>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>If you’re running the Vite server with <code>npm run dev</code>, the server can load your static assets <em>without</em> you adding the <code>import.meta.glob</code> config. That means you may think it’s going to show up, but it will fail on your production build.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Working with JavaScript Frameworks and Vite" data-type="sect2"><div class="sect2" id="id133">&#13;
<h2>Working with JavaScript Frameworks and Vite</h2>&#13;
&#13;
<p>If<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="JavaScript frameworks and" data-type="indexterm" id="id1167"/><a data-primary="JavaScript frameworks" data-type="indexterm" id="id1168"/> you want to work with Vue, React, Inertia, and/or a single-page application (SPA), you may need to bring in some specific plug-ins or set some specific configuration items. Here are the basics of what you need for the most common scenarios.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Vite and Vue" data-type="sect3"><div class="sect3" id="id134">&#13;
<h3>Vite and Vue</h3>&#13;
&#13;
<p>To<a data-primary="Vue" data-type="indexterm" id="id1169"/><a data-primary="--save-dev flag" data-type="indexterm" id="id1170"/> work with Vite and Vue, first install Vite’s Vue plug-in:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting">npm<code class="w"> </code>install<code class="w"> </code>--save-dev<code class="w"> </code>@vitejs/plugin-vue<code class="w"/></pre>&#13;
&#13;
<p>Then you need to modify your <em>vite.config.js</em> file to call the Vue plug-in, passing two configuration settings to it. The first, <code>template.transformAssetUrls.base=null</code>, allows the Laravel plug-in instead of the Vue plug-in to handle rewriting URLs. The second, <code>template.transformAssetUrls.includeAbsolute=false</code>, allows URLs within Vue templates to reference files in the public directory:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">defineConfig</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'vite'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">laravel</code> <code class="nx">from</code> <code class="s1">'laravel-vite-plugin'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">vue</code> <code class="nx">from</code> <code class="s1">'@vitejs/plugin-vue'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">defineConfig</code><code class="p">({</code>&#13;
  <code class="nx">plugins</code><code class="o">:</code> <code class="p">[</code>&#13;
    <code class="nx">laravel</code><code class="p">([</code><code class="s1">'resources/js/app.js'</code><code class="p">]),</code>&#13;
    <code class="nx">vue</code><code class="p">({</code>&#13;
      <code class="nx">template</code><code class="o">:</code> <code class="p">{</code>&#13;
        <code class="nx">transformAssetUrls</code><code class="o">:</code> <code class="p">{</code>&#13;
          <code class="nx">base</code><code class="o">:</code> <code class="kc">null</code><code class="p">,</code>&#13;
          <code class="nx">includeAbsolute</code><code class="o">:</code> <code class="kc">false</code><code class="p">,</code>&#13;
        <code class="p">},</code>&#13;
      <code class="p">},</code>&#13;
    <code class="p">}),</code>&#13;
  <code class="p">],</code>&#13;
<code class="p">});</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Vite and React" data-type="sect3"><div class="sect3" id="id135">&#13;
<h3>Vite and React</h3>&#13;
&#13;
<p>To<a data-primary="React" data-type="indexterm" id="id1171"/> work with Vite and React, first install Vite’s React plug-in:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting">npm<code class="w"> </code>install<code class="w"> </code>--save-dev<code class="w"> </code>@vitejs/plugin-react<code class="w"/></pre>&#13;
&#13;
<p>Then you need to modify your <em>vite.config.js</em> file to call the React plug-in:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">defineConfig</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'vite'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">laravel</code> <code class="nx">from</code> <code class="s1">'laravel-vite-plugin'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">react</code> <code class="nx">from</code> <code class="s1">'@vitejs/plugin-react'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">defineConfig</code><code class="p">({</code>&#13;
  <code class="nx">plugins</code><code class="o">:</code> <code class="p">[</code>&#13;
    <code class="nx">laravel</code><code class="p">([</code><code class="s1">'resources/js/app.js'</code><code class="p">]),</code>&#13;
    <code class="nx">react</code><code class="p">(),</code>&#13;
  <code class="p">],</code>&#13;
<code class="p">});</code></pre>&#13;
&#13;
<p>Finally, add the <code>@viteReactRefresh</code> Blade directive in your template before you import your JavaScript files with <code>@vite</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">@</code><code class="nx">viteReactRefresh</code>&#13;
<code class="o">@</code><code class="nx">vite</code><code class="p">(</code><code class="s1">'resources/js/app.jsx'</code><code class="p">)</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Vite and Inertia" data-type="sect3"><div class="sect3" id="id136">&#13;
<h3>Vite and Inertia</h3>&#13;
&#13;
<p>If<a data-primary="Inertia" data-type="indexterm" id="id1172"/> you’re setting up Inertia yourself, you’ll need Inertia to be able to resolve your page components.</p>&#13;
&#13;
<p>Here’s a look at the code you’ll likely write in your <em>resources/js/app.js</em> file, but  your best option is to install Inertia using Breeze, Jetstream, or the Inertia docs.</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">import</code> <code class="p">{</code> <code class="nx">createApp</code><code class="p">,</code> <code class="nx">h</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'vue'</code>&#13;
<code class="nx">import</code> <code class="p">{</code> <code class="nx">createInertiaApp</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'@inertiajs/vue3'</code>&#13;
&#13;
<code class="nx">createInertiaApp</code><code class="p">({</code>&#13;
  <code class="nx">resolve</code><code class="o">:</code> <code class="nx">name</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
    <code class="k">const</code> <code class="no">pages</code> <code class="o">=</code> <code class="nx">import</code><code class="o">.</code><code class="nx">meta</code><code class="o">.</code><code class="nb">glob</code><code class="p">(</code><code class="s1">'./Pages/**/*.vue'</code><code class="p">,</code> <code class="p">{</code> <code class="nx">eager</code><code class="o">:</code> <code class="k">true</code> <code class="p">})</code>&#13;
    <code class="k">return</code> <code class="nx">pages</code><code class="p">[</code><code class="sb">`./Pages/${name}.vue`</code><code class="p">]</code>&#13;
  <code class="p">},</code>&#13;
  <code class="nx">setup</code><code class="p">({</code> <code class="nx">el</code><code class="p">,</code> <code class="nx">App</code><code class="p">,</code> <code class="nx">props</code><code class="p">,</code> <code class="nx">plugin</code> <code class="p">})</code> <code class="p">{</code>&#13;
    <code class="nx">createApp</code><code class="p">({</code> <code class="nx">render</code><code class="o">:</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="nx">h</code><code class="p">(</code><code class="nx">App</code><code class="p">,</code> <code class="nx">props</code><code class="p">)</code> <code class="p">})</code>&#13;
      <code class="o">.</code><code class="k">use</code><code class="p">(</code><code class="nx">plugin</code><code class="p">)</code>&#13;
      <code class="o">.</code><code class="nx">mount</code><code class="p">(</code><code class="nx">el</code><code class="p">)</code>&#13;
  <code class="p">},</code>&#13;
<code class="p">})</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Vite and SPAs" data-type="sect3"><div class="sect3" id="id137">&#13;
<h3>Vite and SPAs</h3>&#13;
&#13;
<p>If<a data-primary="single-page application (SPA)" data-type="indexterm" id="id1173"/> you’re building an SPA, remove <em>resources/css/app.css</em> from your <em>vite.config.js</em> file, which removes it as an entry point.</p>&#13;
&#13;
<p>Instead, import your CSS into your JavaScript by adding this line to your <em>resources/js/app,js</em> file, directly below importing the bootstrap:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">import</code> <code class="s1">'./bootstrap'</code><code class="p">;</code>&#13;
<code class="nx">import</code> <code class="s1">'../css/app.css'</code><code class="p">;</code></pre>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using Environment Variables in Vite" data-type="sect2"><div class="sect2" id="id425">&#13;
<h2>Using Environment Variables in Vite</h2>&#13;
&#13;
<p>If<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="environment variables in" data-type="indexterm" id="id1174"/><a data-primary="variables" data-secondary="environment variables in Vite" data-type="indexterm" id="id1175"/> you want to use environment variables in your JavaScript files, prefix the variable name with <code>VITE_</code>, as you can see in <a data-type="xref" href="#EX525">Example 6-3</a>.</p>&#13;
<div data-type="example" id="EX525">&#13;
<h5><span class="label">Example 6-3. </span>Referencing environment variables in vite.config.js</h5>&#13;
&#13;
<pre data-code-language="ini" data-type="programlisting"><code class="err">//</code> <code class="err">.env</code>&#13;
<code class="na">VITE_BASE_URL</code><code class="o">=</code><code class="s">http://local-development-url.test</code></pre>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// resources/js/app.js</code>&#13;
<code class="kr">const</code> <code class="nx">baseUrl</code> <code class="o">=</code> <code class="kr">import</code><code class="p">.</code><code class="nx">meta</code><code class="p">.</code><code class="nx">env</code><code class="p">.</code><code class="nx">VITE_BASE_URL</code><code class="p">;</code></pre></div>&#13;
&#13;
<p>Every time you run <code>npm run dev</code> or <code>npm run build</code>, it’ll load that environment variable from <em>.env</em> and inject it into your script.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Pagination" data-type="sect1"><div class="sect1" id="id138">&#13;
<h1>Pagination</h1>&#13;
&#13;
<p>For<a data-primary="frontend components" data-secondary="pagination" data-type="indexterm" id="FECpagingation06"/><a data-primary="pagination" data-type="indexterm" id="pagination06"/> something that is so common across web applications, pagination still can be wildly complicated to implement. Thankfully, Laravel has a built-in concept of pagination, which is also hooked into Eloquent results <em>and</em> the router by default.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Paginating Database Results" data-type="sect2"><div class="sect2" id="id426">&#13;
<h2>Paginating Database Results</h2>&#13;
&#13;
<p>The<a data-primary="databases" data-secondary="paginating database results" data-type="indexterm" id="id1176"/> most common place you’ll see pagination is when you are displaying the results of a database query and there are too many results for a single page. Eloquent and the query builder both read the <code>page</code> query parameter from the current page request and use it to provide a <code>paginate()</code> method on any result sets; the single parameter you should pass <code>paginate()</code> indicates how many results you want per page. Take a look at <a data-type="xref" href="#EX512">Example 6-4</a> to see how this works.</p>&#13;
<div data-type="example" id="EX512">&#13;
<h5><span class="label">Example 6-4. </span>Paginating a query builder response</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// PostController</code>&#13;
<code class="k">public</code> <code class="k">function</code> <code class="nf">index</code><code class="p">()</code>&#13;
<code class="p">{</code>&#13;
   <code class="k">return</code> <code class="nx">view</code><code class="p">(</code><code class="s1">'posts.index'</code><code class="p">,</code> <code class="p">[</code><code class="s1">'posts'</code> <code class="o">=&gt;</code> <code class="nx">DB</code><code class="o">::</code><code class="na">table</code><code class="p">(</code><code class="s1">'posts'</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">paginate</code><code class="p">(</code><code class="mi">20</code><code class="p">)]);</code>&#13;
<code class="p">}</code></pre></div>&#13;
&#13;
<p><a data-type="xref" href="#EX512">Example 6-4</a> specifies that this route should return 20 posts per page and will define which “page” of results the current user is on based on the URL’s <code>page</code> query parameter, if it has one. Eloquent models all have the same <code>paginate()</code> method.</p>&#13;
&#13;
<p>When you display the results in your view, your collection will now have a <code>links()</code> method on it that will output the pagination controls. (See <a data-type="xref" href="#EX513">Example 6-5</a>, which I’ve simplified for inclusion in this book.)</p>&#13;
<div data-type="example" id="EX513">&#13;
<h5><span class="label">Example 6-5. </span>Rendering pagination links in a template</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// posts/index.blade.php</code>&#13;
<code class="o">&lt;</code><code class="nx">table</code><code class="o">&gt;</code>&#13;
<code class="o">@</code><code class="k">foreach</code> <code class="p">(</code><code class="nv">$posts</code> <code class="k">as</code> <code class="nv">$post</code><code class="p">)</code>&#13;
    <code class="o">&lt;</code><code class="nx">tr</code><code class="o">&gt;&lt;</code><code class="nx">td</code><code class="o">&gt;</code><code class="p">{{</code> <code class="nv">$post</code><code class="o">-&gt;</code><code class="na">title</code> <code class="p">}}</code><code class="o">&lt;/</code><code class="nx">td</code><code class="o">&gt;&lt;/</code><code class="nx">tr</code><code class="o">&gt;</code>&#13;
<code class="o">@</code><code class="k">endforeach</code>&#13;
<code class="o">&lt;/</code><code class="nx">table</code><code class="o">&gt;</code>&#13;
&#13;
<code class="p">{{</code> <code class="nv">$posts</code><code class="o">-&gt;</code><code class="na">links</code><code class="p">()</code> <code class="p">}}</code>&#13;
&#13;
<code class="c1">// By default, $posts-&gt;links() will output something like this:</code>&#13;
<code class="o">&lt;</code><code class="nx">div</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">p</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code>&#13;
            <code class="nx">Showing</code>&#13;
            <code class="o">&lt;</code><code class="nx">span</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code><code class="mi">1</code><code class="o">&lt;/</code><code class="nx">span</code><code class="o">&gt;</code>&#13;
            <code class="nx">to</code>&#13;
            <code class="o">&lt;</code><code class="nx">span</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code><code class="mi">2</code><code class="o">&lt;/</code><code class="nx">span</code><code class="o">&gt;</code>&#13;
            <code class="nx">of</code>&#13;
            <code class="o">&lt;</code><code class="nx">span</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code><code class="mi">5</code><code class="o">&lt;/</code><code class="nx">span</code><code class="o">&gt;</code>&#13;
            <code class="nx">results</code>&#13;
        <code class="o">&lt;/</code><code class="nx">p</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;/</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">span</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="nx">span</code> <code class="nx">aria</code><code class="o">-</code><code class="nx">disabled</code><code class="o">=</code><code class="s2">"true"</code> <code class="nx">aria</code><code class="o">-</code><code class="nx">label</code><code class="o">=</code><code class="s2">"&amp;amp;laquo; Previous"</code><code class="o">&gt;</code>&#13;
                <code class="o">&lt;!--</code> <code class="nx">SVG</code> <code class="nx">here</code> <code class="k">for</code> <code class="nx">the</code> <code class="o">...</code> <code class="nx">ellipsis</code> <code class="o">--&gt;</code>&#13;
            <code class="o">&lt;/</code><code class="nx">span</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="nx">span</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code><code class="mi">1</code><code class="o">&lt;/</code><code class="nx">span</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"http://myapp.com/posts?page=2"</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code> <code class="nx">aria</code><code class="o">-</code><code class="nx">label</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code>&#13;
                <code class="mi">2</code>&#13;
            <code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"http://myapp.com/posts?page=3"</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code> <code class="nx">aria</code><code class="o">-</code><code class="nx">label</code><code class="o">=</code><code class="s2">"..."</code><code class="o">&gt;</code>&#13;
                <code class="mi">3</code>&#13;
            <code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"http://myapp.com/posts?page=2"</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"..."</code>&#13;
                <code class="nx">rel</code><code class="o">=</code><code class="s2">"next"</code> <code class="nx">aria</code><code class="o">-</code><code class="nx">label</code><code class="o">=</code><code class="s2">"Next &amp;amp;raquo;"</code><code class="o">&gt;</code>&#13;
                <code class="o">&lt;!--</code> <code class="nx">SVG</code> <code class="nx">here</code> <code class="k">for</code> <code class="nx">the</code> <code class="o">...</code> <code class="nx">ellipsis</code> <code class="o">--&gt;</code>&#13;
            <code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;/</code><code class="nx">span</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;/</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
<code class="o">&lt;/</code><code class="nx">div</code><code class="o">&gt;</code></pre></div>&#13;
&#13;
<p>The paginator uses TailwindCSS for its default styling. If you want to use Bootstrap styles, call <code>Paginator::useBootstrap()</code> in your <code>AppServiceProvider</code>:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">use</code> <code class="nx">Illuminate\Pagination\Paginator</code><code class="p">;</code>&#13;
&#13;
<code class="k">public</code> <code class="k">function</code> <code class="nf">boot</code><code class="p">()</code><code class="o">:</code> <code class="nx">void</code>&#13;
<code class="p">{</code>&#13;
    <code class="nx">Paginator</code><code class="o">::</code><code class="na">useBootstrap</code><code class="p">();</code>&#13;
<code class="p">}</code></pre>&#13;
<div data-type="tip"><h1>Customizing the Number of Pagination Links</h1>&#13;
<p>If you’d like to control how many links display on either side of the current page, you can customize this number easily with the <code>onEachSide()</code> method:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nx">DB</code><code class="o">::</code><code class="na">table</code><code class="p">(</code><code class="s1">'posts'</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">paginate</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code><code class="o">-&gt;</code><code class="na">onEachSide</code><code class="p">(</code><code class="mi">3</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Outputs:</code>&#13;
<code class="c1">// 5 6 7 [8] 9 10 11</code></pre>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Manually Creating Paginators" data-type="sect2"><div class="sect2" id="id139">&#13;
<h2>Manually Creating Paginators</h2>&#13;
&#13;
<p>If you’re not working with Eloquent or the query builder, or if you’re working with a complex query (e.g., one using <code>groupBy</code>), you might find yourself needing to create a paginator manually. Thankfully, you can do that with the <code>Illuminate\Pagination\Paginator</code> or <code>Illuminate\Pagination\LengthAwarePaginator</code> classes.</p>&#13;
&#13;
<p>The difference between the two classes is that <code>Paginator</code> provides only previous and next buttons, but no links to each page; <code>LengthAwarePaginator</code> needs to know the length of the full result so that it can generate links for each individual page. You may find yourself wanting to use <code>Paginator</code> on large result sets so your paginator doesn’t have to be aware of a massive count of results that might be costly to run.</p>&#13;
&#13;
<p>Both <code>Paginator</code> and <code>LengthAwarePaginator</code> require you to manually extract the subset of content that you want to pass to the view. Take a look at <a data-type="xref" href="#EX514">Example 6-6</a> for an example.<a data-primary="" data-startref="FECpagingation06" data-type="indexterm" id="id1177"/><a data-primary="" data-startref="pagination06" data-type="indexterm" id="id1178"/></p>&#13;
<div data-type="example" id="EX514">&#13;
<h5><span class="label">Example 6-6. </span>Manually creating a paginator</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">use</code> <code class="nx">Illuminate\Http\Request</code><code class="p">;</code>&#13;
<code class="k">use</code> <code class="nx">Illuminate\Pagination\Paginator</code><code class="p">;</code>&#13;
&#13;
<code class="nx">Route</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="s1">'people'</code><code class="p">,</code> <code class="k">function</code> <code class="p">(</code><code class="nx">Request</code> <code class="nv">$request</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nv">$people</code> <code class="o">=</code> <code class="p">[</code><code class="o">...</code><code class="p">];</code> <code class="c1">// huge list of people</code>&#13;
&#13;
    <code class="nv">$perPage</code> <code class="o">=</code> <code class="mi">15</code><code class="p">;</code>&#13;
    <code class="nv">$offsetPages</code> <code class="o">=</code> <code class="nv">$request</code><code class="o">-&gt;</code><code class="na">input</code><code class="p">(</code><code class="s1">'page'</code><code class="p">,</code> <code class="mi">1</code><code class="p">)</code> <code class="o">-</code> <code class="mi">1</code><code class="p">;</code>&#13;
&#13;
    <code class="c1">// The Paginator will not slice your array for you</code>&#13;
    <code class="nv">$people</code> <code class="o">=</code> <code class="nb">array_slice</code><code class="p">(</code>&#13;
        <code class="nv">$people</code><code class="p">,</code>&#13;
        <code class="nv">$offsetPages</code> <code class="o">*</code> <code class="nv">$perPage</code><code class="p">,</code>&#13;
        <code class="nv">$perPage</code>&#13;
    <code class="p">);</code>&#13;
&#13;
    <code class="k">return</code> <code class="k">new</code> <code class="nx">Paginator</code><code class="p">(</code>&#13;
        <code class="nv">$people</code><code class="p">,</code>&#13;
        <code class="nv">$perPage</code>&#13;
    <code class="p">);</code>&#13;
<code class="p">});</code></pre></div>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Message Bags" data-type="sect1"><div class="sect1" id="id140">&#13;
<h1>Message Bags</h1>&#13;
&#13;
<p>Another<a data-primary="frontend components" data-secondary="message bags" data-type="indexterm" id="id1179"/><a data-primary="message bags" data-type="indexterm" id="id1180"/> common-but-painful feature in web applications is passing messages between various components of the app, when the end goal is to share them with <span class="keep-together">the user.</span> Your controller, for example, might want to send a validation message: “The <code>email</code> field must be a valid email address.” However, that particular message doesn’t just need to make it to the view layer; it actually needs to survive a redirect and <span class="keep-together">then end</span> up in the view layer of a different page. How do you structure this messaging logic?</p>&#13;
&#13;
<p>The <code>Illuminate\Support\MessageBag</code> class is tasked with storing, categorizing, and returning messages that are intended for the end user. It groups all messages by key, where the keys are likely to be something like <code>errors</code> or <code>messages</code>, and it provides convenience methods for getting either all its stored messages or only those for a particular key, and outputting these messages in various formats.</p>&#13;
&#13;
<p>You can spin up a new instance of <code>MessageBag</code> manually like in <a data-type="xref" href="#EX515">Example 6-7</a>. To be honest, though, you likely won’t ever do this manually—​this is just a thought exercise to show how it works.</p>&#13;
<div data-type="example" id="EX515">&#13;
<h5><span class="label">Example 6-7. </span>Manually creating and using a message bag</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="nv">$messages</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="s1">'errors'</code> <code class="o">=&gt;</code> <code class="p">[</code>&#13;
        <code class="s1">'Something went wrong with edit 1!'</code><code class="p">,</code>&#13;
    <code class="p">],</code>&#13;
    <code class="s1">'messages'</code> <code class="o">=&gt;</code> <code class="p">[</code>&#13;
        <code class="s1">'Edit 2 was successful.'</code><code class="p">,</code>&#13;
    <code class="p">],</code>&#13;
<code class="p">];</code>&#13;
<code class="nv">$messagebag</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">\Illuminate\Support\MessageBag</code><code class="p">(</code><code class="nv">$messages</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Check for errors; if there are any, decorate and echo</code>&#13;
<code class="k">if</code> <code class="p">(</code><code class="nv">$messagebag</code><code class="o">-&gt;</code><code class="na">has</code><code class="p">(</code><code class="s1">'errors'</code><code class="p">))</code> <code class="p">{</code>&#13;
    <code class="k">echo</code> <code class="s1">'&lt;ul id="errors"&gt;'</code><code class="p">;</code>&#13;
    <code class="k">foreach</code> <code class="p">(</code><code class="nv">$messagebag</code><code class="o">-&gt;</code><code class="na">get</code><code class="p">(</code><code class="s1">'errors'</code><code class="p">,</code> <code class="s1">'&lt;li&gt;&lt;b&gt;:message&lt;/b&gt;&lt;/li&gt;'</code><code class="p">)</code> <code class="k">as</code> <code class="nv">$error</code><code class="p">)</code> <code class="p">{</code>&#13;
        <code class="k">echo</code> <code class="nv">$error</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
    <code class="k">echo</code> <code class="s1">'&lt;/ul&gt;'</code><code class="p">;</code>&#13;
<code class="p">}</code></pre></div>&#13;
&#13;
<p>Message bags are also closely connected to Laravel’s validators (you’ll learn more about these in <a data-type="xref" href="ch07.html#validation">“Validation”</a>): when validators return errors, they actually return an instance of <code>MessageBag</code>, which you can then pass to your view or attach to a redirect using <code>redirect('route')-&gt;withErrors($messagebag)</code>.</p>&#13;
&#13;
<p>Laravel passes an empty instance of <code>MessageBag</code> to every view, assigned to the variable <code>$errors</code>; if you’ve flashed a message bag using <code>withErrors()</code> on a redirect, it will get assigned to that <code>$errors</code> variable instead. That means every view can always assume it has an <code>$errors</code> <code>MessageBag</code> that it can check wherever it handles validation, which leads to <a data-type="xref" href="#EX516">Example 6-8</a> as a common snippet developers place on every page.</p>&#13;
<div data-type="example" id="EX516">&#13;
<h5><span class="label">Example 6-8. </span>Error bag snippet</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// partials/errors.blade.php</code>&#13;
<code class="o">@</code><code class="k">if</code> <code class="p">(</code><code class="nv">$errors</code><code class="o">-&gt;</code><code class="na">any</code><code class="p">())</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code> <code class="nx">class</code><code class="o">=</code><code class="s2">"alert alert-danger"</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">ul</code><code class="o">&gt;</code>&#13;
        <code class="o">@</code><code class="k">foreach</code> <code class="p">(</code><code class="nv">$errors</code> <code class="k">as</code> <code class="nv">$error</code><code class="p">)</code>&#13;
            <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code><code class="p">{{</code> <code class="nv">$error</code> <code class="p">}}</code><code class="o">&lt;/</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
        <code class="o">@</code><code class="k">endforeach</code>&#13;
        <code class="o">&lt;/</code><code class="nx">ul</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;/</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
<code class="o">@</code><code class="k">endif</code></pre></div>&#13;
<div data-type="warning" epub:type="warning"><h1>Missing $errors Variable</h1>&#13;
<p>If you have any routes that aren’t under the <code>web</code> middleware group, they won’t have the session middleware, which means they won’t have this <code>$errors</code> variable available.</p>&#13;
</div>&#13;
&#13;
<p>Sometimes you need to differentiate message bags not just by key (<code>notices</code> versus <code>errors</code>) but also by component. Maybe you have a login form and a signup form on the same page; how do you differentiate them?</p>&#13;
&#13;
<p>When you send errors along with a redirect using <code>withErrors()</code>, the second parameter is the name of the bag: <code>redirect('dashboard')-&gt;withErrors($validator, 'login')</code>. Then, on the dashboard, you can use <code>$errors-&gt;login</code> to call all of the methods you saw before: <code>any()</code>, <code>count()</code>, and more.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="String Helpers, Pluralization, and Localization" data-type="sect1"><div class="sect1" id="id671">&#13;
<h1>String Helpers, Pluralization, and Localization</h1>&#13;
&#13;
<p>As developers, we tend to look at blocks of text as big placeholder divs, waiting for the client to put real content into them. Seldom are we involved in any logic inside these blocks.</p>&#13;
&#13;
<p>But there are a few circumstances where you’ll be grateful for the tools Laravel provides for string manipulation.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The String Helpers and Pluralization" data-type="sect2"><div class="sect2" id="id141">&#13;
<h2>The String Helpers and Pluralization</h2>&#13;
&#13;
<p>Laravel<a data-primary="frontend components" data-secondary="string helpers and pluralization" data-type="indexterm" id="id1181"/><a data-primary="string helpers" data-type="indexterm" id="id1182"/><a data-primary="helpers" data-secondary="strings" data-type="indexterm" id="id1183"/><a data-primary="pluralization" data-type="indexterm" id="id1184"/> has a series of helpers for manipulating strings. They’re available as methods on the <code>Str</code> class (e.g., <code>Str::plural()</code>).</p>&#13;
<div data-type="note" epub:type="note"><h1>Laravel String and Array Global Helpers</h1>&#13;
<p>Older versions of Laravel included global helpers that were aliases for the <code>Str</code> and <code>Arr</code> methods. These global <code>str_</code> and <code>array_</code> helpers were removed from Laravel in version 6 and exported to a separate package. If you’d like, you can install the <code>laravel/helpers</code> package via Composer: <code>composer require laravel/helpers</code>.</p>&#13;
</div>&#13;
&#13;
<p>The Laravel <a href="https://oreil.ly/vssfi">documentation</a> covers all of the string helpers in detail, but here are a few of the most commonly used ones:</p>&#13;
<dl>&#13;
<dt><code>e()</code></dt>&#13;
<dd>&#13;
<p>A shortcut for <code>html_entities()</code>; encodes all HTML entities for safety.</p>&#13;
</dd>&#13;
<dt><code>Str::startsWith()</code>, <code>Str::endsWith()</code>, <code>Str::contains()</code></dt>&#13;
<dd>&#13;
<p>Checks a string (first parameter) to see if it starts with, ends with, or contains another string (second parameter).</p>&#13;
</dd>&#13;
<dt><code>Str::is()</code></dt>&#13;
<dd>&#13;
<p>Checks whether a string (second parameter) matches a particular pattern (first parameter)—for example, <code>foo*</code> will match <code>foobar</code> and <code>foobaz</code>.</p>&#13;
</dd>&#13;
<dt><code>Str::slug()</code></dt>&#13;
<dd>&#13;
<p>Converts a string to a URL-type slug with hyphens.</p>&#13;
</dd>&#13;
<dt><code>Str::plural(<em>word</em>, <em>count</em>)</code>, <code>Str::singular()</code></dt>&#13;
<dd>&#13;
<p>Pluralizes or singularizes a word; English only (e.g., <code>Str::plural('dog')</code> returns <code>dogs</code>; <code>Str::plural('dog,' 1'))</code> returns <code>dog</code>).</p>&#13;
</dd>&#13;
<dt><code>Str::camel()</code>, <code>Str::kebab()</code>, <code>Str::snake()</code>, <code>Str::studly()</code>, <code>Str::title()</code></dt>&#13;
<dd>&#13;
<p>Converts a provided string to a different capitalization “case.”</p>&#13;
</dd>&#13;
<dt><code>Str::after()</code>, <code>Str::before()</code>, <code>Str::limit()</code></dt>&#13;
<dd>&#13;
<p>Trims a string and provides a substring. <code>Str::after()</code> returns everything after a given string, and <code>Str::before()</code> returns everything before a given string (both accept the full string as the first parameter and the string you’re using to cut as the second). <code>Str::limit()</code> truncates a string (first parameter) to a given number of characters (second parameter).</p>&#13;
</dd>&#13;
<dt><code>Str::markdown(<em>string</em>, <em>options</em>)</code></dt>&#13;
<dd>&#13;
<p>Converts Markdown into HTML. You can read more about the options you can pass on <a href="https://oreil.ly/3zOdm">the PHP league website</a>.</p>&#13;
</dd>&#13;
<dt><code>Str::replace(<em>search</em>, <em>replace</em>, <em>subject</em>, <em>caseSensitive</em>)</code></dt>&#13;
<dd>&#13;
<p>Looks in the subject string for the search string occurrence and replaces it with the replace string. If the case sensitivity parameter is true, only replace if the occurrence matches the search case (e.g., <code>Str::replace('Running', 'Going', 'Laravel Up and Running', true)</code> returns <code>'Laravel Up and Going'</code>).</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Localization" data-type="sect2"><div class="sect2" id="id142">&#13;
<h2>Localization</h2>&#13;
&#13;
<p>Localization<a data-primary="frontend components" data-secondary="localization" data-type="indexterm" id="FEClocaliz06"/><a data-primary="localization" data-type="indexterm" id="localiz06"/> enables you to define multiple languages and mark any strings as targets for<a data-primary="translation" data-type="indexterm" id="transo6"/> translation. You can set a fallback language and even handle pluralization &#13;
<span class="keep-together">variations</span>.</p>&#13;
&#13;
<p>In Laravel, you’ll need to set an “application locale” at some point during the page load so the localization helpers know which bucket of translations to pull from. Each “locale” is usually connected to a translation and will often look like “en” (for English). You’ll do this with <code>App::setLocale($localeName)</code>, and you’ll likely put it in a service provider. For now, you can just put it in the <code>boot()</code> method of <span class="keep-together"><code>AppServiceProvider</code></span>, but you may want to create a <code>LocaleServiceProvider</code> if you end up with more than just this one locale-related binding.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id1185">&#13;
<h1>Setting the Locale for Each Request</h1>&#13;
<p>It can be confusing at first to work out how Laravel “knows” the user’s locale or <span class="keep-together">provides</span> translations. Most of that work is down to you as the developer. Let’s look at a likely scenario.</p>&#13;
&#13;
<p>You’ll probably have some functionality allowing the user to choose a locale, or possibly attempting to automatically detect it. Either way, your application will determine the locale, and then you’ll store that in a URL parameter or a session cookie. Then your service provider—​something like a <code>LocaleServiceProvider</code>, maybe—​will grab that key and set it as a part of Laravel’s bootstrap.</p>&#13;
&#13;
<p>So maybe your user is at <em>http://myapp.com/es/contacts</em>. Your <code>LocaleServiceProvider</code> will grab that <code>es</code> string and then run <code>App::setLocale('es')</code>. Going forward, every time you ask for a translation of a string, Laravel will look for the Spanish (<code>es</code> means Español) version of that string, which you will need to have defined somewhere.</p>&#13;
</div></aside>&#13;
&#13;
<p>You can define your fallback locale in <em>config/app.php</em>, where you should find a <span class="keep-together"><code>fallback_locale</code></span> key. This allows you to define a default language for your application, which Laravel will use if it can’t find a translation for the requested locale.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Basic localization" data-type="sect3"><div class="sect3" id="id672">&#13;
<h3>Basic localization</h3>&#13;
&#13;
<p>So, how do we call for a translated string? There’s a helper function, <code>__($key)</code>, that will pull the string for the current locale for the passed key or, if it doesn’t exist, grab it from the default locale. In Blade you can also use the <code>@lang()</code> directive. <a data-type="xref" href="#EX517">Example 6-9</a> demonstrates how a basic translation works. We’ll use the example of a “back to the dashboard” link at the top of a detail page.</p>&#13;
<div data-type="example" id="EX517">&#13;
<h5><span class="label">Example 6-9. </span>Basic use of <code>__()</code></h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// Normal PHP</code>&#13;
<code class="o">&lt;?</code><code class="nx">php</code> <code class="k">echo</code> <code class="nx">__</code><code class="p">(</code><code class="s1">'navigation.back'</code><code class="p">);</code> <code class="cp">?&gt;</code><code class="x"/></pre>&#13;
&#13;
<pre data-type="programlisting">// Blade&#13;
{{ __('navigation.back') }}&#13;
&#13;
// Blade directive&#13;
@lang('navigation.back')</pre></div>&#13;
&#13;
<p>Let’s assume we are using the <code>es</code> locale right now. First, we’ll need to publish the <code>lang</code> files for modification:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting">php<code class="w"> </code>artisan<code class="w"> </code>lang:publish<code class="w"/></pre>&#13;
&#13;
<p>This command publishes the default Laravel <code>lang</code> files to the root of your application. You’ll want to create a file to define your navigation-related translations, <em>lang/en/navigation.php</em>, and have it return a PHP array with a key named <code>back</code> in it, as in <a data-type="xref" href="#sample_navigation_en_file">Example 6-10</a>.</p>&#13;
<div data-type="example" id="sample_navigation_en_file">&#13;
<h5><span class="label">Example 6-10. </span>Example lang/en/navigation.php file</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;?</code><code class="nx">php</code>&#13;
&#13;
<code class="k">return</code> <code class="p">[</code>&#13;
    <code class="s1">'back'</code> <code class="o">=&gt;</code> <code class="s1">'Return to dashboard'</code><code class="p">,</code>&#13;
<code class="p">];</code></pre></div>&#13;
&#13;
<p>Now, to make this translatable, let’s also create an <em>es</em> directory under <em>lang</em>, with its own <em>navigation.php</em> file, as you can see in <a data-type="xref" href="#sample_navigation_es_file">Example 6-11</a>.</p>&#13;
<div data-type="example" id="sample_navigation_es_file">&#13;
<h5><span class="label">Example 6-11. </span>Example lang/es/navigation.php file</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="o">&lt;?</code><code class="nx">php</code>&#13;
&#13;
<code class="k">return</code> <code class="p">[</code>&#13;
    <code class="s1">'back'</code> <code class="o">=&gt;</code> <code class="s1">'Volver al panel'</code><code class="p">,</code>&#13;
<code class="p">];</code></pre></div>&#13;
&#13;
<p>Now let’s try using that translation key in our app, in <a data-type="xref" href="#EX518">Example 6-12</a>.</p>&#13;
<div data-type="example" id="EX518">&#13;
<h5><span class="label">Example 6-12. </span>Using a translation</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// routes/web.php</code>&#13;
<code class="nx">Route</code><code class="o">::</code><code class="na">get</code><code class="p">(</code><code class="s1">'/es/contacts/show/{id}'</code><code class="p">,</code> <code class="k">function</code> <code class="p">()</code> <code class="p">{</code>&#13;
    <code class="c1">// Set the locale manually, for this example, instead of in a service provider</code>&#13;
    <code class="nx">App</code><code class="o">::</code><code class="na">setLocale</code><code class="p">(</code><code class="s1">'es'</code><code class="p">);</code>&#13;
    <code class="k">return</code> <code class="nx">view</code><code class="p">(</code><code class="s1">'contacts.show'</code><code class="p">);</code>&#13;
<code class="p">});</code>&#13;
&#13;
<code class="c1">// resources/views/contacts/show.blade.php</code>&#13;
<code class="o">&lt;</code><code class="nx">a</code> <code class="nx">href</code><code class="o">=</code><code class="s2">"/contacts"</code><code class="o">&gt;</code><code class="p">{{</code> <code class="nx">__</code><code class="p">(</code><code class="s1">'navigation.back'</code><code class="p">)</code> <code class="p">}}</code><code class="o">&lt;/</code><code class="nx">a</code><code class="o">&gt;</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Parameters in localization" data-type="sect3"><div class="sect3" id="id673">&#13;
<h3>Parameters in localization</h3>&#13;
&#13;
<p>The preceding example was relatively simple. Let’s dig into some that are more complex. What if we want to define <em>which</em> dashboard we’re returning to? Take a look at <a data-type="xref" href="#EX519">Example 6-13</a>.</p>&#13;
<div data-type="example" id="EX519">&#13;
<h5><span class="label">Example 6-13. </span>Parameters in translations</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// lang/en/navigation.php</code>&#13;
<code class="k">return</code> <code class="p">[</code>&#13;
    <code class="s1">'back'</code> <code class="o">=&gt;</code> <code class="s1">'Back to :section dashboard'</code><code class="p">,</code>&#13;
<code class="p">];</code>&#13;
&#13;
<code class="c1">// resources/views/contacts/show.blade.php</code>&#13;
<code class="p">{{</code> <code class="nx">__</code><code class="p">(</code><code class="s1">'navigation.back'</code><code class="p">,</code> <code class="p">[</code><code class="s1">'section'</code> <code class="o">=&gt;</code> <code class="s1">'contacts'</code><code class="p">])</code> <code class="p">}}</code></pre></div>&#13;
&#13;
<p>As you can see, prepending a word with a colon (<code>:section</code>) marks it as a placeholder that can be replaced. The second, optional, parameter of <code>__()</code> is an array of values to replace the placeholders.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Pluralization in localization" data-type="sect3"><div class="sect3" id="id143">&#13;
<h3>Pluralization in localization</h3>&#13;
&#13;
<p>We<a data-primary="pluralization" data-type="indexterm" id="id1186"/> already covered pluralization, so now just imagine you’re defining your own pluralization rules. There are two ways to do it; we’ll start with the simplest, as shown in <a data-type="xref" href="#EX520">Example 6-14</a>.</p>&#13;
<div data-type="example" id="EX520">&#13;
<h5><span class="label">Example 6-14. </span>Defining a simple translation with an option for pluralization</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// lang/en/messages.php</code>&#13;
<code class="k">return</code> <code class="p">[</code>&#13;
    <code class="s1">'task-deletion'</code> <code class="o">=&gt;</code> <code class="s1">'You have deleted a task|You have successfully deleted tasks'</code><code class="p">,</code>&#13;
<code class="p">];</code>&#13;
&#13;
<code class="c1">// resources/views/dashboard.blade.php</code>&#13;
<code class="o">@</code><code class="k">if</code> <code class="p">(</code><code class="nv">$numTasksDeleted</code> <code class="o">&gt;</code> <code class="mi">0</code><code class="p">)</code>&#13;
    <code class="p">{{</code> <code class="nx">trans_choice</code><code class="p">(</code><code class="s1">'messages.task-deletion'</code><code class="p">,</code> <code class="nv">$numTasksDeleted</code><code class="p">)</code> <code class="p">}}</code>&#13;
<code class="o">@</code><code class="k">endif</code></pre></div>&#13;
&#13;
<p>As you can see, we have a <code>trans_choice()</code> method, which takes the count of items affected as its second parameter; from this, it will determine which string to use.</p>&#13;
&#13;
<p>You can also use any translation definitions that are compatible with Symfony’s much more complex <code>Translation</code> component; see <a data-type="xref" href="#EX521">Example 6-15</a> for an example.</p>&#13;
<div data-type="example" id="EX521">&#13;
<h5><span class="label">Example 6-15. </span>Using the Symfony <code>Translation</code> component</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// lang/es/messages.php</code>&#13;
<code class="k">return</code> <code class="p">[</code>&#13;
    <code class="s1">'task-deletion'</code> <code class="o">=&gt;</code> <code class="s2">"{0} You didn't manage to delete any tasks.|"</code> <code class="o">.</code>&#13;
        <code class="s2">"[1,4] You deleted a few tasks.|"</code> <code class="o">.</code>&#13;
        <code class="s2">"[5,Inf] You deleted a whole ton of tasks."</code><code class="p">,</code>&#13;
<code class="p">];</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Storing the default string as the key with JSON" data-type="sect3"><div class="sect3" id="id144">&#13;
<h3>Storing the default string as the key with JSON</h3>&#13;
&#13;
<p>One common difficulty with localization is that it’s hard to ensure there’s a good system for defining key namespacing—​for example, remembering a key nested three or four levels deep or being unsure which key a phrase used twice in the site should use.</p>&#13;
&#13;
<p>An alternative to the slug key/string value pair system is to store your translations using your primary language string as the key, instead of a made-up slug. You can indicate to Laravel that you’re working this way by storing your translation files as JSON in the <em>lang</em> directory, with the filename reflecting the locale (<a data-type="xref" href="#EX6a">Example 6-16</a>).</p>&#13;
<div data-type="example" id="EX6a">&#13;
<h5><span class="label">Example 6-16. </span>Using JSON translations and the <code>__()</code> helper</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="c1">// In Blade</code>&#13;
<code class="p">{{</code> <code class="nx">__</code><code class="p">(</code><code class="s1">'View friends list'</code><code class="p">)</code> <code class="p">}}</code></pre>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// lang/es.json</code>&#13;
<code class="p">{</code>&#13;
  <code class="s1">'View friends list'</code><code class="o">:</code> <code class="s1">'Ver lista de amigos'</code>&#13;
<code class="p">}</code></pre></div>&#13;
&#13;
<p>This is taking advantage of the fact that the <code>__()</code> translation helper, if it can’t find a matching key for the current language, will just display the key. If your key is the string in your app’s default language, that’s a much more reasonable fallback than, for<a data-primary="" data-startref="FEClocaliz06" data-type="indexterm" id="id1187"/> example, <code>widgets.friends.title</code>.</p>&#13;
</div></section>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Testing" data-type="sect1"><div class="sect1" id="id427">&#13;
<h1>Testing</h1>&#13;
&#13;
<p>In<a data-primary="frontend components" data-secondary="testing" data-type="indexterm" id="id1188"/><a data-primary="testing" data-secondary="frontend components" data-type="indexterm" id="id1189"/> this chapter we focused primarily on Laravel’s frontend components. These are less likely the objects of unit tests, but they may at times be used in your integration tests.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Testing Message and Error Bags" data-type="sect2"><div class="sect2" id="id145">&#13;
<h2>Testing Message and Error Bags</h2>&#13;
&#13;
<p>There<a data-primary="message bags" data-type="indexterm" id="id1190"/><a data-primary="error bags" data-type="indexterm" id="id1191"/> are two primary ways of testing messages passed along with message and error bags. First, you can perform a behavior in your application tests that sets a message that will eventually be displayed somewhere, then redirect to that page and assert that the appropriate message is shown.</p>&#13;
&#13;
<p>Second, for errors (which is the most common use case), you can assert the session has errors with <code>$this-&gt;assertSessionHasErrors($bindings = [])</code>. Take a look at <a data-type="xref" href="#EX522">Example 6-17</a> to see what this might look like.</p>&#13;
<div data-type="example" id="EX522">&#13;
<h5><span class="label">Example 6-17. </span>Asserting the session has errors</h5>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">public</code> <code class="k">function</code> <code class="nf">test_missing_email_field_errors</code><code class="p">()</code>&#13;
<code class="p">{</code>&#13;
    <code class="nv">$this</code><code class="o">-&gt;</code><code class="na">post</code><code class="p">(</code><code class="s1">'person/create'</code><code class="p">,</code> <code class="p">[</code><code class="s1">'name'</code> <code class="o">=&gt;</code> <code class="s1">'Japheth'</code><code class="p">]);</code>&#13;
    <code class="nv">$this</code><code class="o">-&gt;</code><code class="na">assertSessionHasErrors</code><code class="p">([</code><code class="s1">'email'</code><code class="p">]);</code>&#13;
<code class="p">}</code></pre></div>&#13;
&#13;
<p>In order for <a data-type="xref" href="#EX522">Example 6-17</a> to pass, you’ll need to add input validation to that route. We’ll cover this in <a data-type="xref" href="ch07.html#collecting_and_handling_user_data">Chapter 7</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Translation and Localization" data-type="sect2"><div class="sect2" id="id146">&#13;
<h2>Translation and Localization</h2>&#13;
&#13;
<p>The simplest way to test localization is with application tests. Set the appropriate context (whether by URL or session), “visit” the page with <code>get()</code>, and assert that you see the appropriate content.<a data-primary="" data-startref="localiz06" data-type="indexterm" id="id1192"/><a data-primary="" data-startref="transo6" data-type="indexterm" id="id1193"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Disabling Vite in Testing" data-type="sect2"><div class="sect2" id="id571">&#13;
<h2>Disabling Vite in Testing</h2>&#13;
&#13;
<p>If<a data-primary="frontend components" data-secondary="Laravel's Vite configuration" data-tertiary="disabling in testing" data-type="indexterm" id="id1194"/> you’d like to disable Vite’s asset resolution during your tests, you can disable Vite entirely by calling the <code>withoutVite()</code> method at the top of a test:</p>&#13;
&#13;
<pre data-code-language="php" data-type="programlisting"><code class="k">public</code> <code class="k">function</code> <code class="nf">test_it_runs_without_vite</code><code class="p">()</code>&#13;
<code class="p">{</code>&#13;
    <code class="nv">$this</code><code class="o">-&gt;</code><code class="na">withoutVite</code><code class="p">();</code>&#13;
&#13;
    <code class="c1">// Test stuff</code>&#13;
<code class="p">}</code></pre>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="TL;DR" data-type="sect1"><div class="sect1" id="id428">&#13;
<h1>TL;DR</h1>&#13;
&#13;
<p>As<a data-primary="frontend components" data-secondary="overview of" data-type="indexterm" id="id1195"/> a full stack framework, Laravel provides tools and components for the frontend as well as the backend.</p>&#13;
&#13;
<p>Vite is a build tool and dev server that Laravel builds on top of to help process, compress, and version your JavaScript, CSS, and static assets like images.</p>&#13;
&#13;
<p>Laravel also offers other internal tools that target the frontend, including tools for implementing pagination, message and error bags, and localization.</p>&#13;
</div></section>&#13;
</div></section></body></html>