<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 18. Using Asynchronous Communication" class="calibre4"><div class="preface" id="using_ajax">
<h1 class="calibre10"><span class="keep-together">Chapter 18. </span>Using Asynchronous Communication</h1>

<p class="author1">The<a contenteditable="false" data-primary="asynchronous communication" data-secondary="Ajax and" data-type="indexterm" id="idm45694696102168" class="calibre6"/><a contenteditable="false" data-primary="Ajax (Asynchronous JavaScript and XML)" data-type="indexterm" id="idm45694696100792" class="calibre6"/><a contenteditable="false" data-primary="Ajax (Asynchronous JavaScript and XML)" data-see="also asynchronous communication" data-type="indexterm" id="idm45694696099720" class="calibre6"/><a contenteditable="false" data-primary="JavaScript" data-secondary="asynchronous communication using" data-type="indexterm" id="JSasync17" class="calibre6"/> term <em class="hyperlink">Ajax</em> was first coined in 2005. It stands for <em class="hyperlink">Asynchronous JavaScript and XML</em>, which, in simple terms, means using a set of methods built into JavaScript to transfer data between the browser and a server in the background. This term has now been mostly abandoned in favor of simply talking about asynchronous communication.</p>

<p class="author1">An<a contenteditable="false" data-primary="asynchronous communication" data-secondary="Google Maps example" data-type="indexterm" id="idm45694696095160" class="calibre6"/><a contenteditable="false" data-primary="Google Maps" data-type="indexterm" id="idm45694696093784" class="calibre6"/> excellent example of this technology is Google Maps (see <a data-type="xref" href="#google_maps_is_an_excellent_example_of_a" class="calibre6">Figure 18-1</a>), in which new sections of a map are downloaded from the server when needed, without requiring a page refresh.</p>

<p class="author1">Using asynchronous communication not only substantially reduces the amount of data that must be sent back and forth but also makes web pages seamlessly dynamic—allowing them to behave more like self-contained applications. The results are a much improved user interface and better responsiveness.</p>

<figure class="calibre23"><div id="google_maps_is_an_excellent_example_of_a" class="figure"><img alt="Google Maps is an excellent example of Ajax" src="Images/pmj6_1801.png" class="calibre91"/>
<h6 class="calibre24"><span class="keep-together">Figure 18-1. </span>Google Maps is an excellent example of asynchronous communication</h6>
</div></figure>

<section data-type="sect1" data-pdf-bookmark="What Is Asynchronous Communication?" class="calibre4"><div class="preface" id="what_is_ajaxquestion_mark">
<h1 class="calibre11">What Is Asynchronous Communication?</h1>

<p class="author1">Asynchronous communication<a contenteditable="false" data-primary="asynchronous communication" data-secondary="defined" data-type="indexterm" id="idm45694696086936" class="calibre6"/><a contenteditable="false" data-primary="XMLHttpRequest" data-secondary="history of" data-type="indexterm" id="idm45694696085592" class="calibre6"/><a contenteditable="false" data-primary="ActiveX technology" data-type="indexterm" id="idm45694696084216" class="calibre6"/> as used today had its beginning with the release of Internet Explorer 5 in 1999, which introduced a new ActiveX object, <code class="calibre15">XMLHttpRequest</code>. ActiveX is Microsoft’s technology for signing plug-ins that install additional software on your computer. Other browser developers later followed suit, but rather than using ActiveX, they all implemented the feature as a native part of the JavaScript interpreter.</p>

<p class="author1">However, even before then, an early form of the technology had already surfaced that used hidden frames on a page that interacted with the server in the background. Chat rooms were early adopters, using it to poll for and display new message posts without requiring page reloads.</p>

<p class="author1">So, let’s see how to implement asynchronous communication by using JavaScript.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Using XMLHttpRequest" class="calibre4"><div class="preface" id="using_xmlhttprequest">
<h1 class="calibre11">Using XMLHttpRequest</h1>

<p class="author1">In<a contenteditable="false" data-primary="asynchronous communication" data-secondary="implementation with XMLHttpRequest" data-type="indexterm" id="ACxml17" class="calibre6"/> the past, making Ajax calls was a real pain in the neck because there were so many different implementations across various browsers, and especially between different versions of Microsoft’s Internet Explorer. Luckily things are vastly improved these days, and there’s just the simple <code class="calibre15">XMLHttpRequest</code> object to work with in one unified manner.</p>

<p class="author1">So, for example, to make a GET request, you use code such as this:</p>

<pre data-code-language="javascript" data-programming-language="perl" class="calibre29">
<code class="k">let</code><code class="calibre15"> </code><code class="n">XHR</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="k">new</code><code class="calibre15"> </code><code class="n">XMLHttpRequest</code><code class="p">(</code><code class="p">)</code><code class="calibre15">

</code><code class="n">XHR</code><code class="p">.</code><code class="n">open</code><code class="p">(</code><code class="s">"</code><strong class="calibre31"><code class="s2">GET</code></strong><code class="s">"</code><code class="p">,</code><code class="calibre15"> </code><code class="s">"resource.info"</code><code class="p">,</code><code class="calibre15"> </code><code class="k">true</code><code class="p">)</code><code class="calibre15">
</code><code class="n">XHR</code><code class="p">.</code><code class="n">setRequestHeader</code><code class="p">(</code><code class="s">"Content-type"</code><code class="p">,</code><code class="calibre15"> </code><code class="s">"application/x-www-form-urlencoded"</code><code class="p">)</code><code class="calibre15">
</code><code class="n">XHR</code><code class="p">.</code><code class="n">send</code><code class="p">(</code><code class="p">)</code></pre>

<p class="author1">Or, for a POST request, just replace the <code class="calibre15">GET</code> with <code class="calibre15">POST</code>; it’s that simple.</p>

<section data-type="sect2" data-pdf-bookmark="Your First Asynchronous Program" class="calibre4"><div class="preface" id="your_first_ajax_program">
<h2 class="calibre28">Your First Asynchronous Program</h2>

<p class="author1">Type<a contenteditable="false" data-primary="XMLHttpRequest" data-secondary="asynchronous program using" data-type="indexterm" id="XMHprog17" class="calibre6"/> and save the code in <a data-type="xref" href="#urlpostdothtml" class="calibre6">Example 18-1</a> as <em class="hyperlink">urlpost.html</em>, but don’t load it into your browser yet.</p>

<div data-type="example" id="urlpostdothtml" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 18-1. </span>urlpost.html</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code>
<code class="nt">&lt;html&gt;</code> <code class="c4">&lt;!-- urlpost.html --&gt;</code>
  <code class="nt">&lt;head&gt;</code>
    <code class="nt">&lt;title&gt;</code>Asynchronous Communication Example<code class="nt">&lt;/title&gt;</code>
  <code class="nt">&lt;/head&gt;</code>
  <code class="nt">&lt;body</code> <code class="na">style=</code><code class="s">'text-align:center'</code><code class="nt">&gt;</code>
    <code class="nt">&lt;h1&gt;</code>Loading a web page into a DIV<code class="nt">&lt;/h1&gt;</code>
    <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">'info'</code><code class="nt">&gt;</code>This sentence will be replaced<code class="nt">&lt;/div&gt;</code>

    <code class="nt">&lt;script&gt;</code>
      <code class="k">let</code> <code class="n">XHR</code> <code class="o">=</code> <code class="k">new</code> <code class="n">XMLHttpRequest</code><code class="p">()</code>

      <code class="n">XHR</code><code class="p">.</code><code class="n">open</code><code class="p">(</code><code class="s">"POST"</code><code class="p">,</code> <code class="s">"http://127.0.0.1/18/urlpost.php"</code><code class="p">,</code> <code class="k">true</code><code class="p">)</code>
      <code class="n">XHR</code><code class="p">.</code><code class="n">setRequestHeader</code><code class="p">(</code><code class="s">"Content-type"</code><code class="p">,</code> <code class="s">"application/x-www-form-urlencoded"</code><code class="p">)</code>
      <code class="n">XHR</code><code class="p">.</code><code class="n">send</code><code class="p">(</code><code class="s">"url=news.com"</code><code class="p">)</code>

      <code class="n">XHR</code><code class="p">.</code><code class="n">onreadystatechange</code> <code class="o">=</code> <code class="k">function</code><code class="p">()</code>
      <code class="p">{</code>
        <code class="k">if</code> <code class="p">(</code><code class="k">this</code><code class="p">.</code><code class="n">readyState</code> <code class="o">==</code> <code class="mi">4</code> <code class="o">&amp;&amp;</code> <code class="k">this</code><code class="p">.</code><code class="n">status</code> <code class="o">==</code> <code class="mi">200</code><code class="p">)</code>
        <code class="p">{</code>
          <code class="nb">document</code><code class="p">.</code><code class="n">getElementById</code><code class="p">(</code><code class="s">"info"</code><code class="p">).</code><code class="n">innerHTML</code> <code class="o">=</code> <code class="k">this</code><code class="p">.</code><code class="n">responseText</code>
        <code class="p">}</code>
      <code class="p">}</code>      
    <code class="nt">&lt;/script&gt;</code>
  <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code>
</pre>
</div>

<p class="author1">Let’s go through this document and look at what it does, starting with the first eight lines, which simply set up an HTML document and display a heading. The next line creates a <code class="calibre15">&lt;div&gt;</code> with the ID <code class="calibre15">info</code>, containing the text <code class="calibre15">This sentence will be <span class="keep-together">replaced</span></code> by default. Later on, the text returned from the call will be inserted here.</p>

<p class="author1">After this, a new <code class="calibre15">XMLHttpRequest</code> object is created called <code class="calibre15">XHR</code>. Using this, the resource to load is opened by calling <code class="calibre15">XHR.open</code>. In this case, to avoid cross-origin Ajax issues in modern  browsers, the localhost IP address of <code class="calibre15">http://127.0.0.1</code> is chosen, followed by the chapter folder <code class="calibre15">18</code> and then the PHP program <code class="calibre15">urlpost.php</code>, which we’ll get to shortly.</p>

<div data-type="note" epub:type="note" class="calibre19"><h6 class="calibre20">Note</h6>
<p class="author1">If you set up a development server using AMPPS (or a similar WAMP, LAMP, or MAMP) in <a data-type="xref" href="ch02.xhtml#setting_up_a_development_server" class="calibre6">Chapter 2</a>, downloaded the example files from<a href="https://github.com/RobinNixon/lpmj6" class="calibre6">GitHub</a> and saved them in the document root of the web server (as described in that chapter), the Chapter 18 folder will be in the right place for this code to work correctly. If any part of your setup is different, or you run this code on a development server using a domain of your choice, you will have to change those values in this code accordingly.</p>
</div>

<p class="author1">After<a contenteditable="false" data-primary="XHR.setRequestHeader" data-type="indexterm" id="idm45694695779272" class="calibre6"/> specifying the resource to load, <code class="calibre15">XHR.setRequestHeader</code> is called, passing the required headers to be sent to the resource server, and the value to be posted is sent in a call to <code class="calibre15">XHR.send</code>. In this case it’s the main page at <em class="hyperlink">news.com</em>.</p>

<section data-type="sect3" data-pdf-bookmark="The readyState property" class="calibre4"><div class="preface" id="readystate_property">
<h3 class="calibre43">The readyState property</h3>

<p class="author1">Now<a contenteditable="false" data-primary="readyState property" data-type="indexterm" id="readystate17" class="calibre6"/> we get to the nitty-gritty of an asynchronous call, which all hangs on the <code class="calibre15">readyState</code> property. This allows the browser to keep accepting user input and changing the screen, while our program sets the <code class="calibre15">onreadystatechange</code> property to call a function of our choice each time <code class="calibre15">readyState</code> changes. In this case, a nameless (or anonymous) inline function has been used, as opposed to a separate, named function. This<a contenteditable="false" data-primary="callback functions" data-secondary="defined" data-type="indexterm" id="idm45694695771128" class="calibre6"/> type of function is known as a <em class="hyperlink">callback</em> function, as it is called back each time <code class="calibre15">readyState</code> changes.</p>

<p class="author1">The syntax to set up the callback function using an inline, anonymous function is as follows:</p>

<pre data-code-language="javascript" data-programming-language="perl" class="calibre29">
<code class="n">XHR</code><code class="p">.</code><code class="n">onreadystatechange</code> <code class="o">=</code> <code class="k">function</code><code class="p">()</code>
<code class="p">{</code>
  <code class="k">if</code> <code class="p">(</code><code class="k">this</code><code class="p">.</code><code class="n">readyState</code> <code class="o">==</code> <code class="mi">4</code> <code class="o">&amp;&amp;</code> <code class="k">this</code><code class="p">.</code><code class="n">status</code> <code class="o">==</code> <code class="mi">200</code><code class="p">)</code>
  <code class="p">{</code>
    <code class="c">// do something</code>
  <code class="p">}</code>
<code class="p">}</code></pre>

<p class="author1">If you wish to use a separate, named function, the syntax is slightly different:</p>

<pre data-code-language="javascript" data-programming-language="perl" class="calibre29">
<code class="n">XHR</code><code class="p">.</code><code class="n">onreadystatechange</code> <code class="o">=</code> <code class="n">asyncCallback</code>

<code class="k">function</code> <code class="n">asyncCallback</code><code class="p">()</code>
<code class="p">{</code>
  <code class="k">if</code> <code class="p">(</code><code class="k">this</code><code class="p">.</code><code class="n">readyState</code> <code class="o">==</code> <code class="mi">4</code> <code class="o">&amp;&amp;</code> <code class="k">this</code><code class="p">.</code><code class="n">status</code> <code class="o">==</code> <code class="mi">200</code><code class="p">)</code>
  <code class="p">{</code>
    <code class="c">// do something</code>
  <code class="p">}</code>
<code class="p">}</code></pre>

<p class="author1">As it happens, <code class="calibre15">readyState</code> can have five values, but only one concerns us, the value <code class="calibre15">4</code>, which represents a completed call. Therefore, each time the new function gets called, it returns without doing anything until <code class="calibre15">readyState</code> has a value of <code class="calibre15">4</code>. When our function detects that value, it next inspects the <code class="calibre15">status</code> of the call to ensure it has a value of <code class="calibre15">200</code>, which means that the call succeeded.</p>

<div data-type="note" epub:type="note" class="calibre19"><h6 class="calibre20">Note</h6>
<p class="author1">You will notice that all of these object properties are referenced using <code class="calibre15">this.readyState</code>, <code class="calibre15">this.status</code>, and so on, rather than the object’s current name, <code class="calibre15">XHR</code>, as in <code class="calibre15">XHR.readyState</code> or <code class="calibre15">XHR.status</code>. This is so that you can easily copy and paste the code, and it will work with any object name, because the <code class="calibre15">this</code> keyword always refers to the current object.</p>
</div>

<p class="author1">So, having ascertained that the <code class="calibre15">readyState</code> is <code class="calibre15">4</code> and the <code class="calibre15">status</code> is <code class="calibre15">200</code>, we take the value in <code class="calibre15">responseText</code> and place it into the inner HTML of the <code class="calibre15">&lt;div&gt;</code> that we assigned the <code class="calibre15">id</code> of <code class="calibre15">info</code> to:</p>

<pre data-code-language="javascript" data-programming-language="perl" class="calibre29">
<code class="nb">document</code><code class="p">.</code><code class="n">getElementById</code><code class="p">(</code><code class="s">"info"</code><code class="p">).</code><code class="n">innerHTML</code> <code class="o">=</code> <code class="k">this</code><code class="p">.</code><code class="n">responseText</code></pre>

<p class="author1">In this line, the element <code class="calibre15">info</code> is referenced via the <code class="calibre15">getElementById</code> method, and then its <code class="calibre15">innerHTML</code> property is assigned the value that was returned by the call. The effect is that this element of the web page changes, while everything else remains the same.</p>
</div></section>

<section data-type="sect3" data-pdf-bookmark="The server half of the asynchronous process" class="calibre4"><div class="preface" id="server_half_of_the_ajax_process">
<h3 class="calibre43">The server half of the asynchronous process</h3>

<p class="author1">Now<a contenteditable="false" data-primary="servers" data-secondary="role in asynchronous communication" data-type="indexterm" id="idm45694695630968" class="calibre6"/><a contenteditable="false" data-primary="PHP programming language" data-secondary="asynchronous communication using" data-type="indexterm" id="idm45694695629592" class="calibre6"/> we get to the PHP half of the equation, which you can see in <a data-type="xref" href="#urlpostdotphp" class="calibre6">Example 18-2</a>. Type this code and save it as <em class="hyperlink">urlpost.php</em>.</p>

<div data-type="example" id="urlpostdotphp" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 18-2. </span>urlpost.php</h5>

<pre data-code-language="php" data-programming-language="perl" class="calibre29">
<code class="o">&lt;?</code><code class="n">php</code> <code class="c">// urlpost.php</code>
  <code class="k">if</code> <code class="p">(</code><code class="nb">isset</code><code class="p">(</code><code class="nv">$_POST</code><code class="p">[</code><code class="s">'url'</code><code class="p">]))</code>
  <code class="p">{</code>
    <code class="k">echo</code> <code class="nb">file_get_contents</code><code class="p">(</code><code class="s">'http://'</code> <code class="o">.</code> <code class="n">SanitizeString</code><code class="p">(</code><code class="nv">$_POST</code><code class="p">[</code><code class="s">'url'</code><code class="p">]));</code>
  <code class="p">}</code>

  <code class="k">function</code> <code class="nf">SanitizeString</code><code class="p">(</code><code class="nv">$var</code><code class="p">)</code>
  <code class="p">{</code>
    <code class="nv">$var</code> <code class="o">=</code> <code class="nb">strip_tags</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code>
    <code class="nv">$var</code> <code class="o">=</code> <code class="nb">htmlentities</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code>
    <code class="k">return</code> <code class="nb">stripslashes</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code>
  <code class="p">}</code>
<code class="cp">?&gt;</code><code class="x"/></pre>
</div>

<p class="author1">As you can see, this is short and sweet and also makes use of the ever-important <span class="keep-together"><code class="calibre15">SanitizeString</code></span> function, as should be done with all posted data. In this instance, unsanitized data could result in the user inserting JavaScript and gaining an advantage over your code.</p>

<p class="author1">This program uses the <code class="calibre15">file_get_contents</code> PHP function to load in the web page at the URL supplied to it in the variable <code class="calibre15">$_POST['url']</code>. The <code class="calibre15">file_get_contents</code> function is versatile in that it loads in the entire contents of a file or web page from either a local or a remote server; it even takes into account moved pages and other redirects.</p>

<p class="author1">Once you have typed the program, you are ready to call up <em class="hyperlink">urlpost.html</em> in your web browser, and after a few seconds you should see the contents of the <em class="hyperlink">news.com</em> front page loaded into the <code class="calibre15">&lt;div&gt;</code> that we created for that purpose.</p>

<div data-type="note" epub:type="note" class="calibre19"><h6 class="calibre20">Note</h6>
<p class="author1">Cross-origin<a contenteditable="false" data-primary="cross-origin security" data-type="indexterm" id="idm45694695507608" class="calibre6"/><a contenteditable="false" data-primary="security issues" data-secondary="cross-origin security" data-type="indexterm" id="idm45694695506472" class="calibre6"/> security makes using Ajax a little harder than it used to be because you must be precise and clear about loading files. In the case of this example on a development server on localhost, you will need to refer to the file using its IP address. So, for example, if you saved the example files in the document root of an AMPPS server as set out in <a data-type="xref" href="ch02.xhtml#setting_up_a_development_server" class="calibre6">Chapter 2</a>, then the files will all be in the subfolder called <em class="hyperlink">18</em>.</p>
</div>

<p class="author1">To test the program, enter the following into your browser:</p>

<pre data-type="programlisting" class="calibre29">
http://127.0.0.1/18/urlpost.html</pre>

<p class="author1">It won’t be as fast as directly loading the web page, because it is transferred twice—once to the server and again from the server to your browser—but the result should look like <a data-type="xref" href="#the-newscom-front-page" class="calibre6">Figure 18-2</a>.</p>

<figure class="calibre23"><div id="the-newscom-front-page" class="figure"><img alt="" class="iimageswp2divpng" src="Images/pmj6_1802.png"/>
<h6 class="calibre24"><span class="keep-together">Figure 18-2. </span>The news.com front page</h6>
</div></figure>

<p class="author1">Not only have we succeeded in making an asynchronous call and having a response returned to JavaScript, but we’ve also harnessed the power of PHP to merge in a totally unrelated web object. Incidentally, if we had tried to find a way to asynchronously fetch this web page directly (without recourse to the PHP server-side module), we wouldn’t have succeeded, because there are other security blocks preventing cross-domain asynchronous communication. So, this example also illustrates a handy solution to a practical problem.<a contenteditable="false" data-primary="" data-startref="XMHprog17" data-type="indexterm" id="idm45694695497336" class="calibre6"/></p>
</div></section>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Using GET Instead of POST" class="calibre4"><div class="preface" id="using_get_instead_of_post">
<h2 class="calibre28">Using GET Instead of POST</h2>

<p class="author1">As<a contenteditable="false" data-primary="XMLHttpRequest" data-secondary="using GET instead of POST" data-type="indexterm" id="XHget17" class="calibre6"/><a contenteditable="false" data-primary="GET method (HTTP)" data-secondary="asynchronous communication and" data-type="indexterm" id="GETasyn17" class="calibre6"/><a contenteditable="false" data-primary="POST method (HTTP)" data-secondary="asynchronous communication and" data-type="indexterm" id="POSTasync17" class="calibre6"/><a contenteditable="false" data-primary="HTTP (Hypertext Transfer Protocol)" data-secondary="GET method" data-type="indexterm" id="HTTPget17" class="calibre6"/><a contenteditable="false" data-primary="HTTP (Hypertext Transfer Protocol)" data-secondary="POST method" data-type="indexterm" id="HTTPpost17" class="calibre6"/> when you submit any data from a form, you have the option of submitting your data in the form of GET requests, and you will save a few lines of code if you do so. However, there is a downside: some browsers may cache GET requests, whereas POST requests will never be cached. You don’t want to cache a request, because the browser will just redisplay what it got the last time instead of going to the server for fresh input. The solution to this is to use a workaround that adds a random parameter to each request, ensuring that each URL requested is unique.</p>

<p class="author1"><a data-type="xref" href="#urlgetdothtml" class="calibre6">Example 18-3</a> shows how you would achieve the same result as with <a data-type="xref" href="#urlpostdothtml" class="calibre6">Example 18-1</a> but using a GET request instead of a POST.</p>

<div data-type="example" id="urlgetdothtml" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 18-3. </span>urlget.html</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code><code class="calibre15">
</code><code class="nt">&lt;html</code><code class="nt">&gt;</code><code class="calibre15"> </code><code class="c4">&lt;!--</code><code class="c4"> urlget.html </code><code class="c4">--&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;head</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;title</code><code class="nt">&gt;</code><code class="calibre15">Asynchronous Communication Example</code><code class="nt">&lt;/title&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;/head&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;body</code><code class="calibre15"> </code><code class="na">style=</code><code class="s">'text-align:center'</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;h1</code><code class="nt">&gt;</code><code class="calibre15">Loading a web page into a DIV</code><code class="nt">&lt;/h1&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;div</code><code class="calibre15"> </code><code class="na">id=</code><code class="s">'info'</code><code class="nt">&gt;</code><code class="calibre15">This sentence will be replaced</code><code class="nt">&lt;/div&gt;</code><code class="calibre15">

    </code><code class="nt">&lt;script</code><code class="nt">&gt;</code><code class="calibre15">
     </code><strong class="calibre31"><code class="calibre17"> </code><code class="k1">let</code><code class="calibre17"> </code><code class="nx1">nocache</code><code class="calibre17"> </code><code class="o1">=</code><code class="calibre17"> </code><code class="s2">"&amp;nocache="</code><code class="calibre17"> </code><code class="o1">+</code><code class="calibre17"> </code><code class="nb1">Math</code><code class="p1">.</code><code class="nx1">random</code><code class="p1">(</code><code class="p1">)</code><code class="calibre17"> </code><code class="o1">*</code><code class="calibre17"> </code><code class="mi1">1000000</code></strong><code class="calibre15">
      </code><code class="k">let</code><code class="calibre15"> </code><code class="n">XHR</code><code class="calibre15">     </code><code class="o">=</code><code class="calibre15"> </code><code class="k">new</code><code class="calibre15"> </code><code class="n">XMLHttpRequest</code><code class="p">(</code><code class="p">)</code><code class="calibre15">

      </code><strong class="calibre31"><code class="nx1">XHR</code><code class="p1">.</code><code class="nx1">open</code><code class="p1">(</code><code class="s2">"GET"</code><code class="p1">,</code><code class="calibre17"> </code><code class="s2">"http://127.0.0.1/18/urlget.php?url=news.com"</code><code class="calibre17"> </code><code class="o1">+</code><code class="calibre17"> </code><code class="nx1">nocache</code><code class="p1">,</code><code class="calibre17"> </code><code class="k1">true</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="nx1">XHR</code><code class="p1">.</code><code class="nx1">send</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">

      </code><code class="n">XHR</code><code class="p">.</code><code class="n">onreadystatechange</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="k">function</code><code class="p">(</code><code class="p">)</code><code class="calibre15">
      </code><code class="p">{</code><code class="calibre15">
        </code><code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><code class="k">this</code><code class="p">.</code><code class="n">readyState</code><code class="calibre15"> </code><code class="o">==</code><code class="calibre15"> </code><code class="mi">4</code><code class="calibre15"> </code><code class="o">&amp;&amp;</code><code class="calibre15"> </code><code class="k">this</code><code class="p">.</code><code class="n">status</code><code class="calibre15"> </code><code class="o">==</code><code class="calibre15"> </code><code class="mi">200</code><code class="p">)</code><code class="calibre15">
        </code><code class="p">{</code><code class="calibre15">
          </code><code class="nb">document</code><code class="p">.</code><code class="n">getElementById</code><code class="p">(</code><code class="s">"info"</code><code class="p">)</code><code class="p">.</code><code class="n">innerHTML</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="k">this</code><code class="p">.</code><code class="n">responseText</code><code class="calibre15">
        </code><code class="p">}</code><code class="calibre15">
      </code><code class="p">}</code><code class="calibre15">      
    </code><code class="nt">&lt;/script&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;/body&gt;</code><code class="calibre15">
</code><code class="nt">&lt;/html&gt;</code><code class="calibre15">
</code></pre>
</div>

<p class="author1">The differences to note between the two documents are highlighted in bold and described as follows:</p>

<ul class="printings">
	<li class="calibre9">
	<p class="author1">It is not necessary to send headers for a GET request.</p>
	</li>
	<li class="calibre9">
	<p class="author1">We call the <code class="calibre15">open</code> method using a GET request, supplying a URL with a string comprising a <code class="calibre15">?</code> symbol followed by the parameter/value pair <code class="calibre15">url=news.com</code>.</p>
	</li>
	<li class="calibre9">
	<p class="author1">We provide a second parameter/value pair using an <code class="calibre15">&amp;</code> symbol and then set the value of the parameter <code class="calibre15">nocache</code> to a random value between 0 and 1 million. This is done to ensure that each URL requested is different and therefore that no requests will be cached.</p>
	</li>
	<li class="calibre9">
	<p class="author1">The call to <code class="calibre15">send</code> now has no arguments because nothing is being passed via a <code class="calibre15">POST</code> request that would require it.</p>
	</li>
</ul>

<p class="author1">To accompany this new document, the PHP program must be modified to respond to a GET request, as in <a data-type="xref" href="#urlgetdotphp" class="calibre6">Example 18-4</a>, <em class="hyperlink">urlget.php</em>.</p>

<div data-type="example" id="urlgetdotphp" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 18-4. </span>urlget.php</h5>

<pre data-code-language="php" data-programming-language="perl" class="calibre29">
<code class="o">&lt;</code><code class="o">?</code><code class="n">php</code><code class="calibre15">
  </code><code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><code class="nb">isset</code><code class="p">(</code><strong class="calibre31"><code class="nv1">$_GET</code></strong><code class="p">[</code><code class="s">'url'</code><code class="p">]))</code><code class="calibre15">
  </code><code class="p">{</code><code class="calibre15">
    </code><code class="k">echo</code><code class="calibre15"> </code><code class="nb">file_get_contents</code><code class="p">(</code><code class="s">"</code><code class="s">http://</code><code class="s">"</code><code class="o">.</code><code class="n">sanitizeString</code><code class="p">(</code><strong class="calibre31"><code class="nv1">$_GET</code></strong><code class="p">[</code><code class="s">'url'</code><code class="p">]));</code><code class="calibre15">
  </code><code class="p">}</code><code class="calibre15">

  </code><code class="k">function</code><code class="calibre15"> </code><code class="nf">sanitizeString</code><code class="p">(</code><code class="nv">$var</code><code class="p">)</code><code class="calibre15">
  </code><code class="p">{</code><code class="calibre15">
    </code><code class="nv">$var</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="nb">strip_tags</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code><code class="calibre15">
    </code><code class="nv">$var</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="nb">htmlentities</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code><code class="calibre15">
    </code><code class="k">return</code><code class="calibre15"> </code><code class="nb">stripslashes</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code><code class="calibre15">
  </code><code class="p">}</code><code class="calibre15">
</code><code class="cp">?&gt;</code></pre>
</div>

<p class="author1">The only difference between this and <a data-type="xref" href="#urlpostdotphp" class="calibre6">Example 18-2</a> is that the references to <code class="calibre15">$_POST</code> have been replaced with <code class="calibre15">$_GET</code>. The end result of calling up <em class="hyperlink">urlget.html</em> in your browser is identical to loading <em class="hyperlink">urlpost.html</em>.<a contenteditable="false" data-primary="" data-startref="XHget17" data-type="indexterm" id="idm45694695223944" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="HTTPpost17" data-type="indexterm" id="idm45694695222728" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="HTTPget17" data-type="indexterm" id="idm45694695221352" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="POSTasync17" data-type="indexterm" id="idm45694695219976" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="GETasyn17" data-type="indexterm" id="idm45694695218600" class="calibre6"/></p>

<p class="author1">To test this revised version of the program, enter the following into your browser and you should see the same result as before, just loaded in via a GET rather than a POST request:</p>

<pre data-type="programlisting" class="calibre29">
http://127.0.0.1/18/urlget.html
</pre>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Sending XML Requests" class="calibre4"><div class="preface" id="sending_xml_requests">
<h2 class="calibre28">Sending XML Requests</h2>

<p class="author1">Although<a contenteditable="false" data-primary="XMLHttpRequest" data-secondary="sending XML requests" data-type="indexterm" id="XMRsend17" class="calibre6"/> the objects we’ve been creating are called <code class="calibre15">XMLHttpRequest</code> objects, so far we have made absolutely no use of XML. As you have seen, we have been able to asynchronously request an entire HTML document, but we could equally have asked for a text page, a string or number, or even spreadsheet data.</p>

<p class="author1">So, let’s modify the previous example document and PHP program to fetch some XML data. To do this, first take a look at the PHP program, <em class="hyperlink">xmlget.php</em>, shown in <a data-type="xref" href="#xmlgetdotphp" class="calibre6">Example 18-5</a>.</p>

<div data-type="example" id="xmlgetdotphp" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 18-5. </span>xmlget.php</h5>

<pre data-code-language="php" data-programming-language="perl" class="calibre29">
<code class="o">&lt;</code><code class="o">?</code><code class="n">php</code><code class="calibre15">
  </code><code class="k">if</code><code class="calibre15"> </code><code class="p">(</code><code class="nb">isset</code><code class="p">(</code><code class="nv">$_GET</code><code class="p">[</code><code class="s">'url'</code><code class="p">]))</code><code class="calibre15">
  </code><code class="p">{</code><code class="calibre15">
    </code><strong class="calibre31"><code class="nb1">header</code><code class="p1">(</code><code class="s2">'Content-Type: text/xml'</code><code class="p1">);</code></strong><code class="calibre15">
    </code><code class="k">echo</code><code class="calibre15"> </code><code class="nb">file_get_contents</code><code class="p">(</code><code class="s">"</code><code class="s">http://</code><code class="s">"</code><code class="o">.</code><code class="n">sanitizeString</code><code class="p">(</code><code class="nv">$_GET</code><code class="p">[</code><code class="s">'url'</code><code class="p">]));</code><code class="calibre15">
  </code><code class="p">}</code><code class="calibre15">

  </code><code class="k">function</code><code class="calibre15"> </code><code class="nf">sanitizeString</code><code class="p">(</code><code class="nv">$var</code><code class="p">)</code><code class="calibre15">
  </code><code class="p">{</code><code class="calibre15">
    </code><code class="nv">$var</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="nb">strip_tags</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code><code class="calibre15">
    </code><code class="nv">$var</code><code class="calibre15"> </code><code class="o">=</code><code class="calibre15"> </code><code class="nb">htmlentities</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code><code class="calibre15">
    </code><code class="k">return</code><code class="calibre15"> </code><code class="nb">stripslashes</code><code class="p">(</code><code class="nv">$var</code><code class="p">);</code><code class="calibre15">
  </code><code class="p">}</code><code class="calibre15">
</code><code class="cp">?&gt;</code></pre>
</div>

<p class="author1">This program has been very slightly modified (shown in bold highlighting) to output the correct XML header before returning a fetched document. No checking is done here, as it is assumed that the calling code will request an actual XML document.</p>

<p class="author1">Now on to the HTML document, <em class="hyperlink">xmlget.html</em>, shown in <a data-type="xref" href="#xmlgetdothtml" class="calibre6">Example 18-6</a>.</p>
<!--Replaced 18-6 with what was 18-7-->

<div data-type="example" id="xmlgetdothtml" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 18-6. </span>xmlget.html</h5>

<pre data-code-language="xml" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code><code class="calibre15">
</code><code class="nt">&lt;html</code><code class="nt">&gt;</code><code class="calibre15"> </code><code class="c4">&lt;!--</code><code class="c4"> xmlget.html </code><code class="c4">--&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;head</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;title</code><code class="nt">&gt;</code><code class="calibre15">Asynchronous Communication Example</code><code class="nt">&lt;/title&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;/head&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;body</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;h1</code><code class="nt">&gt;</code><code class="calibre15">Loading XML data into a DIV</code><code class="nt">&lt;/h1&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;div</code><code class="calibre15"> </code><code class="na">id=</code><code class="s">'info'</code><code class="nt">&gt;</code><code class="calibre15">This sentence will be replaced</code><code class="nt">&lt;/div&gt;</code><code class="calibre15">
  
    </code><code class="nt">&lt;script</code><code class="nt">&gt;</code><code class="calibre15">
      </code><strong class="calibre31"><code class="calibre17">let out     = ''</code></strong><code class="calibre15">
      let nocache = "</code><code class="err">&amp;</code><code class="calibre15">nocache=" + Math.random() * 1000000
</code><strong class="calibre31"><code class="calibre17">      let url     = "rss.news.yahoo.com/rss/topstories"
</code></strong><code class="calibre15">      let XHR     = new XMLHttpRequest()
    
      XHR.open("POST", "http://127.0.0.1/18/xmlget.php?url=" + url + nocache, true)
      XHR.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
      XHR.send()

      XHR.onreadystatechange = function()
      {
        if (this.readyState == 4 </code><code class="err">&amp;</code><code class="err">&amp;</code><code class="calibre15"> this.status == 200)
        {
           </code><strong class="calibre31"><code class="calibre17">let titles = this.responseXML.getElementsByTagName('title')

           for (let j = 0 ; j </code><code class="na1">&lt; titles.length</code><code class="calibre17"> </code><code class="si">;</code><code class="calibre17"> </code><code class="si">+</code><code class="si">+</code><code class="si">j</code><code class="si">)</code><code class="calibre17">
           </code><code class="si">{</code><code class="calibre17">
             </code><code class="si">o</code><code class="si">u</code><code class="si">t</code><code class="calibre17"> </code><code class="si">+</code><code class="si">=</code><code class="calibre17"> </code><code class="si">t</code><code class="si">i</code><code class="si">t</code><code class="si">l</code><code class="si">e</code><code class="si">s</code><code class="si">[</code><code class="si">j</code><code class="si">]</code><code class="si">.</code><code class="si">c</code><code class="si">h</code><code class="si">i</code><code class="si">l</code><code class="si">d</code><code class="si">N</code><code class="si">o</code><code class="si">d</code><code class="si">e</code><code class="si">s</code><code class="si">[</code><code class="si">0</code><code class="si">]</code><code class="si">.</code><code class="si">n</code><code class="si">o</code><code class="si">d</code><code class="si">e</code><code class="si">V</code><code class="si">a</code><code class="si">l</code><code class="si">u</code><code class="si">e</code><code class="calibre17"> </code><code class="si">+</code><code class="calibre17"> </code><code class="si">'</code><code class="si">&lt;</code><code class="si">b</code><code class="si">r</code><code class="na1">&gt;</code><code class="calibre17">'
           }
           document.getElementById('info').innerHTML = out </code></strong><code class="calibre15"> 
        }
      }      
    </code><code class="nt">&lt;/script&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;/body&gt;</code><code class="calibre15">
</code><code class="nt">&lt;/html&gt;</code><code class="calibre15">
</code></pre>
</div>

<p class="author1">Again, the differences have been highlighted in bold. As you can see, this code is substantially similar to the previous versions, except that the URL now being requested, <em class="hyperlink">rss.news.yahoo.com/rss/topstories</em>, contains an XML document, the <em class="hyperlink">Yahoo! News Top Stories</em> feed.</p>

<p class="author1">The other big change is the use of the <code class="calibre15">responseXML</code> property, which replaces the <code class="calibre15">responseText</code> property. Whenever a server returns XML data, <code class="calibre15">responseXML</code> will contain the XML returned.</p>

<p class="author1">However, <code class="calibre15">responseXML</code> doesn’t simply contain a string of XML text: it is actually a complete XML document object that we can examine and parse using DOM tree methods and properties. This means it is accessible, for example, by the JavaScript <code class="calibre15">getElementsByTagName</code> method.</p>

<section data-type="sect3" data-pdf-bookmark="About XML" class="calibre4"><div class="preface" id="about_xml">
<h3 class="calibre43">About XML</h3>

<p class="author1">An XML document<a contenteditable="false" data-primary="DOM (Document Object Model)" data-secondary="XML documents and" data-type="indexterm" id="DOMxml17" class="calibre6"/><a contenteditable="false" data-primary="XML documents" data-type="indexterm" id="sml17" class="calibre6"/> will generally take the form of the RSS feed shown in <a data-type="xref" href="#xmlexample187" class="calibre6">Example 18-7</a>. However, the beauty of XML is that we can store this type of structure internally in a DOM tree (see <a data-type="xref" href="#dom_tree_of_example_17-8" class="calibre6">Figure 18-3</a>) to make it quickly searchable:</p>
<!--Replaced - 18-7 to move to 18-6-->

<div data-type="example" id="xmlexample187" class="calibre41">
  <pre data-code-language="xml" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code>
<code class="nt">&lt;rss</code> <code class="na">version=</code><code class="s">"2.0"</code><code class="nt">&gt;</code>
    <code class="nt">&lt;channel&gt;</code>
        <code class="nt">&lt;title&gt;</code>RSS Feed<code class="nt">&lt;/title&gt;</code>
        <code class="nt">&lt;link&gt;</code>http://website.com<code class="nt">&lt;/link&gt;</code>
        <code class="nt">&lt;description&gt;</code>website.com's RSS Feed<code class="nt">&lt;/description&gt;</code>
        <code class="nt">&lt;pubDate&gt;</code>Mon, 10 May 2027 00:00:00 GMT<code class="nt">&lt;/pubDate&gt;</code>
        <code class="nt">&lt;item&gt;</code>
            <code class="nt">&lt;title&gt;</code>Headline<code class="nt">&lt;/title&gt;</code>
            <code class="nt">&lt;guid&gt;</code>http://website.com/headline<code class="nt">&lt;/guid&gt;</code>
            <code class="nt">&lt;description&gt;</code>This is a headline<code class="nt">&lt;/description&gt;</code>
        <code class="nt">&lt;/item&gt;</code>
        <code class="nt">&lt;item&gt;</code>
            <code class="nt">&lt;title&gt;</code>Headline 2<code class="nt">&lt;/title&gt;</code>
            <code class="nt">&lt;guid&gt;</code>http://website.com/headline2<code class="nt">&lt;/guid&gt;</code>
            <code class="nt">&lt;description&gt;</code>The 2nd headline<code class="nt">&lt;/description&gt;</code>
        <code class="nt">&lt;/item&gt;</code>
    <code class="nt">&lt;/channel&gt;</code>
<code class="nt">&lt;/rss&gt;</code>
</pre>
</div>

<figure class="calibre23"><div id="dom_tree_of_example_17-8" class="figure"><img alt="The DOM tree of Example 17-8" src="Images/pmj6_1803.png" class="calibre92"/>
<h6 class="calibre24"><span class="keep-together">Figure 18-3. </span>The DOM tree of <a data-type="xref" href="#xmlexample187" class="calibre6">Example 18-7</a></h6>
</div></figure>

<p class="author1">Then, using the <code class="calibre15">getElementsByTagName</code> method, we<a contenteditable="false" data-primary="getElementsByTagName method" data-type="indexterm" id="idm45694694911320" class="calibre6"/> can quickly extract the values associated with various tags without a lot of string searching. This is exactly what we do in <a data-type="xref" href="#xmlgetdothtml" class="calibre6">Example 18-6</a>, where the following command is issued:</p>

<pre data-code-language="javascript" data-programming-language="perl" class="calibre29">
<code class="k">let</code> <code class="n">titles</code> <code class="o">=</code> <code class="k">this</code><code class="p">.</code><code class="n">responseXML</code><code class="p">.</code><code class="n">getElementsByTagName</code><code class="p">(</code><code class="s">'title'</code><code class="p">)</code></pre>

<p class="author1">This single command has the effect of placing all the values of the <code class="calibre15">&lt;title&gt;</code> elements into the array <code class="calibre15">titles</code>. From there, it is a simple matter to extract them with the following expression (where <code class="calibre15">j</code> has been assigned to an integer that represents the title to access):</p>

<pre data-code-language="javascript" data-programming-language="perl" class="calibre29">
<code class="n">titles</code><code class="p">[</code><code class="n">j</code><code class="p">].</code><code class="n">childNodes</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="n">nodeValue</code></pre>

<p class="author1">All the titles are then appended to the string variable <code class="calibre15">out</code>, and once they’ve all been processed, the result is inserted into the empty <code class="calibre15">&lt;div&gt;</code> at the document start.</p>

<p class="author1">To recap, each entity such as <code class="calibre15">title</code> is a node, and so, for example, the title text is considered a node inside the title. But even after you get the child node, you have to ask for it as text, which is the purpose of <code class="calibre15">.nodeValue</code>. Also, as with all form data, remember that you can use either the POST or the GET method when requesting XML data; your choice will make little difference to the result.</p>

<p class="author1">To test this XML program, enter the following into your browser, and you should see something like <a data-type="xref" href="#asynchronously-fetching-a-yahoo" class="calibre6">Figure 18-4</a>:</p>

<pre data-type="programlisting" class="calibre29">
http://127.0.0.1/18/xmlget.html</pre>

<figure class="calibre23"><div id="asynchronously-fetching-a-yahoo" class="figure"><img alt="" class="iimagesxml2divpng" src="Images/pmj6_1804.png"/>
<h6 class="calibre24"><span class="keep-together">Figure 18-4. </span>Asynchronously fetching a Yahoo! XML news feed</h6>
</div></figure>
</div></section>

<section data-type="sect3" data-pdf-bookmark="Why use XML?" class="calibre4"><div class="preface" id="why_use_xmlquestion_mark">
<h3 class="calibre43">Why use XML?</h3>

<p class="author1">You may ask why you would use XML other than for fetching XML documents such as RSS feeds. Well, the simple answer is that you don’t have to, but if you wish to pass structured data back to your applications, it could be a real pain to send a simple, unorganized jumble of text that would need complicated processing in JavaScript.</p>

<p class="author1">Instead, you can create an XML document and pass that back to the calling function, which will automatically place it into a DOM tree, as easily accessible as the HTML DOM object with which you are now familiar.</p>

<p class="author1">These<a contenteditable="false" data-primary="JavaScript Object Notation (JSON)" data-type="indexterm" id="idm45694694824680" class="calibre6"/> days programmers are more likely to use <a href="http://json.org" class="calibre6">JavaScript Object Notation (JSON) as their preferred data-interchange format</a>, as it’s a simple subset of JavaScript.<a contenteditable="false" data-primary="" data-startref="XMRsend17" data-type="indexterm" id="idm45694694822696" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="sml17" data-type="indexterm" id="idm45694694821352" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="DOMxml17" data-type="indexterm" id="idm45694694819976" class="calibre6"/></p>
</div></section>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Using Frameworks for Asynchronous Communication" class="calibre4"><div class="preface" id="using_frameworks_for_ajax">
<h2 class="calibre28">Using Frameworks for Asynchronous Communication</h2>

<p class="author1">Now<a contenteditable="false" data-primary="XMLHttpRequest" data-secondary="frameworks for" data-type="indexterm" id="idm45694694817032" class="calibre6"/> that you know how to code your own asynchronous routines, you might like to investigate some of the free frameworks that are available to make it even easier, and which offer many more advanced features. In particular, I would suggest you check out either <a href="http://jquery.com" class="calibre6">jQuery</a>, which is very popular, or <a href="http://reactjs.org" class="calibre6">React</a>, probably the fastest-growing framework. In the following chapter, though, we’ll look at how to apply styling to your websites with CSS.<a contenteditable="false" data-primary="" data-startref="JSasync17" data-type="indexterm" id="idm45694694813688" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="ACxml17" data-type="indexterm" id="idm45694694812312" class="calibre6"/></p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Questions" class="calibre4"><div class="preface" id="questions-id00103">
<h1 class="calibre11">Questions</h1>

<ol class="calibre25">
	<li class="calibre26">
	<p class="author1">Which object must be created in order to conduct asynchronous communication between a web server and JavaScript client?</p>
	</li>
	<li class="calibre26">
	<p class="author1">How can you tell when an asynchronous call has completed?</p>
	</li>
	<li class="calibre26">
	<p class="author1">How do you know whether an asynchronous call completed successfully?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What <code class="calibre15">XMLHttpRequest</code> object property returns an asynchronous call’s text response?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What <code class="calibre15">XMLHttpRequest</code> object property returns an asynchronous call’s XML response?</p>
	</li>
	<li class="calibre26">
	<p class="author1">How can you specify a callback function to handle asynchronous responses?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What <code class="calibre15">XMLHttpRequest</code> method is used to initiate an asynchronous request?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What are the main differences between an asynchronous GET and POST request?</p>
	</li>
</ol>

<p class="author1">See <a data-type="xref" href="app01_split_017.xhtml#chapter_18_answers" class="calibre6">“Chapter 18 Answers”</a> in the <a data-type="xref" href="app01_split_000.xhtml#solutions_to_the_chapter_questions" class="calibre6">Appendix A</a> for the answers to these <span class="keep-together">questions</span>.</p>
</div></section>
</div></section></div></body></html>