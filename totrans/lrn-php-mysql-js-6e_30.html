<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 27. HTML5 Audio and Video" class="calibre4"><div class="preface" id="html5_audio_and_video">
<h1 class="calibre10"><span class="keep-together">Chapter 27. </span>HTML5 Audio and Video</h1>

<p class="author1">One<a contenteditable="false" data-primary="HTML5" data-secondary="audio and video support" data-type="indexterm" id="HTaudio25" class="calibre6"/><a contenteditable="false" data-primary="audio (HTML5)" data-secondary="history of delivery formats" data-type="indexterm" id="idm45694665220680" class="calibre6"/><a contenteditable="false" data-primary="video (HTML5)" data-secondary="history of delivery formats" data-type="indexterm" id="idm45694665219464" class="calibre6"/> of the biggest driving forces behind the growth of the internet has been the insatiable demand from users for ever more multimedia in the form of audio and video. Initially, bandwidth was so precious that there was no such thing as live streaming, and it could take minutes or even hours to download an audio track, let alone a video.</p>

<p class="author1">The high cost of bandwidth and limited availability of fast modems drove the development of faster and more efficient compression algorithms, such as MP3 audio and MPEG video, but even then the only way to download files in any reasonable length of time was to drastically reduce their quality.</p>

<p class="author1">One of my earlier internet projects, back in 1997, was the UK’s first online radio station licensed by the music authorities. Actually, it was more of a podcast (before the term was coined) because we made a daily half-hour show and then compressed it down to 8-bit, 11 KHz mono using an algorithm originally developed for telephony, and it sounded like phone quality, or worse. Still, we quickly gained thousands of listeners who would download the show and then listen to it as they surfed to the sites discussed in it by means of a pop-up browser window containing a plug-in.</p>

<p class="author1">Thankfully for us, and everyone publishing multimedia, it soon became possible to offer greater audio and video quality, but still only by asking the user to download and install a plug-in player. Flash<a contenteditable="false" data-primary="Flash" data-type="indexterm" id="idm45694665215496" class="calibre6"/> became the most popular of these players, after beating rivals such as<a contenteditable="false" data-primary="RealAudio" data-type="indexterm" id="idm45694665214360" class="calibre6"/> RealAudio, but it gained a bad reputation as the cause of many a browser crash and constantly required upgrading when new versions were released.</p>

<p class="author1">So, it was generally agreed that the way ahead was to come up with some web standards for supporting multimedia directly within the browser. Of course, browser developers such as Microsoft and Google had differing visions of what these standards should look like, but when the dust settled, they had agreed on a subset of file types that all browsers should play natively, and these were introduced into the HTML5 specification.</p>

<p class="author1">Finally, it is possible (as long as you encode your audio and video in a few different formats) to upload multimedia to a web server, place a couple of HTML tags in a web page, and play the media on any major desktop browser, smartphone, or tablet device, without the user having to download a plug-in or make any other changes.</p>

<section data-type="sect1" data-pdf-bookmark="About Codecs" class="calibre4"><div class="preface" id="about_codecs">
<h1 class="calibre11">About Codecs</h1>

<p class="author1">The<a contenteditable="false" data-primary="codecs (encoders/decoders)" data-secondary="purpose of" data-type="indexterm" id="idm45694665209352" class="calibre6"/><a contenteditable="false" data-primary="audio (HTML5)" data-secondary="codecs (encoders/decoders)" data-type="indexterm" id="idm45694665207976" class="calibre6"/> term <em class="hyperlink">codec</em> stands for en<em class="hyperlink">co</em>der/<em class="hyperlink">dec</em>oder. It describes the functionality provided by software that encodes and decodes media such as audio and video. In HTML5 there are a number of different sets of codecs available, depending on the browser used.</p>

<p class="author1">One complication around audio and video, which rarely applies to graphics and other traditional web content, is the licensing carried by the formats and codecs. Many formats and codecs are provided for a fee, because they were developed by a single company or consortium of companies that chose a proprietary license. Some free and open source browsers don’t support the most popular formats and codecs because it is unfeasible to pay for them, or because the developers oppose proprietary licenses in principle. Because copyright laws vary from country to country and because licenses are hard to enforce, the codecs can usually be found on the web for no cost, but they might technically be illegal to use where you live.</p>

<p class="author1">Following<a contenteditable="false" data-primary="codecs (encoders/decoders)" data-secondary="supported by &lt;audio&gt; tag" data-type="indexterm" id="idm45694665203368" class="calibre6"/> are the codecs supported by the HTML5 <code class="calibre15">&lt;audio&gt;</code> tag (and also when audio is attached to HTML5 video):</p>

<dl class="calibre13">
	<dt class="plain"><dfn class="keep-together">AAC</dfn></dt>
	<dd class="calibre14">This<a contenteditable="false" data-primary="AAC (Advanced Audio Encoding)" data-type="indexterm" id="idm45694665199672" class="calibre6"/> audio codec, which stands for Advanced Audio Encoding, is a proprietary patented technology that generally uses the <em class="hyperlink">.aac</em> file extension. Its MIME type is <code class="calibre15">audio/aac</code>.</dd>
	<dt class="plain"><dfn class="keep-together">FLAC</dfn></dt>
	<dd class="calibre14">This<a contenteditable="false" data-primary="FLAC (Free Lossless Audio Codec)" data-type="indexterm" id="idm45694665196408" class="calibre6"/> audio codec, which stands for Free Lossless Audio Codec, was developed by the Xiph.Org Foundation. It uses the <em class="hyperlink">.flac</em> extension, and its Mime type is <code class="calibre15">audio/flac</code>.</dd>
	<dt class="plain"><dfn class="keep-together">MP3</dfn></dt>
	<dd class="calibre14">This<a contenteditable="false" data-primary="MP3 (MPEG Audio Player 3)" data-type="indexterm" id="idm45694665193096" class="calibre6"/> audio codec, which stands for MPEG Audio Layer 3, has been available for many years. Although the term is often (incorrectly) used to refer to any type of digital audio, it is a proprietary patented technology that uses the <em class="hyperlink">.mp3</em> extension. Its Mime type is <code class="calibre15">audio/mpeg</code>.</dd>
	<dt class="plain"><dfn class="keep-together">PCM</dfn></dt>
	<dd class="calibre14">This<a contenteditable="false" data-primary="PCM (Pulse Coded Modulation)" data-type="indexterm" id="idm45694665189448" class="calibre6"/> audio codec, which stands for Pulse Coded Modulation, stores the full data as encoded by an analog-to-digital converter and is the format used for storing data on audio CDs. Because it does not use compression, it is called a <em class="hyperlink">lossless</em> codec, and its files are generally many times larger than AAC or MP3 files. It usually has the extension <em class="hyperlink">.wav</em>. Its MIME type is <code class="calibre15">audio/wav</code>, but you may also see <code class="calibre15">audio/wave</code>.</dd>
	<dt class="plain"><dfn class="keep-together">Vorbis</dfn></dt>
	<dd class="calibre14">Sometimes<a contenteditable="false" data-primary="Ogg Vorbis" data-type="indexterm" id="idm45694665185128" class="calibre6"/><a contenteditable="false" data-primary="Vorbis" data-type="indexterm" id="idm45694665183992" class="calibre6"/> referred to as Ogg Vorbis—because it generally uses the <em class="hyperlink">.ogg</em> file extension—this audio codec is unencumbered by patents and free of royalty payments. Its MIME type is <code class="calibre15">audio/ogg</code>, or the WebM container uses <code class="calibre15">audio/webm</code>.</dd>
</dl>

<p class="author1">As of mid 2021, all of AAC, MP3, PCM, and Vorbis are generally supported by most operating systems and browsers (not including Microsoft’s discontinued Internet Explorer), with the following Safari-related exceptions:</p>

<dl class="calibre13">
	<dt class="plain">Vorbis <code class="calibre15">audio/ogg</code></dt>
	<dd class="calibre14">MacOS 10.11 and earlier Safari requires Xiph Quicktime</dd>
	<dt class="plain">Vorbis <code class="calibre15">audio/webm</code></dt>
	<dd class="calibre14">Not supported on Safari</dd>
	<dt class="plain">FLAC <code class="calibre15">audio/ogg</code></dt>
	<dd class="calibre14">Not supported on Safari (although <code class="calibre15">audio/flac</code> is)</dd>
</dl>

<p class="author1">Consequently, unless you really have a reason to use Vorbis, it is nowadays safe to just stick with either AAC or MP3 for compressed lossy audio, FLAC for compressed lossless, or PCM for uncompressed audio.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="The &lt;audio&gt; Element" class="calibre4"><div class="preface" id="less_thanaudiogreater_than_element">
<h1 class="calibre11">The &lt;audio&gt; Element</h1>

<p class="author1">To<a contenteditable="false" data-primary="audio (HTML5)" data-secondary="&lt;audio&gt; element" data-type="indexterm" id="idm45694665173368" class="calibre6"/> cater for various platforms, you can record or convert your content using multiple codecs and then list them all within <code class="calibre15">&lt;audio&gt;</code> and <code class="calibre15">&lt;/audio&gt;</code> tags, as in <a data-type="xref" href="#embedding_three_different_types_of_audio" class="calibre6">Example 27-1</a>. The<a contenteditable="false" data-primary="&lt;source&gt; tags" data-primary-sortas="source tags" data-type="indexterm" id="idm45694665169736" class="calibre6"/> nested <code class="calibre15">&lt;source&gt;</code> tags then contain the various media you wish to offer to a browser. Because the <code class="calibre15">controls</code> attribute is supplied, the result looks like <a data-type="xref" href="#playing_an_audio_file" class="calibre6">Figure 27-1</a>.</p>

<div data-type="example" id="embedding_three_different_types_of_audio" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 27-1. </span>Embedding three different types of audio files</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="nt">&lt;audio</code> <code class="na">controls</code><code class="nt">&gt;</code>
  <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'audio.m4a'</code> <code class="na">type=</code><code class="s">'audio/aac'</code><code class="nt">&gt;</code>
  <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'audio.mp3'</code> <code class="na">type=</code><code class="s">'audio/mp3'</code><code class="nt">&gt;</code>
  <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'audio.ogg'</code> <code class="na">type=</code><code class="s">'audio/ogg'</code><code class="nt">&gt;</code>
<code class="nt">&lt;/audio&gt;</code></pre>
</div>

<figure class="calibre23"><div id="playing_an_audio_file" class="figure"><img alt="Playing an audio file" src="Images/pmj6_2701.png" class="calibre169"/>
<h6 class="calibre24"><span class="keep-together">Figure 27-1. </span>Playing an audio file</h6>
</div></figure>

<p class="author1">In this example I included three different audio types, because that’s perfectly acceptable and can be a good idea if you wish to ensure that each browser can locate its preferred format rather than just one it knows how to handle. However, you can drop either (but not both) of the MP3 or the AAC files and still be confident that the example will play on all platforms.</p>

<p class="author1">The <code class="calibre15">&lt;audio&gt;</code> element and its partner <code class="calibre15">&lt;source&gt;</code> tag support several attributes:</p>

<dl class="calibre13">
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">autoplay</code></dfn></dt>
	<dd class="calibre14">Causes the audio to start playing as soon as it is ready</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">controls</code></dfn></dt>
	<dd class="calibre14">Causes the control panel to be displayed</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">loop</code></dfn></dt>
	<dd class="calibre14">Sets the audio to play over and over</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">preload</code></dfn></dt>
	<dd class="calibre14">Causes the audio to begin loading even before the user selects Play</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">src</code></dfn></dt>
	<dd class="calibre14">Specifies the source location of an audio file</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">type</code></dfn></dt>
	<dd class="calibre14">Specifies the codec used in creating the audio</dd>
</dl>

<p class="author1">If you don’t supply the <code class="calibre15">controls</code> attribute to the <code class="calibre15">&lt;audio&gt;</code> tag, and don’t use the <code class="calibre15">autoplay</code> attribute either, the sound will not play, and there won’t be a Play button for the user to click to start playback. This would leave you no option other than to offer this functionality in JavaScript, as in <a data-type="xref" href="#playing_audio_using_javascript" class="calibre6">Example 27-2</a> (with the additional code required highlighted in bold), which provides the ability to play and pause the audio, as shown in <a data-type="xref" href="#html5_audio_can_be_controlled_with_javas" class="calibre6">Figure 27-2</a>.</p>

<div data-type="example" id="playing_audio_using_javascript" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 27-2. </span>Playing audio using JavaScript</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code><code class="calibre15">
</code><code class="nt">&lt;html</code><code class="nt">&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;head</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;title</code><code class="nt">&gt;</code><code class="calibre15">Playing Audio with JavaScript</code><code class="nt">&lt;/title&gt;</code><code class="calibre15">
    </code><strong class="calibre31"><code class="na1">&lt;script </code><code class="na1">src=</code><code class="s2">'OSC.js'</code><code class="na1">&gt;</code><code class="na1">&lt;/script&gt;</code></strong><code class="calibre15">
  </code><code class="nt">&lt;/head&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;body</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;audio</code><code class="calibre15"> </code><strong class="calibre31"><code class="na1">id=</code><code class="s2">'myaudio'</code></strong><code class="nt">&gt;</code><code class="calibre15">
      </code><code class="nt">&lt;source</code><code class="calibre15"> </code><code class="na">src=</code><code class="s">'audio.m4a'</code><code class="calibre15"> </code><code class="na">type=</code><code class="s">'audio/aac'</code><code class="nt">&gt;</code><code class="calibre15">
      </code><code class="nt">&lt;source</code><code class="calibre15"> </code><code class="na">src=</code><code class="s">'audio.mp3'</code><code class="calibre15"> </code><code class="na">type=</code><code class="s">'audio/mp3'</code><code class="nt">&gt;</code><code class="calibre15">
      </code><code class="nt">&lt;source</code><code class="calibre15"> </code><code class="na">src=</code><code class="s">'audio.ogg'</code><code class="calibre15"> </code><code class="na">type=</code><code class="s">'audio/ogg'</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;/audio&gt;</code><code class="calibre15">

    </code><strong class="calibre31"><code class="na1">&lt;button</code><code class="calibre17"> </code><code class="na1">onclick=</code><code class="s2">'playaudio()'</code><code class="na1">&gt;</code><code class="calibre17">Play Audio</code><code class="na1">&lt;/button&gt;</code></strong><code class="calibre15">
    </code><strong class="calibre31"><code class="na1">&lt;button</code><code class="calibre17"> </code><code class="na1">onclick=</code><code class="s2">'pauseaudio()'</code><code class="na1">&gt;</code><code class="calibre17">Pause Audio</code><code class="na1">&lt;/button&gt;</code></strong><code class="calibre15">

    </code><strong class="calibre31"><code class="na1">&lt;script</code><code class="na1">&gt;</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="k1">function</code><code class="calibre17"> </code><code class="nx1">playaudio</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">{</code></strong><code class="calibre15">
        </code><strong class="calibre31"><code class="nx1">O</code><code class="p1">(</code><code class="s2">'myaudio'</code><code class="p1">)</code><code class="p1">.</code><code class="nx1">play</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">}</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="k1">function</code><code class="calibre17"> </code><code class="nx1">pauseaudio</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">{</code></strong><code class="calibre15">
        </code><strong class="calibre31"><code class="nx1">O</code><code class="p1">(</code><code class="s2">'myaudio'</code><code class="p1">)</code><code class="p1">.</code><code class="nx1">pause</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">}</code></strong><code class="calibre15">
    </code><code class="nt">&lt;/script&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;/body&gt;</code><code class="calibre15">
</code><code class="nt">&lt;/html&gt;</code></pre>
</div>

<figure class="calibre23"><div id="html5_audio_can_be_controlled_with_javas" class="figure"><img alt="HTML5 audio can be controlled with JavaScript" src="Images/pmj6_2702.png" class="calibre170"/>
<h6 class="calibre24"><span class="keep-together">Figure 27-2. </span>HTML5 audio can be controlled with JavaScript</h6>
</div></figure>

<p class="author1">This works by calling the <code class="calibre15">play</code> or <code class="calibre15">pause</code> methods of the <code class="calibre15">myaudio</code> element when the buttons are clicked.<a contenteditable="false" data-primary="" data-startref="audio25" data-type="indexterm" id="idm45694664977640" class="calibre6"/></p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="The &lt;video&gt; Element" class="calibre4"><div class="preface" id="less_thanvideogreater_than_element">
<h1 class="calibre11">The &lt;video&gt; Element</h1>

<p class="author1">Playing<a contenteditable="false" data-primary="&lt;video&gt; element" data-primary-sortas="video element" data-type="indexterm" id="video25" class="calibre6"/><a contenteditable="false" data-primary="video (HTML5)" data-secondary="&lt;video&gt; element" data-type="indexterm" id="Velement27" class="calibre6"/> video in HTML5 is quite similar to audio; you just use the <code class="calibre15">&lt;video&gt;</code> tag and provide <code class="calibre15">&lt;source&gt;</code> elements for the media you are offering. <a data-type="xref" href="#playing_html5_video" class="calibre6">Example 27-3</a> shows how to do this with three different video codec types, as displayed in <a data-type="xref" href="#playing-html5-video-2" class="calibre6">Figure 27-3</a>.</p>

<div data-type="example" id="playing_html5_video" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 27-3. </span>Playing HTML5 video</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="nt">&lt;video</code> <code class="na">width=</code><code class="s">'560'</code> <code class="na">height=</code><code class="s">'320'</code> <code class="na">controls</code><code class="nt">&gt;</code>
  <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'movie.mp4'</code>  <code class="na">type=</code><code class="s">'video/mp4'</code><code class="nt">&gt;</code>
  <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'movie.webm'</code> <code class="na">type=</code><code class="s">'video/webm'</code><code class="nt">&gt;</code>
  <code class="nt">&lt;source</code> <code class="na">src=</code><code class="s">'movie.ogv'</code>  <code class="na">type=</code><code class="s">'video/ogg'</code><code class="nt">&gt;</code>
<code class="nt">&lt;/video&gt;</code></pre>
</div>

<figure class="calibre23"><div id="playing-html5-video-2" class="figure"><img alt="" class="iimageshtml5-video-examplejpg1" src="Images/pmj6_2703.png"/>
<h6 class="calibre24"><span class="keep-together">Figure 27-3. </span>Playing HTML5 video</h6>
</div></figure>

<section data-type="sect2" data-pdf-bookmark="The Video Codecs" class="calibre4"><div class="preface" id="video_codecs">
<h2 class="calibre28">The Video Codecs</h2>

<p class="author1">As<a contenteditable="false" data-primary="codecs (encoders/decoders)" data-secondary="supported by &lt;video&gt; tag" data-type="indexterm" id="idm45694664922952" class="calibre6"/><a contenteditable="false" data-primary="video (HTML5)" data-secondary="video codecs" data-type="indexterm" id="idm45694664921608" class="calibre6"/> with audio, there are a number of video codecs available, with differing support across multiple browsers. These codecs come in different containers, as follows:</p>

<dl class="calibre13">
	<dt class="plain"><dfn class="keep-together">MP4</dfn></dt>
	<dd class="calibre14">A<a contenteditable="false" data-primary="MP4 format" data-type="indexterm" id="idm45694664918392" class="calibre6"/> license-encumbered, multimedia container format standard specified as a part of MPEG-4. Its MIME type is <code class="calibre15">video/mp4</code>.</dd>
	<dt class="plain"><dfn class="keep-together">Ogg</dfn></dt>
	<dd class="calibre14">A<a contenteditable="false" data-primary="Ogg format" data-type="indexterm" id="idm45694664915560" class="calibre6"/> free, open container format maintained by the Xiph.Org Foundation. The creators of the Ogg format state that it is unrestricted by software patents. Its MIME type is <code class="calibre15">video/ogg</code>.</dd>
	<dt class="plain"><dfn class="keep-together">WebM</dfn></dt>
	<dd class="calibre14">An<a contenteditable="false" data-primary="WebM format" data-type="indexterm" id="idm45694664912680" class="calibre6"/> audio-video format designed to provide a royalty-free, open video compression format for use with HTML5 video. Its MIME type is <code class="calibre15">video/webm</code>.</dd>
</dl>

<p class="author1">These may then contain one of the following video codecs:</p>

<dl class="calibre13">
	<dt class="plain"><dfn class="keep-together">H.264 &amp; H.265</dfn></dt>
	<dd class="calibre14">Patented, proprietary<a contenteditable="false" data-primary="H.264 and H.265 video codec" data-type="indexterm" id="idm45694664908872" class="calibre6"/> video codecs that can be played back for free by the end user but that may incur royalty fees for all parts of the encoding and transmission process. H.265 supports almost double the compression of H.264 for the same quality output.</dd>
	<dt class="plain"><dfn class="keep-together">Theora</dfn></dt>
	<dd class="calibre14">A<a contenteditable="false" data-primary="Theora video codec" data-type="indexterm" id="idm45694664906392" class="calibre6"/> video codec that is unencumbered by patents and free of royalty payments at all levels of encoding, transmission, and playback.</dd>
	<dt class="plain"><dfn class="keep-together">VP8</dfn></dt>
	<dd class="calibre14">A<a contenteditable="false" data-primary="VP8 and VP9 video codecs" data-type="indexterm" id="idm45694664903992" class="calibre6"/> video codec that is similar to Theora but is owned by Google, which has published it as open source, making it royalty-free.</dd>
	<dt class="plain"><dfn class="keep-together">VP9</dfn></dt>
	<dd class="calibre14">The same as VP8 but more powerful, using half the bitrate.</dd>
</dl>

<p class="author1">Nowadays<a contenteditable="false" data-primary="video (HTML5)" data-secondary="support for in modern browsers" data-type="indexterm" id="idm45694664901208" class="calibre6"/><a contenteditable="false" data-primary="browsers" data-secondary="support for modern" data-type="indexterm" id="idm45694664899832" class="calibre6"/> you can be sure that pretty much all modern browsers support all of these, with the exceptions that Theora <code class="calibre15">video/ogg</code> is not supported on iOS, and macOS earlier than 10.11 requires Xiph QuickTime.</p>

<p class="author1">Therefore you may wish to steer clear of Ogg if iOS is one of your target platforms (which will usually be the case), as you can safely rely on either MP4 or WebM on all platforms and forget about other formats for the time being. However, in <a data-type="xref" href="#playing_html5_video" class="calibre6">Example 27-3</a> I have shown how you can add all the three main video types if you like, as the browser will then choose the format it prefers.</p>

<p class="author1">The <code class="calibre15">&lt;video&gt;</code> element and accompanying <code class="calibre15">&lt;source&gt;</code> tag support the following attributes:</p>

<dl class="calibre13">
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">autoplay</code></dfn></dt>
	<dd class="calibre14">Causes the video to start playing as soon as it is ready</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">controls</code></dfn></dt>
	<dd class="calibre14">Causes the control panel to be displayed</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">height</code></dfn></dt>
	<dd class="calibre14">Specifies the height at which to display the video</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">loop</code></dfn></dt>
	<dd class="calibre14">Sets the video to play over and over</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">muted</code></dfn></dt>
	<dd class="calibre14">Mutes the audio output</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">poster</code></dfn></dt>
	<dd class="calibre14">Lets you choose an image to display where the video will play</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">preload</code></dfn></dt>
	<dd class="calibre14">Causes the video to begin loading before the user selects Play</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">src</code></dfn></dt>
	<dd class="calibre14">Specifies the source location of a video file</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">type</code></dfn></dt>
	<dd class="calibre14">Specifies the codec used in creating the video</dd>
	<dt class="plain"><dfn class="keep-together"><code class="calibre15">width</code></dfn></dt>
	<dd class="calibre14">Specifies the width at which to display the video</dd>
</dl>

<p class="author1">If you wish to control video playback from JavaScript, you can do so using code such as that in <a data-type="xref" href="#controlling_video_playback_from_javascri" class="calibre6">Example 27-4</a> (with the additional code required highlighted in bold), with the results shown in <a data-type="xref" href="#video-with-buttons" class="calibre6">Figure 27-4</a>.</p>

<div data-type="example" id="controlling_video_playback_from_javascri" class="calibre41">
<h5 class="calibre42"><span class="keep-together">Example 27-4. </span>Controlling video playback from JavaScript</h5>

<pre data-code-language="html" data-programming-language="perl" class="calibre29">
<code class="cp">&lt;!DOCTYPE html&gt;</code><code class="calibre15">
</code><code class="nt">&lt;html</code><code class="nt">&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;head</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;title</code><code class="nt">&gt;</code><code class="calibre15">Playing Video with JavaScript</code><code class="nt">&lt;/title&gt;</code><code class="calibre15">
    </code><strong class="calibre31"><code class="na1">&lt;script </code><code class="na1">src=</code><code class="s2">'OSC.js'</code><code class="na1">&gt;</code><code class="na1">&lt;/script&gt;</code></strong><code class="calibre15">
  </code><code class="nt">&lt;/head&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;body</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;video</code><code class="calibre15"> </code><strong class="calibre31"><code class="na1">id=</code><code class="s2">'myvideo'</code></strong><code class="calibre15"> </code><code class="na">width=</code><code class="s">'560'</code><code class="calibre15"> </code><code class="na">height=</code><code class="s">'320'</code><code class="nt">&gt;</code><code class="calibre15">
      </code><code class="nt">&lt;source</code><code class="calibre15"> </code><code class="na">src=</code><code class="s">'movie.mp4'</code><code class="calibre15">  </code><code class="na">type=</code><code class="s">'video/mp4'</code><code class="nt">&gt;</code><code class="calibre15">
      </code><code class="nt">&lt;source</code><code class="calibre15"> </code><code class="na">src=</code><code class="s">'movie.webm'</code><code class="calibre15"> </code><code class="na">type=</code><code class="s">'video/webm'</code><code class="nt">&gt;</code><code class="calibre15">
      </code><code class="nt">&lt;source</code><code class="calibre15"> </code><code class="na">src=</code><code class="s">'movie.ogv'</code><code class="calibre15">  </code><code class="na">type=</code><code class="s">'video/ogg'</code><code class="nt">&gt;</code><code class="calibre15">
    </code><code class="nt">&lt;/video&gt;</code><code class="nt">&lt;br</code><code class="nt">&gt;</code><code class="calibre15">

    </code><strong class="calibre31"><code class="na1">&lt;button</code><code class="calibre17"> </code><code class="na1">onclick=</code><code class="s2">'playvideo()'</code><code class="na1">&gt;</code><code class="calibre17">Play Video</code><code class="na1">&lt;/button&gt;</code></strong><code class="calibre15">
    </code><strong class="calibre31"><code class="na1">&lt;button</code><code class="calibre17"> </code><code class="na1">onclick=</code><code class="s2">'pausevideo()'</code><code class="na1">&gt;</code><code class="calibre17">Pause Video</code><code class="na1">&lt;/button&gt;</code></strong><code class="calibre15">

    </code><strong class="calibre31"><code class="na1">&lt;script</code><code class="na1">&gt;</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="k1">function</code><code class="calibre17"> </code><code class="nx1">playvideo</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">{</code></strong><code class="calibre15">
        </code><strong class="calibre31"><code class="nx1">O</code><code class="p1">(</code><code class="s2">'myvideo'</code><code class="p1">)</code><code class="p1">.</code><code class="nx1">play</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">}</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="k1">function</code><code class="calibre17"> </code><code class="nx1">pausevideo</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">{</code></strong><code class="calibre15">
        </code><strong class="calibre31"><code class="nx1">O</code><code class="p1">(</code><code class="s2">'myvideo'</code><code class="p1">)</code><code class="p1">.</code><code class="nx1">pause</code><code class="p1">(</code><code class="p1">)</code></strong><code class="calibre15">
      </code><strong class="calibre31"><code class="p1">}</code></strong><code class="calibre15">
    </code><code class="nt">&lt;/script&gt;</code><code class="calibre15">
  </code><code class="nt">&lt;/body&gt;</code><code class="calibre15">
</code><code class="nt">&lt;/html&gt;</code></pre>
</div>

<p class="author1">This code is just like that for controlling audio from JavaScript. Simply call the <code class="calibre15">play</code> and/or <code class="calibre15">pause</code> methods of the <code class="calibre15">myvideo</code> object to play and pause the video.<a contenteditable="false" data-primary="" data-startref="video25" data-type="indexterm" id="idm45694664723464" class="calibre6"/></p>

<figure class="calibre23"><div id="video-with-buttons" class="figure"><img alt="" class="iimagesvideo-with-buttonsjpg" src="Images/pmj6_2704.png"/>
<h6 class="calibre24"><span class="keep-together">Figure 27-4. </span>JavaScript is being used to control the video</h6>
</div></figure>

<p class="author1">Using the information in this chapter, you will be able to embed any audio and video you like on almost all browsers and platforms without worrying about whether users may or may not be able to play it.</p>

<p class="author1">In the following chapter, I’ll demonstrate the use of a number of other HTML5 features, including geolocation and local storage.<a contenteditable="false" data-primary="" data-startref="HTaudio25" data-type="indexterm" id="idm45694664741992" class="calibre6"/><a contenteditable="false" data-primary="" data-startref="Velement27" data-type="indexterm" id="idm45694664740616" class="calibre6"/></p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Questions" class="calibre4"><div class="preface" id="questions-id00124">
<h1 class="calibre11">Questions</h1>

<ol class="calibre25">
	<li class="calibre26">
	<p class="author1">Which two HTML element tags are used to insert audio and video into an HTML5 document?</p>
	</li>
	<li class="calibre26">
	<p class="author1">Which two compressed, lossy audio codecs should you offer (or choose between) to guarantee playability on all major platforms?</p>
	</li>
	<li class="calibre26">
	<p class="author1">Which methods can you call to play and pause HTML5 media playback?</p>
	</li>
	<li class="calibre26">
	<p class="author1">What type of format is FLAC?</p>
	</li>
	<li class="calibre26">
	<p class="author1">Which two video codecs should you choose between (or offer) to guarantee playability on all major platforms?</p>
	</li>
</ol>

<p class="author1">See <a data-type="xref" href="app01_split_026.xhtml#chapter_27_answers" class="calibre6">“Chapter 27 Answers”</a> in the <a data-type="xref" href="app01_split_000.xhtml#solutions_to_the_chapter_questions" class="calibre6">Appendix A</a> for the answers to these <span class="keep-together">questions</span>.</p>
</div></section>
</div></section></div></body></html>