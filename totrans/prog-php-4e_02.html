<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" class="pagenumrestart" data-pdf-bookmark="Chapter 1. Introduction to PHP"><div class="chapter" id="introduction_to_php">
<h1><span class="label">Chapter 1. </span>Introduction to PHP</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" id="ix_php_intro"/>PHP is a simple yet powerful language designed for creating HTML content. This chapter covers essential background on the PHP language. It describes the nature and history of PHP, which platforms it runs on, and how to configure it. This chapter ends by showing you PHP in action, with a quick walkthrough of several PHP programs that illustrate common tasks, such as processing form data, interacting with a database, and creating graphics.</p>
<section data-type="sect1" data-pdf-bookmark="What Does PHP Do?"><div class="sect1" id="what_does_php_doquestion_mark">
<h1>What Does PHP Do?</h1>
<p>PHP can be used in two primary ways:</p>
<dl>
<dt>Server-side scripting</dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="web pages" data-secondary="dynamic, server-side scripting for" id="idm45922820792200"/><a contenteditable="false" data-type="indexterm" data-primary="scripting" id="idm45922820790760"/><a contenteditable="false" data-type="indexterm" data-primary="server-side scripting" id="idm45922820789656"/>PHP was originally designed to create <a contenteditable="false" data-type="indexterm" data-primary="dynamic web content" id="idm45922820369112"/>dynamic web content, and it is still best suited for that task. To generate HTML, you need the PHP parser and a web server through which to send the coded document files. PHP has also become popular for generating dynamic content via database connections, XML documents, graphics, PDF files, and so much more.</dd>
<dt>Command-line scripting</dt>
<dd><a contenteditable="false" data-type="indexterm" data-primary="command-line scripting" id="idm45922820366824"/>PHP can run scripts from the command line, much like Perl, awk, or the Unix shell. You might use the command-line scripts for system administration tasks, such as backup and log parsing; even some CRON job–type scripts can be done this way (as nonvisual PHP tasks).</dd>
</dl>
<p>In this book, however, we concentrate on the first item: using PHP to develop dynamic web content.</p>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="operating systems supported by" id="idm45922820364360"/><a contenteditable="false" data-type="indexterm" data-primary="operating systems" data-secondary="supported by PHP" id="idm45922820362920"/>PHP runs on all major operating systems, from Unix variants (including Linux, FreeBSD, Ubuntu, Debian, and Solaris) to Windows and macOS. <a contenteditable="false" data-type="indexterm" data-primary="web server" data-secondary="supported by PHP" id="idm45922820361256"/><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="web servers supported by" id="idm45922820359880"/>It can be used with all leading web servers, including the Apache, Nginx, and OpenBSD servers, to name a few; even cloud environments like Azure and Amazon are on the rise.</p>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="output formats supported" id="idm45922820357880"/><a contenteditable="false" data-type="indexterm" data-primary="output formats" id="idm45922820356488"/>The language itself is extremely flexible. For example, you aren’t limited to outputting just HTML or other text files—any document format can be generated. PHP has built-in support for generating PDF files and GIF, JPEG, and PNG images.</p>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="databases supported" id="idm45922820354712"/><a contenteditable="false" data-type="indexterm" data-primary="databases" data-secondary="supported by PHP" id="idm45922820353336"/>One of PHP’s most significant features is its wide-ranging support for databases. PHP supports all major databases (including MySQL, PostgreSQL, Oracle, Sybase, MS-SQL, DB2, and ODBC-compliant databases), and even many obscure ones. Even the more recent NoSQL-style databases like CouchDB and MongoDB are also supported. With PHP, creating web pages with dynamic content from a database is remarkably simple.</p>
<p><a contenteditable="false" data-type="indexterm" data-primary="PEAR (PHP Extension and Application Repository)" id="idm45922820351112"/>Finally, PHP provides a library of PHP code to perform common tasks, such as database abstraction, error handling, and so on, with the PHP Extension and Application Repository (PEAR). <a href="http://pear.php.net">PEAR</a> is a framework and distribution system for reusable PHP components.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A Brief History of PHP"><div class="sect1" id="a_brief_history_of_php">
<h1>A Brief History of PHP</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="history of" id="ix_php_history"/><a contenteditable="false" data-type="indexterm" data-primary="history of PHP" id="ix_history_php"/><a contenteditable="false" data-type="indexterm" data-primary="Lerdorf, Rasmus (developer of PHP)" id="ix_lerdorf"/>Rasmus Lerdorf first conceived of PHP in 1994, but the PHP that people use today is quite different from the initial version. To understand how PHP got where it is now, it is useful to know the historical evolution of the language. Here’s that story, with ample comments and emails from Rasmus himself.</p>
<section data-type="sect2" data-pdf-bookmark="The Evolution of PHP"><div class="sect2" id="the_evolution_of_php">
<h2>The Evolution of PHP</h2>
<p>Here is the PHP 1.0 announcement that was posted to the Usenet newsgroup (<em>comp.infosystems.www.authoring.cgi</em>) in June 1995:</p>
<pre data-type="programlisting">
From: rasmus@io.org (Rasmus Lerdorf)
Subject: Announce: Personal Home Page Tools (PHP Tools)
Date: 1995/06/08
Message-ID: &lt;3r7pgp$aa1@ionews.io.org&gt;#1/1
organization: none
newsgroups: comp.infosystems.www.authoring.cgi

Announcing the Personal Home Page Tools (PHP Tools) version 1.0.

These tools are a set of small tight cgi binaries written in C.
They perform a number of functions including:

. Logging accesses to your pages in your own private log files
. Real-time viewing of log information
. Providing a nice interface to this log information
. Displaying last access information right on your pages
. Full daily and total access counters
. Banning access to users based on their domain
. Password protecting pages based on users' domains
. Tracking accesses ** based on users' e-mail addresses **
. Tracking referring URL's - HTTP_REFERER support
. Performing server-side includes without needing server support for it
. Ability to not log accesses from certain domains (ie. your own)
. Easily create and display forms
. Ability to use form information in following documents

Here is what you don't need to use these tools:

. You do not need root access - install in your ~/public_html dir
. You do not need server-side includes enabled in your server
. You do not need access to Perl or Tcl or any other script interpreter
. You do not need access to the httpd log files

The only requirement for these tools to work is that you have
the ability to execute your own cgi programs. Ask your system
administrator if you are not sure what this means.

The tools also allow you to implement a guestbook or any other
form that needs to write information and display it to users
later in about 2 minutes.

The tools are in the public domain distributed under the GNU
Public License. Yes, that means they are free!

For a complete demonstration of these tools, point your browser
at: http://www.io.org/~rasmus

--
Rasmus Lerdorf
rasmus@io.org
http://www.io.org/~rasmus</pre>
<p>Note that the URL and email address shown in this message are long gone. The language of this announcement reflects the concerns that people had at the time, such as password-protecting pages, easily creating forms, and accessing form data on subsequent pages. The announcement also illustrates PHP’s initial positioning as a framework for a number of useful tools.</p>
<p>The announcement talks only about the tools that came with PHP, but behind the scenes the goal was to create a framework to make it easy to extend PHP and add more tools. The business logic for these add-ons was written in C; a simple parser picked tags out of the HTML and called the various C functions. It was never really part of the plan to create a scripting language.</p>
<p>So what happened?</p>
<p>Rasmus started working on a rather large project for the University of Toronto that needed a tool to pull together data from various places and present a nice web-based administration interface. Of course, he used PHP for the task, but for performance reasons, the various small tools of PHP 1.0 had to be brought together better and integrated into the web server.</p>
<p>Initially, some hacks to the NCSA web server were made, to patch it to support the core PHP functionality. The problem with this approach was that as a user, you had to replace your web server software with this special, hacked-up version. Fortunately, Apache was also starting to gain momentum around this time, and the Apache API made it easier to add functionality like PHP to the server.</p>
<p>Over the next year or so, a lot was done and the focus changed quite a bit. Here’s the PHP 2.0 (PHP/FI) announcement that was sent out in April 1996:</p>
<pre data-type="programlisting"> From: rasmus@madhaus.utcs.utoronto.ca (Rasmus Lerdorf)
 Subject: ANNOUNCE: PHP/FI Server-side HTML-Embedded Scripting Language
 Date: 1996/04/16
 Newsgroups: comp.infosystems.www.authoring.cgi

 PHP/FI is a server-side HTML embedded scripting language. It has built-in
 access logging and access restriction features and also support for
 embedded SQL queries to mSQL and/or Postgres95 backend databases.

 It is most likely the fastest and simplest tool available for creating
 database-enabled web sites.

 It will work with any UNIX-based web server on every UNIX flavour out
 there. The package is completely free of charge for all uses including
 commercial.

 Feature List:

 . Access Logging
 Log every hit to your pages in either a dbm or an mSQL database.
 Having hit information in a database format makes later analysis easier.
 . Access Restriction
 Password protect your pages, or restrict access based on the refering URL
 plus many other options.
 . mSQL Support
 Embed mSQL queries right in your HTML source files
 . Postgres95 Support
 Embed Postgres95 queries right in your HTML source files
 . DBM Support
 DB, DBM, NDBM and GDBM are all supported
 . RFC-1867 File Upload Support
 Create file upload forms
 . Variables, Arrays, Associative Arrays
 . User-Defined Functions with static variables + recursion
 . Conditionals and While loops
 Writing conditional dynamic web pages could not be easier than with
 the PHP/FI conditionals and looping support
 . Extended Regular Expressions
 Powerful string manipulation support through full regexp support
 . Raw HTTP Header Control
 Lets you send customized HTTP headers to the browser for advanced
 features such as cookies.
 . Dynamic GIF Image Creation
 Thomas Boutell's GD library is supported through an easy-to-use set of
 tags.

 It can be downloaded from the File Archive at: &lt;URL:http://www.vex.net/php&gt;

 --
 Rasmus Lerdorf
 rasmus@vex.net</pre>
<p>This was the first time the term <a contenteditable="false" data-type="indexterm" data-primary="scripting" id="idm45922820329864"/><em>scripting language</em> was used. PHP 1.0’s simplistic tag-replacement code was replaced with a parser that could handle a more sophisticated embedded tag language. By today’s standards, the tag language wasn’t particularly sophisticated, but compared to PHP 1.0 it certainly was.</p>
<p>The main reason for this change was that few people who used PHP 1.0 were actually interested in using the C-based framework for creating add-ons. Most users were much more interested in being able to embed logic directly in their web pages for creating conditional HTML, custom tags, and other such features. PHP 1.0 users were constantly requesting the ability to add the hit-tracking footer or send different HTML blocks conditionally. This led to the creation of an <a contenteditable="false" data-type="indexterm" data-primary="if tag" id="idm45922820327176"/><code>if</code> tag. Once you have <code>if</code>, you need <code>else</code> as well, and from there it’s a slippery slope to the point where, whether you want to or not, you end up writing an entire scripting language.</p>
<p>By mid-1997, PHP version 2.0 had grown quite a bit and had attracted a lot of users, but there were still some stability problems with the underlying parsing engine. The project was also still mostly a one-man effort, with a few contributions here and there. At this point, <a contenteditable="false" data-type="indexterm" data-primary="Suraski, Zeev (developer of PHP)" id="idm45922820488456"/>Zeev Suraski and <a contenteditable="false" data-type="indexterm" data-primary="Gutmans, Andi (developer of PHP)" id="idm45922820487160"/>Andi Gutmans in Tel Aviv, Israel, volunteered to rewrite the underlying parsing engine, and we agreed to make their rewrite the base for PHP version 3.0. Other people also volunteered to work on other parts of PHP, and the project changed from a one-person effort with a few contributors to a true open source project with many developers around the world.</p>
<p>Here is the PHP 3.0 announcement from June 1998:</p>
<pre data-type="programlisting"> June 6, 1998 -- The PHP Development Team announced the release of PHP 3.0,
 the latest release of the server-side scripting solution already in use on
 over 70,000 World Wide Web sites.

 This all-new version of the popular scripting language includes support
 for all major operating systems (Windows 95/NT, most versions of Unix,
 and Macintosh) and web servers (including Apache, Netscape servers,
 WebSite Pro, and Microsoft Internet Information Server).

 PHP 3.0 also supports a wide range of databases, including Oracle,
 Sybase, Solid, MySQ, mSQL, and PostgreSQL, as well as ODBC data sources.

 New features include persistent database connections, support for the
 SNMP and IMAP protocols, and a revamped C API for extending the language
 with new features.

 "PHP is a very programmer-friendly scripting language suitable for
 people with little or no programming experience as well as the
 seasoned web developer who needs to get things done quickly. The
 best thing about PHP is that you get results quickly," said
 Rasmus Lerdorf, one of the developers of the language.

 "Version 3 provides a much more powerful, reliable, and efficient
 implementation of the language, while maintaining the ease of use and
 rapid development that were the key to PHP's success in the past,"
 added Andi Gutmans, one of the implementors of the new language core.

 "At Circle Net we have found PHP to be the most robust platform for
 rapid web-based application development available today," said Troy
 Cobb, Chief Technology Officer at Circle Net, Inc. "Our use of PHP
 has cut our development time in half, and more than doubled our client
 satisfaction. PHP has enabled us to provide database-driven dynamic
 solutions which perform at phenomenal speeds."

 PHP 3.0 is available for free download in source form and binaries for
 several platforms at http://www.php.net/.

 The PHP Development Team is an international group of programmers who
 lead the open development of PHP and related projects.

 For more information, the PHP Development Team can be contacted at
 core@php.net.</pre>
<p>After the release of PHP 3.0, usage really started to take off. Version 4.0 was prompted by a number of developers who were interested in making some fundamental changes to the architecture of PHP. These changes included abstracting the layer between the language and the web server, adding a thread-safety mechanism, and adding a more advanced, two-stage parse/execute tag-parsing system. This new parser, primarily written by Zeev and Andi, was named the Zend engine. After a lot of work by a lot of developers, PHP 4.0 was released on May 22, 2000.</p>
<p>As this book goes to press, PHP version 7.3 has been released for some time. There have already been a few minor “dot” releases, and the stability of this current version is quite high. As you will see in this book, there have been some major advances made in this version of PHP, primarily in code processing on the server side. Many other minor changes, function additions, and feature enhancements have also been <span class="keep-together">incorporated.</span></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="The Widespread Use of PHP"><div class="sect2" id="the_widespread_use_of_php">
<h2>The Widespread Use of PHP</h2>
<p><a data-type="xref" href="#php_usage_as_of_march_twozeroonenine">Figure 1-1</a> shows the <a href="http://bit.ly/XjyVZM">usage of PHP as compiled by W3Techs</a> as of March 2019. <a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="usage of" id="idm45922820476680"/><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="versions of" id="idm45922820475304"/>The most interesting piece of data here is that 79% of all the surveyed websites use it, and yet version 5.0 is still the most widely used. If you look at the methodology used in the <a href="https://bit.ly/36QtdEF">W3Techs surveys</a>, you will see that they select the top 10 million sites (based on traffic; website popularity) in the world. As is evident, PHP has a very broad adoption indeed!<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_history_php" id="idm45922820472744"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_php_history" id="idm45922820471368"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_lerdorf" id="idm45922820469992"/></p>
<figure><div id="php_usage_as_of_march_twozeroonenine" class="figure">
<img src="Images/php4_0101.png" alt="PHP usage as of March 2019" width="565" height="475"/>
<h6><span class="label">Figure 1-1. </span>PHP usage as of March 2019</h6>
</div></figure>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Installing PHP"><div class="sect1" id="installing_php">
<h1>Installing PHP</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="website resources" data-secondary="installation instructions" id="idm45922820464840"/><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="installing" id="idm45922820463448"/><a contenteditable="false" data-type="indexterm" data-primary="installation" id="idm45922820462072"/>As mentioned, PHP is available for many operating systems and platforms. Therefore, you are encouraged to consult the <a href="https://oreil.ly/FzRfm">PHP documentation</a> to find the environment that most closely fits the one you will be using and follow the appropriate setup instructions.</p>
<p>From time to time, you may also want to change the way PHP is configured. To do that, you will have to change the PHP configuration file and restart your web (Apache) server. Each time you make a change to PHP’s environment, you will have to restart the web (Apache) server in order for those changes to take effect.</p>
<p><a contenteditable="false" data-type="indexterm" data-primary="website resources" id="idm45922820458840"/>PHP’s configuration settings are usually maintained in a <a contenteditable="false" data-type="indexterm" data-primary="php.ini file" id="idm45922820457416"/>file called <em>php.ini</em>. The settings in this file control the behavior of PHP features, such as session handling and form processing. Later chapters refer to some of the <em>php.ini</em> options, but in general the code in this book does not require a customized configuration. See the <a href="https://oreil.ly/hqVvL">PHP documentation</a> for more information on configuring <em>php.ini</em>.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A Walk Through PHP"><div class="sect1" id="a_walk_through_php">
<h1>A Walk Through PHP</h1>
<p><a contenteditable="false" data-type="indexterm" data-primary="HTML" data-secondary="embedding PHP code in" id="idm45922820451960"/>PHP pages are generally HTML pages with PHP commands embedded in them. This is in contrast to many other dynamic web page solutions, which are scripts that generate HTML. The web server processes the PHP commands and sends their output (and any HTML from the file) to the browser. <a data-type="xref" href="#example_one_onedot_hello_worlddotphp">Example 1-1</a> shows a complete PHP page.</p>
<div data-type="example" id="example_one_onedot_hello_worlddotphp">
<h5><span class="label">Example 1-1. </span>hello_world.php</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="nt">&lt;html&gt;</code>
 <code class="nt">&lt;head&gt;</code>
 <code class="nt">&lt;title&gt;</code>Look Out World<code class="nt">&lt;/title&gt;</code>
 <code class="nt">&lt;/head&gt;</code>

 <code class="nt">&lt;body&gt;</code>
 <code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="s2">"Hello, world!"</code><code class="p">;</code> <code class="cp">?&gt;</code>
 <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code></pre>
</div>
<p>Save the contents of <a data-type="xref" href="#example_one_onedot_hello_worlddotphp">Example 1-1</a> to a file, <em>hello_world.php</em>, and point your browser to it. The results appear in <a data-type="xref" href="#output_of_hello_worlddotphp">Figure 1-2</a>.</p>
<figure><div id="output_of_hello_worlddotphp" class="figure">
<img src="Images/php4_0102.png" alt="Output of hello_world.php" width="1024" height="438"/>
<h6><span class="label">Figure 1-2. </span>Output of hello_world.php</h6>
</div></figure>
<p>The PHP <a contenteditable="false" data-type="indexterm" data-primary="echo construct" id="idm45922813566056"/><code>echo</code> command produces output (the string “Hello, world!” in this case) inserted into the HTML file. In this example, the PHP code is placed between the <a contenteditable="false" data-type="indexterm" data-primary="&lt;?php…?&gt; tag, enclosing PHP code" id="idm45922819015240"/><a contenteditable="false" data-type="indexterm" data-primary="&lt;?php…?&gt; tag, enclosing PHP code" data-primary-sortas="php tag" id="idm45922814072168"/><span class="keep-together"><code>&lt;?php</code></span> and <code>?&gt;</code> tags. There are other ways to tag your PHP code—see <a data-type="xref" href="ch02.xhtml#language_basics">Chapter 2</a> for a full description.</p>
<section data-type="sect2" data-pdf-bookmark="Configuration Page"><div class="sect2" id="configuration_page">
<h2>Configuration Page</h2>
<p>The PHP function <a contenteditable="false" data-type="indexterm" data-primary="phpinfo function" id="idm45922814062168"/><code>phpinfo()</code> creates an HTML page full of <a contenteditable="false" data-type="indexterm" data-primary="php.ini file" data-secondary="displaying information about" id="idm45922813802968"/>information on how PHP was installed and is currently configured. You can use it to see whether you have particular extensions installed, or whether the <em>php.ini</em> file has been customized. <a data-type="xref" href="#example_one_twodot_using_phpinfoleft_pa">Example 1-2</a> is a complete page that displays the <code>phpinfo()</code> page.</p>
<div data-type="example" id="example_one_twodot_using_phpinfoleft_pa">
<h5><span class="label">Example 1-2. </span>Using phpinfo()</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="cp">&lt;?php</code> <code class="nb">phpinfo</code><code class="p">();</code><code class="cp">?&gt;</code></pre>
</div>
<p><a data-type="xref" href="#partial_output_of_phpinfoleft_parenthes">Figure 1-3</a> shows the first part of the output of <a data-type="xref" href="#example_one_twodot_using_phpinfoleft_pa">Example 1-2</a>.</p>
<figure><div id="partial_output_of_phpinfoleft_parenthes" class="figure">
<img src="Images/php4_0103.png" alt="Partial output of phpinfo()" width="947" height="864"/>
<h6><span class="label">Figure 1-3. </span>Partial output of phpinfo()</h6>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Forms"><div class="sect2" id="forms">
<h2>Forms</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="forms" id="idm45922819553544"/><a contenteditable="false" data-type="indexterm" data-primary="forms" data-secondary="creating" id="idm45922819977288"/><a data-type="xref" href="#example_one_threedot_processing_a_form">Example 1-3</a> creates and processes a form. When the user submits the form, the information typed into the name field is sent back to this page via the <code>$_SERVER['PHP_SELF']</code> form action. The PHP code tests for a name field and displays a greeting if it finds one.</p>
<div data-type="example" id="example_one_threedot_processing_a_form">
<h5><span class="label">Example 1-3. </span>Processing a form (form.php)</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="nt">&lt;html&gt;</code>
 <code class="nt">&lt;head&gt;</code>
 <code class="nt">&lt;title&gt;</code>Personalized Greeting Form<code class="nt">&lt;/title&gt;</code>
 <code class="nt">&lt;/head&gt;</code>

 <code class="nt">&lt;body&gt;</code>
 <code class="cp">&lt;?php</code> <code class="k">if</code><code class="p">(</code><code class="o">!</code><code class="k">empty</code><code class="p">(</code><code class="nv">$_POST</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]))</code> <code class="p">{</code>
 <code class="k">echo</code> <code class="s2">"Greetings, </code><code class="si">{</code><code class="nv">$_POST</code><code class="p">[</code><code class="s1">'name'</code><code class="p">]</code><code class="si">}</code><code class="s2">, and welcome."</code><code class="p">;</code>
 <code class="p">}</code> <code class="cp">?&gt;</code>

 <code class="nt">&lt;form</code> <code class="na">action=</code><code class="s">"</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$_SERVER</code><code class="p">[</code><code class="s1">'PHP_SELF'</code><code class="p">];</code> <code class="cp">?&gt;</code><code class="s">"</code> <code class="na">method=</code><code class="s">"post"</code><code class="nt">&gt;</code>
 Enter your name: <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"text"</code> <code class="na">name=</code><code class="s">"name"</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"submit"</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;/form&gt;</code>
 <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code></pre>
</div>
<p>The form and the message are shown in <a data-type="xref" href="#form_and_greeting_page">Figure 1-4</a>.</p>
<figure><div id="form_and_greeting_page" class="figure">
<img src="Images/php4_0104.png" alt="Form and greeting page" width="437" height="410"/>
<h6><span class="label">Figure 1-4. </span>Form and greeting page</h6>
</div></figure>
<p>PHP programs access form values primarily through the <a contenteditable="false" data-type="indexterm" data-primary="$_POST array" id="idm45922812525576"/><code>$_POST</code> and <a contenteditable="false" data-type="indexterm" data-primary="$_GET array" id="idm45922812524056"/><code>$_GET</code> array variables. <a data-type="xref" href="ch08.xhtml#web_techniques">Chapter 8</a> discusses forms and form processing in more detail.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Databases"><div class="sect2" id="databases-id00006">
<h2>Databases</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="databases supported" id="ix_php_databases_supported"/><a contenteditable="false" data-type="indexterm" data-primary="databases" data-secondary="supported by PHP" id="ix_databases_supported"/>PHP supports all the popular database systems, including MySQL, PostgreSQL, Oracle, Sybase, SQLite, and ODBC-compliant databases. <a data-type="xref" href="#a_mysql_book_list_query_run_through_a_p">Figure 1-5</a> shows part of a MySQL database <a contenteditable="false" data-type="indexterm" data-primary="databases" data-secondary="querying" id="ix_databases_query_ch1"/>query run through a PHP script, displaying the results of a book search on a book review site. It lists the book title, the year the book was published, and the book’s ISBN.</p>

<figure><div id="a_mysql_book_list_query_run_through_a_p" class="figure">
<img src="Images/php4_0105.png" alt="A MySQL book list query run through a PHP script" width="428" height="651"/>
<h6><span class="label">Figure 1-5. </span>A MySQL book list query run through a PHP script</h6>
</div></figure>

<p>The code in <a data-type="xref" href="#example_one_fourdot_querying_the_books">Example 1-4</a> connects to the database, issues a query to retrieve all available books (with the <code>WHERE</code> clause), and produces a table as output for all returned results through a <code>while</code> loop.</p>

<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The SQL code for this sample database is in the provided file <em>library.sql</em>. You can drop this code into MySQL after you create the library database and have the sample database at your disposal for testing out the following code sample as well as the related samples in <a data-type="xref" href="ch09.xhtml#databases-id00007">Chapter 9</a>.</p>
</div>


<div data-type="example" id="example_one_fourdot_querying_the_books">
<h5><span class="label">Example 1-4. </span>Querying the books database (booklist.php)</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="cp">&lt;?php</code>

<code class="nv">$db</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">mysqli</code><code class="p">(</code><code class="s2">"localhost"</code><code class="p">,</code> <code class="s2">"petermac"</code><code class="p">,</code> <code class="s2">"password"</code><code class="p">,</code> <code class="s2">"library"</code><code class="p">);</code>

<code class="c1">// make sure the above credentials are correct for your environment</code>
<code class="k">if</code> <code class="p">(</code><code class="nv">$db</code><code class="o">-&gt;</code><code class="na">connect_error</code><code class="p">)</code> <code class="p">{</code>
 <code class="k">die</code><code class="p">(</code><code class="s2">"Connect Error (</code><code class="si">{</code><code class="nv">$db</code><code class="o">-&gt;</code><code class="na">connect_errno</code><code class="si">}</code><code class="s2">) </code><code class="si">{</code><code class="nv">$db</code><code class="o">-&gt;</code><code class="na">connect_error</code><code class="si">}</code><code class="s2">"</code><code class="p">);</code>
<code class="p">}</code>

<code class="nv">$sql</code> <code class="o">=</code> <code class="s2">"SELECT * FROM books WHERE available = 1 ORDER BY title"</code><code class="p">;</code>
<code class="nv">$result</code> <code class="o">=</code> <code class="nv">$db</code><code class="o">-&gt;</code><code class="na">query</code><code class="p">(</code><code class="nv">$sql</code><code class="p">);</code>

<code class="cp">?&gt;</code>
<code class="nt">&lt;html&gt;</code>
<code class="nt">&lt;body&gt;</code>

<code class="nt">&lt;table</code> <code class="na">cellSpacing=</code><code class="s">"2"</code> <code class="na">cellPadding=</code><code class="s">"6"</code> <code class="na">align=</code><code class="s">"center"</code> <code class="na">border=</code><code class="s">"1"</code><code class="nt">&gt;</code>
 <code class="nt">&lt;tr&gt;</code>
 <code class="nt">&lt;td</code> <code class="na">colspan=</code><code class="s">"4"</code><code class="nt">&gt;</code>
 <code class="nt">&lt;h3</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;</code>These Books are currently available<code class="nt">&lt;/h3&gt;</code>
 <code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;/tr&gt;</code>

 <code class="nt">&lt;tr&gt;</code>
 <code class="nt">&lt;td</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;</code>Title<code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;td</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;</code>Year Published<code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;td</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;</code>ISBN<code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;/tr&gt;</code>
 <code class="cp">&lt;?php</code> <code class="k">while</code> <code class="p">(</code><code class="nv">$row</code> <code class="o">=</code> <code class="nv">$result</code><code class="o">-&gt;</code><code class="na">fetch_assoc</code><code class="p">())</code> <code class="p">{</code> <code class="cp">?&gt;</code>
 <code class="nt">&lt;tr&gt;</code>
 <code class="nt">&lt;td&gt;</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nb">stripslashes</code><code class="p">(</code><code class="nv">$row</code><code class="p">[</code><code class="s1">'title'</code><code class="p">]);</code> <code class="cp">?&gt;</code><code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;td</code> <code class="na">align=</code><code class="s">"center"</code><code class="nt">&gt;</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$row</code><code class="p">[</code><code class="s1">'pub_year'</code><code class="p">];</code> <code class="cp">?&gt;</code><code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;td&gt;</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$row</code><code class="p">[</code><code class="s1">'ISBN'</code><code class="p">];</code> <code class="cp">?&gt;</code><code class="nt">&lt;/td&gt;</code>
 <code class="nt">&lt;/tr&gt;</code>
 <code class="cp">&lt;?php</code> <code class="p">}</code> <code class="cp">?&gt;</code>
<code class="nt">&lt;/table&gt;</code>

<code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code></pre>
</div>
<p>Database-provided dynamic content drives the news, blog, and ecommerce sites at the heart of the web. More details on accessing databases from PHP are given in <a data-type="xref" href="ch09.xhtml#databases-id00007">Chapter 9</a>.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_databases_supported" id="idm45922812010424"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_php_databases_supported" id="idm45922812393624"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_databases_query_ch1" id="idm45922812392280"/></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Graphics"><div class="sect2" id="graphics">
<h2>Graphics</h2>
<p><a contenteditable="false" data-type="indexterm" data-primary="PHP" data-secondary="graphics" id="ix_php_graphics_ch1"/><a contenteditable="false" data-type="indexterm" data-primary="graphics" data-secondary="creating and drawing" id="ix_graphics_creating_ch1"/><a contenteditable="false" data-type="indexterm" data-primary="GD extension" id="ix_GD_extension_ch1"/>With PHP, you can easily create and manipulate images using the GD extension. <a data-type="xref" href="#example_one_fivedot_dynamic_buttons_lef">Example 1-5</a> provides a text entry field that lets the user specify the text for a button. It takes an empty button image file, and centers the text passed as the <code>GET</code> parameter <code>'message'</code> on it. The result is then sent back to the browser as a PNG image.</p>
<div data-type="example" id="example_one_fivedot_dynamic_buttons_lef">
<h5><span class="label">Example 1-5. </span><a contenteditable="false" data-type="indexterm" data-primary="buttons, creating dynamic" id="ix_buttons_creating_ch1"/>Dynamic buttons (graphic_example.php)</h5>
<pre data-type="programlisting" data-code-language="html+php"><code class="cp">&lt;?php</code>
<code class="k">if</code> <code class="p">(</code><code class="nb">isset</code><code class="p">(</code><code class="nv">$_GET</code><code class="p">[</code><code class="s1">'message'</code><code class="p">]))</code> <code class="p">{</code>
 <code class="c1">// load font and image, calculate width of text</code>
 <code class="nv">$font</code> <code class="o">=</code> <code class="nb">dirname</code><code class="p">(</code><code class="k">__FILE__</code><code class="p">)</code> <code class="o">.</code> <code class="s1">'/fonts/blazed.ttf'</code><code class="p">;</code>
 <code class="nv">$size</code> <code class="o">=</code> <code class="mi">12</code><code class="p">;</code>
 <code class="nv">$image</code> <code class="o">=</code> <code class="nb">imagecreatefrompng</code><code class="p">(</code><code class="s2">"button.png"</code><code class="p">);</code>
 <code class="nv">$tsize</code> <code class="o">=</code> <code class="nb">imagettfbbox</code><code class="p">(</code><code class="nv">$size</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="nv">$font</code><code class="p">,</code> <code class="nv">$_GET</code><code class="p">[</code><code class="s1">'message'</code><code class="p">]);</code>

 <code class="c1">// center</code>
 <code class="nv">$dx</code> <code class="o">=</code> <code class="nb">abs</code><code class="p">(</code><code class="nv">$tsize</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code> <code class="o">-</code> <code class="nv">$tsize</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>
 <code class="nv">$dy</code> <code class="o">=</code> <code class="nb">abs</code><code class="p">(</code><code class="nv">$tsize</code><code class="p">[</code><code class="mi">5</code><code class="p">]</code> <code class="o">-</code> <code class="nv">$tsize</code><code class="p">[</code><code class="mi">3</code><code class="p">]);</code>
 <code class="nv">$x</code> <code class="o">=</code> <code class="p">(</code><code class="nb">imagesx</code><code class="p">(</code><code class="nv">$image</code><code class="p">)</code> <code class="o">-</code> <code class="nv">$dx</code><code class="p">)</code> <code class="o">/</code> <code class="mi">2</code><code class="p">;</code>
 <code class="nv">$y</code> <code class="o">=</code> <code class="p">(</code><code class="nb">imagesy</code><code class="p">(</code><code class="nv">$image</code><code class="p">)</code> <code class="o">-</code> <code class="nv">$dy</code><code class="p">)</code> <code class="o">/</code> <code class="mi">2</code> <code class="o">+</code> <code class="nv">$dy</code><code class="p">;</code>

 <code class="c1">// draw text</code>
 <code class="nv">$black</code> <code class="o">=</code> <code class="nb">imagecolorallocate</code><code class="p">(</code><code class="nv">$im</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">);</code>
 <code class="nb">imagettftext</code><code class="p">(</code><code class="nv">$image</code><code class="p">,</code> <code class="nv">$size</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="nv">$x</code><code class="p">,</code> <code class="nv">$y</code><code class="p">,</code> <code class="nv">$black</code><code class="p">,</code> <code class="nv">$font</code><code class="p">,</code> <code class="nv">$_GET</code><code class="p">[</code><code class="s1">'message'</code><code class="p">]);</code>

 <code class="c1">// return image</code>
 <code class="nb">header</code><code class="p">(</code><code class="s2">"Content-type: image/png"</code><code class="p">);</code>
 <code class="nb">imagepng</code><code class="p">(</code><code class="nv">$image</code><code class="p">);</code>

 <code class="k">exit</code><code class="p">;</code>
<code class="p">}</code> <code class="cp">?&gt;</code>
<code class="nt">&lt;html&gt;</code>
 <code class="nt">&lt;head&gt;</code>
 <code class="nt">&lt;title&gt;</code>Button Form<code class="nt">&lt;/title&gt;</code>
 <code class="nt">&lt;/head&gt;</code>

 <code class="nt">&lt;body&gt;</code>
 <code class="nt">&lt;form</code> <code class="na">action=</code><code class="s">"</code><code class="cp">&lt;?php</code> <code class="k">echo</code> <code class="nv">$_SERVER</code><code class="p">[</code><code class="s1">'PHP_SELF'</code><code class="p">];</code> <code class="cp">?&gt;</code><code class="s">"</code> <code class="na">method=</code><code class="s">"GET"</code><code class="nt">&gt;</code>
 Enter message to appear on button:
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"text"</code> <code class="na">name=</code><code class="s">"message"</code> <code class="nt">/&gt;&lt;br</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"submit"</code> <code class="na">value=</code><code class="s">"Create Button"</code> <code class="nt">/&gt;</code>
 <code class="nt">&lt;/form&gt;</code>
 <code class="nt">&lt;/body&gt;</code>
<code class="nt">&lt;/html&gt;</code></pre>
</div>
<p>The form generated by <a data-type="xref" href="#example_one_fivedot_dynamic_buttons_lef">Example 1-5</a> is shown in <a data-type="xref" href="#button_creation_form">Figure 1-6</a>. The button created is shown in <a data-type="xref" href="#button_created">Figure 1-7</a>.</p>
<figure><div id="button_creation_form" class="figure">
<img src="Images/php4_0106.png" alt="Button creation form" width="422" height="142"/>
<h6><span class="label">Figure 1-6. </span>Button creation form</h6>
</div></figure>
<figure><div id="button_created" class="figure">
<img src="Images/php4_0107.png" alt="Button created" width="201" height="113"/>
<h6><span class="label">Figure 1-7. </span>Button created</h6>
</div></figure>
<p>You can use GD to dynamically resize images, produce graphs, and much more. PHP also has several extensions to generate documents in Adobe’s popular PDF format. <a data-type="xref" href="ch10.xhtml#graphic">Chapter 10</a> covers dynamic image generation in depth, while <a data-type="xref" href="ch11.xhtml#pdf">Chapter 11</a> provides instruction on how to create Adobe PDF files.<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_GD_extension_ch1" id="idm45922812258216"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_buttons_creating_ch1" id="idm45922812256840"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_graphics_creating_ch1" id="idm45922812255464"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_php_graphics_ch1" id="idm45922812254120"/></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What’s Next"><div class="sect1" id="whatapostrophes_nex">
<h1>What’s Next</h1>
<p>Now that you’ve had a taste of what is possible with PHP, you are ready to learn how to program in the language. We start with its basic structure, with special focus given to user-defined functions, string manipulation, and object-oriented programming. Then we move to specific application areas, such as the web, databases, graphics, XML, and security. We finish with quick references to the built-in functions and extensions. Master these chapters, and you will have mastered PHP!<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="ix_php_intro" id="idm45922812250680"/></p>
</div></section>
</div></section></div>



  </body></html>